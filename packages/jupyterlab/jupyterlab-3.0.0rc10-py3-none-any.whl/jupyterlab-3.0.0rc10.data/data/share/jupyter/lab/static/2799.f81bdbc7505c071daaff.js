/*! For license information please see 2799.f81bdbc7505c071daaff.js.LICENSE.txt */
(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[2799,885],{80885:(e,t,r)=>{"use strict";r.r(t);r.d(t,{Application:()=>l});var n=r(92163);var i=r.n(n);var o=r(52191);var a=r.n(o);var s=r(86992);var u=r.n(s);function c(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}var l=function(){function e(e){this._started=false;this._pluginMap=p.createPluginMap();this._serviceMap=p.createServiceMap();this._delegate=new o.PromiseDelegate;var t=new n.CommandRegistry;var r=e.contextMenuRenderer;var i=new s.ContextMenu({commands:t,renderer:r});this.commands=t;this.contextMenu=i;this.shell=e.shell}Object.defineProperty(e.prototype,"started",{get:function(){return this._delegate.promise},enumerable:true,configurable:true});e.prototype.hasPlugin=function(e){return e in this._pluginMap};e.prototype.listPlugins=function(){return Object.keys(this._pluginMap)};e.prototype.registerPlugin=function(e){if(e.id in this._pluginMap){throw new Error("Plugin '"+e.id+"' is already registered.")}var t=p.createPluginData(e);p.ensureNoCycle(t,this._pluginMap,this._serviceMap);if(t.provides){this._serviceMap.set(t.provides,t.id)}this._pluginMap[t.id]=t};e.prototype.registerPlugins=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.registerPlugin(n)}};e.prototype.activatePlugin=function(e){var t=this;var r=this._pluginMap[e];if(!r){return Promise.reject(new Error("Plugin '"+e+"' is not registered."))}if(r.activated){return Promise.resolve(undefined)}if(r.promise){return r.promise}var n=r.requires.map((function(e){return t.resolveRequiredService(e)}));var i=r.optional.map((function(e){return t.resolveOptionalService(e)}));var o=n.concat(i);r.promise=Promise.all(o).then((function(e){return r.activate.apply(undefined,c([t],e))})).then((function(e){r.service=e;r.activated=true;r.promise=null})).catch((function(e){r.promise=null;throw e}));return r.promise};e.prototype.resolveRequiredService=function(e){var t=this._serviceMap.get(e);if(!t){return Promise.reject(new Error("No provider for: "+e.name+"."))}var r=this._pluginMap[t];if(r.activated){return Promise.resolve(r.service)}return this.activatePlugin(t).then((function(){return r.service}))};e.prototype.resolveOptionalService=function(e){var t=this._serviceMap.get(e);if(!t){return Promise.resolve(null)}var r=this._pluginMap[t];if(r.activated){return Promise.resolve(r.service)}return this.activatePlugin(t).then((function(){return r.service})).catch((function(e){console.error(e);return null}))};e.prototype.start=function(e){var t=this;if(e===void 0){e={}}if(this._started){return this._delegate.promise}this._started=true;var r=e.hostID||"";var n=p.collectStartupPlugins(this._pluginMap,e);var i=n.map((function(e){return t.activatePlugin(e).catch((function(t){console.error("Plugin '"+e+"' failed to activate.");console.error(t)}))}));Promise.all(i).then((function(){t.attachShell(r);t.addEventListeners();t._delegate.resolve(undefined)}));return this._delegate.promise};e.prototype.handleEvent=function(e){switch(e.type){case"resize":this.evtResize(e);break;case"keydown":this.evtKeydown(e);break;case"contextmenu":this.evtContextMenu(e);break}};e.prototype.attachShell=function(e){s.Widget.attach(this.shell,e&&document.getElementById(e)||document.body)};e.prototype.addEventListeners=function(){document.addEventListener("contextmenu",this);document.addEventListener("keydown",this,true);window.addEventListener("resize",this)};e.prototype.evtKeydown=function(e){this.commands.processKeydownEvent(e)};e.prototype.evtContextMenu=function(e){if(e.shiftKey){return}if(this.contextMenu.open(e)){e.preventDefault();e.stopPropagation()}};e.prototype.evtResize=function(e){this.shell.update()};return e}();var p;(function(e){function t(){return Object.create(null)}e.createPluginMap=t;function r(){return new Map}e.createServiceMap=r;function n(e){return{id:e.id,service:null,promise:null,activated:false,activate:e.activate,provides:e.provides||null,autoStart:e.autoStart||false,requires:e.requires?e.requires.slice():[],optional:e.optional?e.optional.slice():[]}}e.createPluginData=n;function i(e,t,r){var n=e.requires.concat(e.optional);if(!e.provides||n.length===0){return}var i=[e.id];if(n.some(o)){throw new Error("Cycle detected: "+i.join(" -> ")+".")}function o(n){if(n===e.provides){return true}var a=r.get(n);if(!a){return false}var s=t[a];var u=s.requires.concat(s.optional);if(u.length===0){return false}i.push(a);if(u.some(o)){return true}i.pop();return false}}e.ensureNoCycle=i;function o(e,t){var r=Object.create(null);for(var n in e){if(e[n].autoStart){r[n]=true}}if(t.startPlugins){for(var i=0,o=t.startPlugins;i<o.length;i++){var n=o[i];r[n]=true}}if(t.ignorePlugins){for(var a=0,s=t.ignorePlugins;a<s.length;a++){var n=s[a];delete r[n]}}return Object.keys(r)}e.collectStartupPlugins=o})(p||(p={}))}}]);