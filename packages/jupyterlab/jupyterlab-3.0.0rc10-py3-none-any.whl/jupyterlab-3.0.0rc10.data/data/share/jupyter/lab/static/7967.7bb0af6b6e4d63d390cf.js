(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[7967],{73122:(e,t,s)=>{"use strict";s.r(t);s.d(t,{LogLevelSwitcher:()=>w,default:()=>I});var o=s(44626);var l=s(90265);var n=s(75029);var a=s(32834);var i=s(68677);var r=s(21644);var d=s(11368);var c=s(56204);var h=s(21157);var g=s(29103);var u=s(52191);var m=s(77865);var _=s.n(m);var f=s(63117);function p(e){const t=e.translator||h.nullTranslator;const s=t.load("jupyterlab");let o="";if(e.newMessages>0){o=s.__("%1 new messages, %2 log entries for %3",e.newMessages,e.logEntries,e.source)}else{o+=s.__("%1 log entries for %2",e.logEntries,e.source)}return _().createElement(c.GroupItem,{spacing:0,onClick:e.handleClick,title:o},_().createElement(g.listIcon.react,{top:"2px",stylesheet:"statusBar"}),e.newMessages>0?_().createElement(c.TextItem,{source:e.newMessages}):_().createElement(_().Fragment,null))}class v extends l.VDomRenderer{constructor(e){super(new v.Model(e.loggerRegistry));this.translator=e.translator||h.nullTranslator;this._handleClick=e.handleClick;this.addClass(c.interactiveItem);this.addClass("jp-LogConsoleStatusItem")}render(){if(this.model===null||this.model.version===0){this.hide();return null}this.show();const{flashEnabled:e,messages:t,source:s,version:o,versionDisplayed:l,versionNotified:n}=this.model;if(s!==null&&e&&o>n){this._flashHighlight();this.model.sourceNotified(s,o)}else if(s!==null&&e&&o>l){this._showHighlighted()}else{this._clearHighlight()}return _().createElement(p,{handleClick:this._handleClick,logEntries:t,newMessages:o-l,source:this.model.source,translator:this.translator})}_flashHighlight(){this._showHighlighted();this.removeClass("jp-LogConsole-flash");requestAnimationFrame((()=>{this.addClass("jp-LogConsole-flash")}))}_showHighlighted(){this.addClass("jp-mod-selected")}_clearHighlight(){this.removeClass("jp-LogConsole-flash");this.removeClass("jp-mod-selected")}}(function(e){class t extends l.VDomModel{constructor(e){super();this.flashEnabledChanged=new f.Signal(this);this._flashEnabled=true;this._source=null;this._sourceVersion=new Map;this._loggerRegistry=e;this._loggerRegistry.registryChanged.connect(this._handleLogRegistryChange,this);this._handleLogRegistryChange()}get messages(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.length}get version(){if(this._source===null){return 0}const e=this._loggerRegistry.getLogger(this._source);return e.version}get source(){return this._source}set source(e){if(this._source===e){return}this._source=e;this.stateChanged.emit()}get versionDisplayed(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastDisplayed)!==null&&t!==void 0?t:0}get versionNotified(){var e,t;if(this._source===null){return 0}return(t=(e=this._sourceVersion.get(this._source))===null||e===void 0?void 0:e.lastNotified)!==null&&t!==void 0?t:0}get flashEnabled(){return this._flashEnabled}set flashEnabled(e){if(this._flashEnabled===e){return}this._flashEnabled=e;this.flashEnabledChanged.emit();this.stateChanged.emit()}sourceDisplayed(e,t){if(e===null||t===null){return}const s=this._sourceVersion.get(e);let o=false;if(s.lastDisplayed<t){s.lastDisplayed=t;o=true}if(s.lastNotified<t){s.lastNotified=t;o=true}if(o&&e===this._source){this.stateChanged.emit()}}sourceNotified(e,t){if(e===null){return}const s=this._sourceVersion.get(e);if(s.lastNotified<t){s.lastNotified=t;if(e===this._source){this.stateChanged.emit()}}}_handleLogRegistryChange(){const e=this._loggerRegistry.getLoggers();for(const t of e){if(!this._sourceVersion.has(t.source)){t.contentChanged.connect(this._handleLogContentChange,this);this._sourceVersion.set(t.source,{lastDisplayed:0,lastNotified:0})}}}_handleLogContentChange({source:e},t){if(e===this._source){this.stateChanged.emit()}}}e.Model=t})(v||(v={}));const C="@jupyterlab/logconsole-extension:plugin";var b;(function(e){e.addCheckpoint="logconsole:add-checkpoint";e.clear="logconsole:clear";e.open="logconsole:open";e.setLevel="logconsole:set-level"})(b||(b={}));const L={activate:y,id:C,provides:n.ILoggerRegistry,requires:[o.ILabShell,r.IRenderMimeRegistry,i.INotebookTracker,h.ITranslator],optional:[l.ICommandPalette,o.ILayoutRestorer,a.IMainMenu,d.ISettingRegistry,c.IStatusBar],autoStart:true};function y(e,t,s,o,a,i,r,d,c,h){const u=a.load("jupyterlab");let m=null;let _=null;const f=new n.LoggerRegistry({defaultRendermime:s,maxLength:1e3});const p=new l.WidgetTracker({namespace:"logconsole"});if(r){void r.restore(p,{command:b.open,name:()=>"logconsole"})}const L=new v({loggerRegistry:f,handleClick:()=>{var t;if(!m){y({insertMode:"split-bottom",ref:(t=e.shell.currentWidget)===null||t===void 0?void 0:t.id})}else{e.shell.activateById(m.id)}},translator:a});const y=(t={})=>{_=new n.LogConsolePanel(f,a);_.source=t.source!==undefined?t.source:o.currentWidget?o.currentWidget.context.path:null;m=new l.MainAreaWidget({content:_});m.addClass("jp-LogConsole");m.title.closable=true;m.title.icon=g.listIcon;m.title.label=u.__("Log Console");const s=new l.CommandToolbarButton({commands:e.commands,id:b.addCheckpoint});const i=new l.CommandToolbarButton({commands:e.commands,id:b.clear});m.toolbar.addItem("lab-log-console-add-checkpoint",s);m.toolbar.addItem("lab-log-console-clear",i);m.toolbar.addItem("level",new w(m.content,a));_.sourceChanged.connect((()=>{e.commands.notifyCommandChanged()}));_.sourceDisplayed.connect(((e,{source:t,version:s})=>{L.model.sourceDisplayed(t,s)}));m.disposed.connect((()=>{m=null;_=null;e.commands.notifyCommandChanged()}));e.shell.add(m,"main",{ref:t.ref,mode:t.insertMode});void p.add(m);m.update();e.commands.notifyCommandChanged()};e.commands.addCommand(b.open,{label:u.__("Show Log Console"),execute:(e={})=>{if(m){m.dispose()}else{y(e)}},isToggled:()=>m!==null});e.commands.addCommand(b.addCheckpoint,{execute:()=>{var e;(e=_===null||_===void 0?void 0:_.logger)===null||e===void 0?void 0:e.checkpoint()},icon:g.addIcon,isEnabled:()=>!!_&&_.source!==null,label:u.__("Add Checkpoint")});e.commands.addCommand(b.clear,{execute:()=>{var e;(e=_===null||_===void 0?void 0:_.logger)===null||e===void 0?void 0:e.clear()},icon:g.clearIcon,isEnabled:()=>!!_&&_.source!==null,label:u.__("Clear Log")});function I(e){return e.length===0?e:e[0].toUpperCase()+e.slice(1)}e.commands.addCommand(b.setLevel,{execute:e=>{if(_===null||_===void 0?void 0:_.logger){_.logger.level=e.level}},isEnabled:()=>!!_&&_.source!==null,label:e=>u.__("Set Log Level to %1",I(e.level))});e.contextMenu.addItem({command:b.open,selector:".jp-Notebook"});if(d){d.viewMenu.addGroup([{command:b.open}])}if(i){i.addItem({command:b.open,category:u.__("Main Area")})}if(h){h.registerStatusItem("@jupyterlab/logconsole-extension:status",{item:L,align:"left",isActive:()=>true,activeStateChanged:L.model.stateChanged})}function E(e){if(m&&e===m){return}let t;if(e&&o.has(e)){t=e.context.path}else{t=null}if(_){_.source=t}L.model.source=t}void e.restored.then((()=>{E(t.currentWidget);t.currentChanged.connect(((e,{newValue:t})=>E(t)))}));if(c){const t=e=>{f.maxLength=e.get("maxLogEntries").composite;L.model.flashEnabled=e.get("flash").composite};Promise.all([c.load(C),e.restored]).then((([e])=>{t(e);e.changed.connect((e=>{t(e)}))})).catch((e=>{console.error(e.message)}))}return f}class w extends l.ReactWidget{constructor(e,t){super();this.handleChange=e=>{if(this._logConsole.logger){this._logConsole.logger.level=e.target.value}this.update()};this.handleKeyDown=e=>{if(e.keyCode===13){this._logConsole.activate()}};this._id=`level-${u.UUID.uuid4()}`;this.translator=t||h.nullTranslator;this._trans=this.translator.load("jupyterlab");this.addClass("jp-LogConsole-toolbarLogLevel");this._logConsole=e;if(e.source){this.update()}e.sourceChanged.connect(this._updateSource,this)}_updateSource(e,{oldValue:t,newValue:s}){if(t!==null){const s=e.loggerRegistry.getLogger(t);s.stateChanged.disconnect(this.update,this)}if(s!==null){const t=e.loggerRegistry.getLogger(s);t.stateChanged.connect(this.update,this)}this.update()}render(){const e=this._logConsole.logger;return m.createElement(m.Fragment,null,m.createElement("label",{htmlFor:this._id,className:e===null?"jp-LogConsole-toolbarLogLevel-disabled":undefined},this._trans.__("Log Level:")),m.createElement(g.HTMLSelect,{id:this._id,className:"jp-LogConsole-toolbarLogLevelDropdown",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:e===null||e===void 0?void 0:e.level,"aria-label":this._trans.__("Log level"),disabled:e===null,options:e===null?[]:[[this._trans.__("Critical"),"Critical"],[this._trans.__("Error"),"Error"],[this._trans.__("Warning"),"Warning"],[this._trans.__("Info"),"Info"],[this._trans.__("Debug"),"Debug"]].map((e=>({label:e[0],value:e[1].toLowerCase()})))}))}}const I=L}}]);