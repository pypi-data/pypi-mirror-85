(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[2549],{12549:(e,t,a)=>{"use strict";a.r(t);a.d(t,{VEGA_MIME_TYPE:()=>l,VEGALITE3_MIME_TYPE:()=>d,VEGALITE4_MIME_TYPE:()=>c,RenderedVega:()=>p,rendererFactory:()=>g,default:()=>m});var n=a(86992);var s=a.n(n);const i="jp-RenderedVegaCommon5";const o="jp-RenderedVega5";const r="jp-RenderedVegaLite";const l="application/vnd.vega.v5+json";const d="application/vnd.vegalite.v3+json";const c="application/vnd.vegalite.v4+json";class p extends n.Widget{constructor(e){super();this._mimeType=e.mimeType;this._resolver=e.resolver;this.addClass(i);this.addClass(this._mimeType===l?o:r)}async renderModel(e){const t=e.data[this._mimeType];if(t===undefined){return}const a=e.metadata[this._mimeType];const n=a&&a.embed_options?a.embed_options:{};const s=this._mimeType===l?"vega":"vega-lite";const i=u.vega!=null?u.vega:await u.ensureVega();const o=document.createElement("div");this.node.textContent="";this.node.appendChild(o);if(this._result){this._result.finalize()}const r=i.vega.loader({http:{credentials:"same-origin"}});const d=async(e,t)=>{const a=this._resolver;if((a===null||a===void 0?void 0:a.isLocal)&&a.isLocal(e)){const t=await a.resolveUrl(e);e=await a.getDownloadUrl(t)}return r.sanitize(e,t)};this._result=await i.default(o,t,Object.assign(Object.assign({actions:true,defaultStyle:true},n),{mode:s,loader:Object.assign(Object.assign({},r),{sanitize:d})}));if(e.data["image/png"]){return}const c=await this._result.view.toImageURL("png");e.setData({data:Object.assign(Object.assign({},e.data),{"image/png":c.split(",")[1]})})}dispose(){if(this._result){this._result.finalize()}super.dispose()}}const g={safe:true,mimeTypes:[l,d,c],createRenderer:e=>new p(e)};const v={id:"@jupyterlab/vega5-extension:factory",rendererFactory:g,rank:57,dataType:"json",documentWidgetFactoryOptions:[{name:"Vega5",primaryFileType:"vega5",fileTypes:["vega5","json"],defaultFor:["vega5"]},{name:"Vega-Lite4",primaryFileType:"vega-lite4",fileTypes:["vega-lite3","vega-lite4","json"],defaultFor:["vega-lite3","vega-lite4"]}],fileTypes:[{mimeTypes:[l],name:"vega5",extensions:[".vg",".vg.json",".vega"],icon:"ui-components:vega"},{mimeTypes:[c],name:"vega-lite4",extensions:[".vl",".vl.json",".vegalite"],icon:"ui-components:vega"},{mimeTypes:[d],name:"vega-lite3",extensions:[],icon:"ui-components:vega"}]};const m=v;var u;(function(e){function t(){if(e.vegaReady){return e.vegaReady}e.vegaReady=a.e(5085).then(a.t.bind(a,65085,23));return e.vegaReady}e.ensureVega=t})(u||(u={}))}}]);