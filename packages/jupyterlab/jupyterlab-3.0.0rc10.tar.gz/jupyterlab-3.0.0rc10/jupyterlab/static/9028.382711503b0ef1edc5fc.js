(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[9028,6344],{96344:(e,t,i)=>{"use strict";i.r(t);i.d(t,{IMarkdownViewerTracker:()=>n,MarkdownDocument:()=>f,MarkdownViewer:()=>p,MarkdownViewerFactory:()=>_});var r=i(52191);const n=new r.Token("@jupyterlab/markdownviewer:IMarkdownViewerTracker");var s=i(90265);var o=i(66995);var a=i(18834);var d=i(21644);var c=i(21157);var l=i(86992);const h="jp-MarkdownViewer";const u="text/markdown";class p extends l.Widget{constructor(e){super();this._config=Object.assign({},p.defaultConfig);this._fragment="";this._ready=new r.PromiseDelegate;this._isRendering=false;this._renderRequested=false;this.context=e.context;this.translator=e.translator||c.nullTranslator;this._trans=this.translator.load("jupyterlab");this.renderer=e.renderer;this.node.tabIndex=-1;this.addClass(h);const t=this.layout=new l.StackedLayout;t.addWidget(this.renderer);void this.context.ready.then((async()=>{await this._render();this._monitor=new o.ActivityMonitor({signal:this.context.model.contentChanged,timeout:this._config.renderTimeout});this._monitor.activityStopped.connect(this.update,this);this._ready.resolve(undefined)}))}get ready(){return this._ready.promise}setFragment(e){this._fragment=e;this.update()}setOption(e,t){if(this._config[e]===t){return}this._config[e]=t;const{style:i}=this.renderer.node;switch(e){case"fontFamily":i.setProperty("font-family",t);break;case"fontSize":i.setProperty("font-size",t?t+"px":null);break;case"hideFrontMatter":this.update();break;case"lineHeight":i.setProperty("line-height",t?t.toString():null);break;case"lineWidth":{const e=t?`calc(50% - ${t/2}ch)`:null;i.setProperty("padding-left",e);i.setProperty("padding-right",e);break}case"renderTimeout":if(this._monitor){this._monitor.timeout=t}break;default:break}}dispose(){if(this.isDisposed){return}if(this._monitor){this._monitor.dispose()}this._monitor=null;super.dispose()}onUpdateRequest(e){if(this.context.isReady&&!this.isDisposed){void this._render();this._fragment=""}}onActivateRequest(e){this.node.focus()}async _render(){if(this.isDisposed){return}if(this._isRendering){this._renderRequested=true;return}this._renderRequested=false;const{context:e}=this;const{model:t}=e;const i=t.toString();const r={};r[u]=this._config.hideFrontMatter?m.removeFrontMatter(i):i;const n=new d.MimeModel({data:r,metadata:{fragment:this._fragment}});try{this._isRendering=true;await this.renderer.renderModel(n);this._isRendering=false;if(this._renderRequested){return this._render()}}catch(o){requestAnimationFrame((()=>{this.dispose()}));void(0,s.showErrorMessage)(this._trans.__("Renderer Failure: %1",e.path),o)}}}(function(e){e.defaultConfig={fontFamily:null,fontSize:null,lineHeight:null,lineWidth:null,hideFrontMatter:true,renderTimeout:1e3}})(p||(p={}));class f extends a.DocumentWidget{setFragment(e){this.content.setFragment(e)}}class _ extends a.ABCWidgetFactory{constructor(e){super(m.createRegistryOptions(e));this._fileType=e.primaryFileType;this._rendermime=e.rendermime}createNewWidget(e){var t,i,r,n,s;const o=this._rendermime.clone({resolver:e.urlResolver});const a=o.createRenderer(u);const d=new p({context:e,renderer:a});d.title.icon=(t=this._fileType)===null||t===void 0?void 0:t.icon;d.title.iconClass=(r=(i=this._fileType)===null||i===void 0?void 0:i.iconClass)!==null&&r!==void 0?r:"";d.title.iconLabel=(s=(n=this._fileType)===null||n===void 0?void 0:n.iconLabel)!==null&&s!==void 0?s:"";const c=new f({content:d,context:e});return c}}var m;(function(e){function t(e){return Object.assign(Object.assign({},e),{readOnly:true})}e.createRegistryOptions=t;function i(e){const t=/^---\n[^]*?\n(---|...)\n/;const i=e.match(t);if(!i){return e}const{length:r}=i[0];return e.slice(r)}e.removeFrontMatter=i})(m||(m={}))}}]);