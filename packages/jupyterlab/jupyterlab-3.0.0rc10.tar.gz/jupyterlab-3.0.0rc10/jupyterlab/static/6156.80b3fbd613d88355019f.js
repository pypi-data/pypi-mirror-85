(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[6156],{76156:(e,t,n)=>{"use strict";n.r(t);n.d(t,{Commands:()=>x,default:()=>M,tabSpaceStatus:()=>k});var o=n(44626);var a=n(90265);var r=n(53703);var d=n(39193);var i=n(99021);var c=n(5328);var s=n(67674);var l=n(32834);var u=n(11368);var m=n(56204);var f=n(21157);var g=n(86992);var p=n(66995);var C=n(29103);var v;(function(e){e.createNew="fileeditor:create-new";e.createNewMarkdown="fileeditor:create-new-markdown-file";e.changeFontSize="fileeditor:change-font-size";e.lineNumbers="fileeditor:toggle-line-numbers";e.lineWrap="fileeditor:toggle-line-wrap";e.changeTabs="fileeditor:change-tabs";e.matchBrackets="fileeditor:toggle-match-brackets";e.autoClosingBrackets="fileeditor:toggle-autoclosing-brackets";e.createConsole="fileeditor:create-console";e.replaceSelection="fileeditor:replace-selection";e.runCode="fileeditor:run-code";e.runAllCode="fileeditor:run-all";e.markdownPreview="fileeditor:markdown-preview";e.undo="fileeditor:undo";e.redo="fileeditor:redo";e.cut="fileeditor:cut";e.copy="fileeditor:copy";e.paste="fileeditor:paste";e.selectAll="fileeditor:select-all"})(v||(v={}));const b="Editor";let h=Object.assign({},r.CodeEditor.defaultConfig);var x;(function(e){function t(e){return async function t(n,o){var a;const r=o||{};const d=await e.execute("console:create",{activate:r["activate"],name:(a=n.context.contentsModel)===null||a===void 0?void 0:a.name,path:n.context.path,preferredLanguage:n.context.model.defaultKernelLanguage,ref:n.id,insertMode:"split-bottom"});n.context.pathChanged.connect(((e,t)=>{var o;d.session.setPath(t);d.session.setName((o=n.context.contentsModel)===null||o===void 0?void 0:o.name)}))}}function n(e,t){h=Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite);t.notifyCommandChanged()}e.updateSettings=n;function o(e){e.forEach((e=>{d(e.content)}))}e.updateTracker=o;function d(e){const t=["lineNumbers","lineWrap","matchBrackets"];const n=e.editor;Object.keys(h).forEach((e=>{if(!t.includes(e)){n.setOption(e,h[e])}}))}e.updateWidget=d;function i(e,t,n,o,a,r,d){c(e,t,n,o);s(e,t,n,o,a);l(e,t,n,o,a);u(e,t,n,o);m(e,t,n,o,a);f(e,t,n,o);x(e,r,n,a);w(e,r,n,a);k(e,r,n,a);_(e,r,n,a);M(e,r,n);P(e,d,n);A(e,d,n);S(e,r,n,a);I(e,r,n,a);T(e,r,n,a);y(e,r,n,a);E(e,r,n,a);W(e,r,n,a)}e.addCommands=i;function c(e,t,n,o){e.addCommand(v.changeFontSize,{execute:e=>{const n=Number(e["delta"]);if(Number.isNaN(n)){console.error(`${v.changeFontSize}: delta arg must be a number`);return}const a=window.getComputedStyle(document.documentElement);const r=parseInt(a.getPropertyValue("--jp-code-font-size"),10);const d=h.fontSize||r;h.fontSize=d+n;return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:e=>e["name"]})}e.addChangeFontSizeCommand=c;function s(e,t,n,o,a){e.addCommand(v.lineNumbers,{execute:()=>{h.lineNumbers=!h.lineNumbers;return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isEnabled:a,isToggled:()=>h.lineNumbers,label:n.__("Line Numbers")})}e.addLineNumbersCommand=s;function l(e,t,n,o,a){e.addCommand(v.lineWrap,{execute:e=>{h.lineWrap=e["mode"]||"off";return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isEnabled:a,isToggled:e=>{const t=e["mode"]||"off";return h.lineWrap===t},label:n.__("Word Wrap")})}e.addWordWrapCommand=l;function u(e,t,n,o){e.addCommand(v.changeTabs,{label:e=>e["name"],execute:e=>{h.tabSize=e["size"]||4;h.insertSpaces=!!e["insertSpaces"];return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},isToggled:e=>{const t=!!e["insertSpaces"];const n=e["size"]||4;return h.insertSpaces===t&&h.tabSize===n}})}e.addChangeTabsCommand=u;function m(e,t,n,o,a){e.addCommand(v.matchBrackets,{execute:()=>{h.matchBrackets=!h.matchBrackets;return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:n.__("Match Brackets"),isEnabled:a,isToggled:()=>h.matchBrackets})}e.addMatchBracketsCommand=m;function f(e,t,n,o){e.addCommand(v.autoClosingBrackets,{execute:()=>{h.autoClosingBrackets=!h.autoClosingBrackets;return t.set(o,"editorConfig",h).catch((e=>{console.error(`Failed to set ${o}: ${e.message}`)}))},label:n.__("Auto Close Brackets for Text Editor"),isToggled:()=>h.autoClosingBrackets})}e.addAutoClosingBracketsCommand=f;function x(e,t,n,o){e.addCommand(v.replaceSelection,{execute:e=>{var n,o;const a=e["text"]||"";const r=t.currentWidget;if(!r){return}(o=(n=r.content.editor).replaceSelection)===null||o===void 0?void 0:o.call(n,a)},isEnabled:o,label:n.__("Replace Selection in Editor")})}e.addReplaceSelectionCommand=x;function w(e,n,o,a){e.addCommand(v.createConsole,{execute:o=>{const a=n.currentWidget;if(!a){return}return t(e)(a,o)},isEnabled:a,label:o.__("Create Console for Editor")})}e.addCreateConsoleCommand=w;function k(e,t,n,o){e.addCommand(v.runCode,{execute:()=>{var n;const o=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!o){return}let a="";const r=o.editor;const d=o.context.path;const i=p.PathExt.extname(d);const c=r.getSelection();const{start:s,end:l}=c;let u=s.column!==l.column||s.line!==l.line;if(u){const e=r.getOffsetAt(c.start);const t=r.getOffsetAt(c.end);a=r.model.value.text.substring(e,t)}else if(p.MarkdownCodeBlocks.isMarkdown(i)){const{text:e}=r.model.value;const t=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(e);for(const n of t){if(n.startLine<=s.line&&s.line<=n.endLine){a=n.code;u=true;break}}}if(!u){a=r.getLine(c.start.line);const e=r.getCursorPosition();if(e.line+1===r.lineCount){const e=r.model.value.text;r.model.value.text=e+"\n"}r.setCursorPosition({line:e.line+1,column:e.column})}const m=false;if(a){return e.execute("console:inject",{activate:m,code:a,path:d})}else{return Promise.resolve(void 0)}},isEnabled:o,label:n.__("Run Code")})}e.addRunCodeCommand=k;function _(e,t,n,o){e.addCommand(v.runAllCode,{execute:()=>{var n;const o=(n=t.currentWidget)===null||n===void 0?void 0:n.content;if(!o){return}let a="";const r=o.editor;const d=r.model.value.text;const i=o.context.path;const c=p.PathExt.extname(i);if(p.MarkdownCodeBlocks.isMarkdown(c)){const e=p.MarkdownCodeBlocks.findMarkdownCodeBlocks(d);for(const t of e){a+=t.code}}else{a=d}const s=false;if(a){return e.execute("console:inject",{activate:s,code:a,path:i})}else{return Promise.resolve(void 0)}},isEnabled:o,label:n.__("Run All Code")})}e.addRunAllCodeCommand=_;function M(e,t,n){e.addCommand(v.markdownPreview,{execute:()=>{const n=t.currentWidget;if(!n){return}const o=n.context.path;return e.execute("markdownviewer:open",{path:o,options:{mode:"split-right"}})},isVisible:()=>{const e=t.currentWidget;return e&&p.PathExt.extname(e.context.path)===".md"||false},label:n.__("Show Markdown Preview")})}e.addMarkdownPreviewCommand=M;function S(e,t,n,o){e.addCommand(v.undo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.undo()},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:C.undoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Undo")})}e.addUndoCommand=S;function I(e,t,n,o){e.addCommand(v.redo,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}n.editor.redo()},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return true},icon:C.redoIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Redo")})}e.addRedoCommand=I;function T(e,t,n,o){e.addCommand(v.cut,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const r=N(o);a.Clipboard.copyToSystem(r);o.replaceSelection&&o.replaceSelection("")},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return F(n.editor)},icon:C.cutIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Cut")})}e.addCutCommand=T;function y(e,t,n,o){e.addCommand(v.copy,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const r=N(o);a.Clipboard.copyToSystem(r)},isEnabled:()=>{var e;if(!o()){return false}const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return false}return F(n.editor)},icon:C.copyIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Copy")})}e.addCopyCommand=y;function E(e,t,n,o){e.addCommand(v.paste,{execute:async()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;const a=window.navigator.clipboard;const r=await a.readText();if(r){o.replaceSelection&&o.replaceSelection(r)}},isEnabled:()=>{var e;return Boolean(o()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},icon:C.pasteIcon.bindprops({stylesheet:"menuItem"}),label:n.__("Paste")})}e.addPasteCommand=E;function W(e,t,n,o){e.addCommand(v.selectAll,{execute:()=>{var e;const n=(e=t.currentWidget)===null||e===void 0?void 0:e.content;if(!n){return}const o=n.editor;o.execCommand("selectAll")},isEnabled:()=>{var e;return Boolean(o()&&((e=t.currentWidget)===null||e===void 0?void 0:e.content))},label:n.__("Select All")})}e.addSelectAllCommand=W;function F(e){const t=e.getSelection();const{start:n,end:o}=t;const a=n.column!==o.column||n.line!==o.line;return a}function N(e){const t=e.getSelection();const n=e.getOffsetAt(t.start);const o=e.getOffsetAt(t.end);const a=e.model.value.text.substring(n,o);return a}function B(e,t,n="txt"){return e.execute("docmanager:new-untitled",{path:t,type:"file",ext:n}).then((t=>e.execute("docmanager:open",{path:t.path,factory:b})))}function P(e,t,n){e.addCommand(v.createNew,{label:e=>e["isPalette"]?n.__("New Text File"):n.__("Text File"),caption:n.__("Create a new text file"),icon:e=>e["isPalette"]?undefined:C.textEditorIcon,execute:n=>{const o=n["cwd"]||t.defaultBrowser.model.path;return B(e,o)}})}e.addCreateNewCommand=P;function A(e,t,n){e.addCommand(v.createNewMarkdown,{label:e=>e["isPalette"]?n.__("New Markdown File"):n.__("Markdown File"),caption:n.__("Create a new markdown file"),icon:e=>e["isPalette"]?undefined:C.markdownIcon,execute:n=>{const o=n["cwd"]||t.defaultBrowser.model.path;return B(e,o,"md")}})}e.addCreateNewMarkdownCommand=A;function z(e,t){j(e,t);O(e,t)}e.addLauncherItems=z;function j(e,t){e.add({command:v.createNew,category:t.__("Other"),rank:1})}e.addCreateNewToLauncher=j;function O(e,t){e.add({command:v.createNewMarkdown,category:t.__("Other"),rank:2})}e.addCreateNewMarkdownToLauncher=O;function R(e,t){L(e,t);$(e,t);V(e,t);D(e,t)}e.addPaletteItems=R;function L(e,t){const n=t.__("Text Editor");const o={insertSpaces:false,size:4,name:t.__("Indent with Tab")};const a="fileeditor:change-tabs";e.addItem({command:a,args:o,category:n});for(const r of[1,2,4,8]){const o={insertSpaces:true,size:r,name:t._n("Spaces: %1","Spaces: %1",r)};e.addItem({command:a,args:o,category:n})}}e.addChangeTabsCommandsToPalette=L;function $(e,t){const n=t.__("Text Editor");e.addItem({command:v.createNew,args:{isPalette:true},category:n})}e.addCreateNewCommandToPalette=$;function V(e,t){const n=t.__("Text Editor");e.addItem({command:v.createNewMarkdown,args:{isPalette:true},category:n})}e.addCreateNewMarkdownCommandToPalette=V;function D(e,t){const n=t.__("Text Editor");const o=v.changeFontSize;let a={name:t.__("Increase Font Size"),delta:1};e.addItem({command:o,args:a,category:n});a={name:t.__("Decrease Font Size"),delta:-1};e.addItem({command:o,args:a,category:n})}e.addChangeFontSizeCommandsToPalette=D;function U(e,t,n,o,a,r){G(e,t,o);q(e);K(e);H(e,n);J(e,n,o);Q(e,t,n,o);if(a){X(e,t,n,a,o,r)}}e.addMenuItems=U;function G(e,t,n){const o=new g.Menu({commands:t});o.title.label=n.__("Text Editor Indentation");const a={insertSpaces:false,size:4,name:n.__("Indent with Tab")};const r="fileeditor:change-tabs";o.addItem({command:r,args:a});for(const d of[1,2,4,8]){const e={insertSpaces:true,size:d,name:n._n("Spaces: %1","Spaces: %1",d)};o.addItem({command:r,args:e})}e.settingsMenu.addGroup([{command:v.changeFontSize,args:{name:n.__("Increase Text Editor Font Size"),delta:+1}},{command:v.changeFontSize,args:{name:n.__("Decrease Text Editor Font Size"),delta:-1}},{type:"submenu",submenu:o},{command:v.autoClosingBrackets}],30)}e.addEditingCommandsToSettingsMenu=G;function q(e){e.fileMenu.newMenu.addGroup([{command:v.createNew}],30)}e.addCreateNewFileToFileMenu=q;function K(e){e.fileMenu.newMenu.addGroup([{command:v.createNewMarkdown}],30)}e.addCreateNewMarkdownFileToFileMenu=K;function H(e,t){e.editMenu.undoers.add({tracker:t,undo:e=>{e.content.editor.undo()},redo:e=>{e.content.editor.redo()}})}e.addUndoRedoToEditMenu=H;function J(e,t,n){e.viewMenu.editorViewers.add({tracker:t,toggleLineNumbers:e=>{const t=!e.content.editor.getOption("lineNumbers");e.content.editor.setOption("lineNumbers",t)},toggleWordWrap:e=>{const t=e.content.editor.getOption("lineWrap");const n=t==="off"?"on":"off";e.content.editor.setOption("lineWrap",n)},toggleMatchBrackets:e=>{const t=!e.content.editor.getOption("matchBrackets");e.content.editor.setOption("matchBrackets",t)},lineNumbersToggled:e=>e.content.editor.getOption("lineNumbers"),wordWrapToggled:e=>e.content.editor.getOption("lineWrap")!=="off",matchBracketsToggled:e=>e.content.editor.getOption("matchBrackets")})}e.addEditorViewerToViewMenu=J;function Q(e,n,o,a){const r=t(n);e.fileMenu.consoleCreators.add({tracker:o,createConsoleLabel:e=>a.__("Editor"),createConsole:r})}e.addConsoleCreatorToFileMenu=Q;function X(e,t,n,o,r,d){e.runMenu.codeRunners.add({tracker:n,runLabel:e=>r.__("Run Code"),runAllLabel:e=>r.__("Run All Code"),restartAndRunAllLabel:e=>r.__("Restart Kernel and Run All Code"),isEnabled:e=>!!o.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path})),run:()=>t.execute(v.runCode),runAll:()=>t.execute(v.runAllCode),restartAndRunAll:e=>{const n=o.find((t=>{var n;return((n=t.sessionContext.session)===null||n===void 0?void 0:n.path)===e.context.path}));if(n){return(d||a.sessionContextDialogs).restart(n.sessionContext).then((e=>{if(e){void t.execute(v.runAllCode)}return e}))}}})}e.addCodeRunnersToRunMenu=X;function Y(e){Z(e);ee(e);te(e);ne(e);oe(e);ae(e);re(e);de(e)}e.addContextMenuItems=Y;function Z(e){e.contextMenu.addItem({command:v.createConsole,selector:".jp-FileEditor"})}e.addCreateConsoleToContextMenu=Z;function ee(e){e.contextMenu.addItem({command:v.markdownPreview,selector:".jp-FileEditor"})}e.addMarkdownPreviewToContextMenu=ee;function te(e){e.contextMenu.addItem({command:v.undo,selector:".jp-FileEditor",rank:1})}e.addUndoCommandToContextMenu=te;function ne(e){e.contextMenu.addItem({command:v.redo,selector:".jp-FileEditor",rank:2})}e.addRedoCommandToContextMenu=ne;function oe(e){e.contextMenu.addItem({command:v.cut,selector:".jp-FileEditor",rank:3})}e.addCutCommandToContextMenu=oe;function ae(e){e.contextMenu.addItem({command:v.copy,selector:".jp-FileEditor",rank:4})}e.addCopyCommandToContextMenu=ae;function re(e){e.contextMenu.addItem({command:v.paste,selector:".jp-FileEditor",rank:5})}e.addPasteCommandToContextMenu=re;function de(e){e.contextMenu.addItem({command:v.selectAll,selector:".jp-FileEditor",rank:6})}e.addSelectAllCommandToContextMenu=de})(x||(x={}));const w={activate:S,id:"@jupyterlab/fileeditor-extension:plugin",requires:[r.IEditorServices,i.IFileBrowserFactory,u.ISettingRegistry,f.ITranslator],optional:[d.IConsoleTracker,a.ICommandPalette,s.ILauncher,l.IMainMenu,o.ILayoutRestorer,a.ISessionContextDialogs],provides:c.IEditorTracker,autoStart:true};const k={id:"@jupyterlab/fileeditor-extension:tab-space-status",autoStart:true,requires:[c.IEditorTracker,u.ISettingRegistry,f.ITranslator],optional:[m.IStatusBar],activate:(e,t,n,o,a)=>{const d=o.load("jupyterlab");if(!a){return}const i=new g.Menu({commands:e.commands});const s="fileeditor:change-tabs";const{shell:l}=e;const u={insertSpaces:false,size:4,name:d.__("Indent with Tab")};i.addItem({command:s,args:u});for(const r of[1,2,4,8]){const e={insertSpaces:true,size:r,name:d._n("Spaces: %1","Spaces: %1",r)};i.addItem({command:s,args:e})}const m=new c.TabSpaceStatus({menu:i,translator:o});const f=e=>{m.model.config=Object.assign(Object.assign({},r.CodeEditor.defaultConfig),e.get("editorConfig").composite)};void Promise.all([n.load("@jupyterlab/fileeditor-extension:plugin"),e.restored]).then((([e])=>{f(e);e.changed.connect(f)}));a.registerStatusItem("@jupyterlab/fileeditor-extension:tab-space-status",{item:m,align:"right",rank:1,isActive:()=>!!l.currentWidget&&t.has(l.currentWidget)})}};const _=[w,k];const M=_;function S(e,t,n,o,r,d,i,s,l,u,m){const f=w.id;const g=r.load("jupyterlab");const p="editor";const C=new c.FileEditorFactory({editorServices:t,factoryOptions:{name:b,fileTypes:["markdown","*"],defaultFor:["markdown","*"]}});const{commands:v,restored:h,shell:k}=e;const _=new a.WidgetTracker({namespace:p});const M=()=>_.currentWidget!==null&&_.currentWidget===k.currentWidget;if(u){void u.restore(_,{command:"docmanager:open",args:e=>({path:e.context.path,factory:b}),name:e=>e.context.path})}Promise.all([o.load(f),h]).then((([e])=>{x.updateSettings(e,v);x.updateTracker(_);e.changed.connect((()=>{x.updateSettings(e,v);x.updateTracker(_)}))})).catch((e=>{console.error(e.message);x.updateTracker(_)}));C.widgetCreated.connect(((e,t)=>{t.context.pathChanged.connect((()=>{void _.save(t)}));void _.add(t);x.updateWidget(t.content)}));e.docRegistry.addWidgetFactory(C);_.widgetAdded.connect(((e,t)=>{x.updateWidget(t.content)}));x.addCommands(v,o,g,f,M,_,n);if(s){x.addLauncherItems(s,g)}if(i){x.addPaletteItems(i,g)}if(l){x.addMenuItems(l,v,_,g,d,m)}x.addContextMenuItems(e);return _}}}]);