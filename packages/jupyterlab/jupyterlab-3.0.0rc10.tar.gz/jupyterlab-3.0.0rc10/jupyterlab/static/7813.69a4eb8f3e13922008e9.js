(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[7813],{37813:(e,t,s)=>{"use strict";s.r(t);s.d(t,{Debugger:()=>Se,IDebugger:()=>Ee,IDebuggerConfig:()=>Me,IDebuggerSidebar:()=>Ie,IDebuggerSources:()=>xe});var i=s(29103);var n=s(66995);var r=s(63117);const o="jp-DebuggerEditor-highlight";const a=1e3;class d{constructor(e){var t,s,i,r;this._onGutterClick=(e,t)=>{var s,i,n;const r=e.lineInfo(t);if(!r||this._id!==((i=(s=this._debuggerService.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.id)){return}const o=!!r.gutterMarkers;let a=this._getBreakpoints();if(o){a=a.filter((e=>e.line!==r.line+1))}else{a.push(l.createBreakpoint((n=this._path)!==null&&n!==void 0?n:this._debuggerService.session.connection.name,r.line+1))}void this._debuggerService.updateBreakpoints(this._editor.model.value.text,a,this._path)};this._id=(i=(s=(t=e.debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.id)!==null&&i!==void 0?i:"";this._path=(r=e.path)!==null&&r!==void 0?r:"";this._debuggerService=e.debuggerService;this._editor=e.editor;this._editorMonitor=new n.ActivityMonitor({signal:this._editor.model.value.changed,timeout:a});this._editorMonitor.activityStopped.connect((()=>{this._sendEditorBreakpoints()}),this);this._debuggerService.model.breakpoints.changed.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.breakpoints.restored.connect((async()=>{if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor()}));this._debuggerService.model.callstack.currentFrameChanged.connect((()=>{d.clearHighlight(this._editor)}));this._setupEditor()}dispose(){if(this.isDisposed){return}this._editorMonitor.dispose();this._clearEditor();this.isDisposed=true;r.Signal.clearData(this)}_setupEditor(){if(!this._editor||this._editor.isDisposed){return}this._addBreakpointsToEditor();const e=this._editor;e.setOption("lineNumbers",true);e.editor.setOption("gutters",["CodeMirror-linenumbers","breakpoints"]);e.editor.on("gutterClick",this._onGutterClick)}_clearEditor(){if(!this._editor||this._editor.isDisposed){return}const e=this._editor;d.clearHighlight(e);d.clearGutter(e);e.setOption("lineNumbers",false);e.editor.setOption("gutters",[]);e.editor.off("gutterClick",this._onGutterClick)}_sendEditorBreakpoints(){if(this._editor.isDisposed){return}const e=this._getBreakpointsFromEditor().map((e=>{var t,s;return l.createBreakpoint(((s=(t=this._debuggerService.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.name)||"",e.line+1)}));void this._debuggerService.updateBreakpoints(this._editor.model.value.text,e,this._path)}_addBreakpointsToEditor(){var e,t;const s=this._editor;const i=this._getBreakpoints();if(this._id!==((t=(e=this._debuggerService.session)===null||e===void 0?void 0:e.connection)===null||t===void 0?void 0:t.id)){return}d.clearGutter(s);i.forEach((e=>{if(typeof e.line==="number"){s.editor.setGutterMarker(e.line-1,"breakpoints",l.createMarkerNode())}}))}_getBreakpointsFromEditor(){const e=this._editor;let t=[];for(let s=0;s<e.doc.lineCount();s++){const i=e.editor.lineInfo(s);if(i.gutterMarkers){t.push(i)}}return t}_getBreakpoints(){const e=this._editor.model.value.text;return this._debuggerService.model.breakpoints.getBreakpoints(this._path||this._debuggerService.getCodeId(e))}}(function(e){function t(e,t){s(e);const i=e;i.editor.addLineClass(t-1,"wrap",o)}e.showCurrentLine=t;function s(e){if(!e||e.isDisposed){return}const t=e;t.doc.eachLine((e=>{t.editor.removeLineClass(e,"wrap",o)}))}e.clearHighlight=s;function i(e){if(!e){return}const t=e;t.doc.eachLine((e=>{if(e.gutterMarkers){t.editor.setGutterMarker(e,"breakpoints",null)}}))}e.clearGutter=i})(d||(d={}));var l;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerEditor-marker";e.innerHTML="●";return e}e.createMarkerNode=t;function s(e,t){return{line:t,verified:true,source:{name:e}}}e.createBreakpoint=s})(l||(l={}));const c=1540483477;const h=new TextEncoder;function u(e,t){const s=h.encode(e);let i=s.length;let n=t^i;let r=0;while(i>=4){let e=s[r]&255|(s[++r]&255)<<8|(s[++r]&255)<<16|(s[++r]&255)<<24;e=(e&65535)*c+(((e>>>16)*c&65535)<<16);e^=e>>>24;e=(e&65535)*c+(((e>>>16)*c&65535)<<16);n=(n&65535)*c+(((n>>>16)*c&65535)<<16)^e;i-=4;++r}switch(i){case 3:n^=(s[r+2]&255)<<16;case 2:n^=(s[r+1]&255)<<8;case 1:n^=s[r]&255;n=(n&65535)*c+(((n>>>16)*c&65535)<<16)}n^=n>>>13;n=(n&65535)*c+(((n>>>16)*c&65535)<<16);n^=n>>>15;return n>>>0}class g{constructor(){this._fileParams=new Map;this._hashMethods=new Map}getCodeId(e,t){const s=this._fileParams.get(t);if(!s){throw new Error(`Kernel (${t}) has no tmp file params.`)}const i=this._hashMethods.get(t);if(!i){throw new Error(`Kernel (${t}) has no hashing params.`)}const{prefix:n,suffix:r}=s;return`${n}${i(e)}${r}`}setHashParams(e){const{kernel:t,method:s,seed:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}switch(s){case"Murmur2":this._hashMethods.set(t,(e=>u(e,i).toString()));break;default:throw new Error(`Hash method (${s}) is not supported.`)}}setTmpFileParams(e){const{kernel:t,prefix:s,suffix:i}=e;if(!t){throw new TypeError(`Kernel name is not defined.`)}this._fileParams.set(t,{kernel:t,prefix:s,suffix:i})}}var p=s(53703);class _{constructor(e){this._services=e.editorServices}createNewEditor(e){const{content:t,mimeType:s,path:i}=e;const n=this._services.factoryService.newInlineEditor;const r=this._services.mimeTypeService;const o=new p.CodeEditorWrapper({model:new p.CodeEditor.Model({value:t,mimeType:s||r.getMimeTypeByFilePath(i)}),factory:n,config:{readOnly:true,lineNumbers:true}});o.node.setAttribute("data-jp-debugger","true");return o}}var v=s(90265);var m=s(21157);var b=s(58578);var f=s(54870);var w=s(93269);class C{constructor(e){this._debuggerService=e.debuggerService;this._consolePanel=e.widget;this._cellMap=new f.ObservableMap;const t=this._consolePanel.console;if(t.promptCell){this._addEditorHandler(t.promptCell)}t.promptCellCreated.connect(((e,t)=>{this._addEditorHandler(t)}));const s=()=>{(0,w.each)(t.cells,(e=>this._addEditorHandler(e)))};s();this._consolePanel.console.cells.changed.connect(s)}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();r.Signal.clearData(this)}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new d({debuggerService:this._debuggerService,editor:s.editor});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(t,i)}}class k{constructor(e){this._debuggerService=e.debuggerService;this._fileEditor=e.widget.content;this._editorHandler=new d({debuggerService:this._debuggerService,editor:this._fileEditor.editor})}dispose(){var e;if(this.isDisposed){return}this.isDisposed=true;(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();r.Signal.clearData(this)}}class y{constructor(e){var t;this._debuggerService=e.debuggerService;this._notebookPanel=e.widget;this._cellMap=new f.ObservableMap;const s=this._notebookPanel.content;s.activeCellChanged.connect(this._onActiveCellChanged,this);(t=s.model)===null||t===void 0?void 0:t.cells.changed.connect(this._onCellsChanged,this);this._onCellsChanged()}dispose(){if(this.isDisposed){return}this.isDisposed=true;this._cellMap.values().forEach((e=>e.dispose()));this._cellMap.dispose();r.Signal.clearData(this)}_onCellsChanged(){this._notebookPanel.content.widgets.forEach((e=>this._addEditorHandler(e)))}_addEditorHandler(e){const t=e.model.id;if(e.model.type!=="code"||this._cellMap.has(t)){return}const s=e;const i=new d({debuggerService:this._debuggerService,editor:s.editor});s.disposed.connect((()=>{this._cellMap.delete(t);i.dispose()}));this._cellMap.set(e.model.id,i)}_onActiveCellChanged(e,t){if(this._notebookPanel.content!==e){return}this._addEditorHandler(t)}}function S(e,t,s){s=s||m.nullTranslator;const n=s.load("jupyterlab");const r=new v.ToolbarButton({className:"jp-DebuggerBugButton",icon:i.bugIcon,tooltip:n.__("Enable / Disable Debugger"),onClick:t});e.toolbar.addItem("debugger-icon",r);const o=new v.ToolbarButton({iconClass:"jp-ToggleSwitch",tooltip:n.__("Enable / Disable Debugger"),onClick:t});e.toolbar.addItem("debugger-button",o);const a=new b.DisposableSet;a.add(r);a.add(o);return a}class E{constructor(e){this._handlers={};this._contextKernelChangedHandlers={};this._kernelChangedHandlers={};this._statusChangedHandlers={};this._buttons={};this._type=e.type;this._shell=e.shell;this._service=e.service}async update(e,t){if(!t){delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];return this._update(e,t)}const s=()=>{void this._update(e,t)};const i=this._kernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._kernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);const n=(s,i)=>{if(i.endsWith("restarting")){void this._update(e,t)}};const r=this._statusChangedHandlers[e.id];if(r){t.statusChanged.disconnect(r)}t.statusChanged.connect(n);this._statusChangedHandlers[e.id]=n;return this._update(e,t)}async updateContext(e,t){const s=()=>{const{session:s}=t;void this.update(e,s)};const i=this._contextKernelChangedHandlers[e.id];if(i){t.kernelChanged.disconnect(i)}this._contextKernelChangedHandlers[e.id]=s;t.kernelChanged.connect(s);return this.update(e,t.session)}async _update(e,t){var s,i;if(!this._service.model||!t){return}const n=()=>this._shell.currentWidget===e;const r=()=>{if(!this._handlers[e.id]){e.node.removeAttribute("data-jp-debugger");return}e.node.setAttribute("data-jp-debugger","true")};const o=()=>{if(this._handlers[e.id]){return}switch(this._type){case"notebook":this._handlers[e.id]=new y({debuggerService:this._service,widget:e});break;case"console":this._handlers[e.id]=new C({debuggerService:this._service,widget:e});break;case"file":this._handlers[e.id]=new k({debuggerService:this._service,widget:e});break;default:throw Error(`No handler for the type ${this._type}`)}r()};const a=()=>{var s,i,n,o;const a=this._handlers[e.id];if(!a){return}a.dispose();delete this._handlers[e.id];delete this._kernelChangedHandlers[e.id];delete this._statusChangedHandlers[e.id];delete this._contextKernelChangedHandlers[e.id];if(((i=(s=this._service.session)===null||s===void 0?void 0:s.connection)===null||i===void 0?void 0:i.path)===(t===null||t===void 0?void 0:t.path)||!((o=(n=this._service.session)===null||n===void 0?void 0:n.connection)===null||o===void 0?void 0:o.kernel)){const e=this._service.model;e.clear()}r()};const d=()=>{const t=this._buttons[e.id];if(t){return}const s=S(e,c);this._buttons[e.id]=s};const l=()=>{const t=this._buttons[e.id];if(!t){return}t.dispose();delete this._buttons[e.id]};const c=async()=>{var e;if(!n()){return}if(this._service.isStarted&&((e=this._previousConnection)===null||e===void 0?void 0:e.id)===(t===null||t===void 0?void 0:t.id)){this._service.session.connection=t;await this._service.stop();a()}else{this._service.session.connection=t;this._previousConnection=t;await this._service.restoreState(true);o()}};const h=await this._service.isAvailable(t);if(!h){a();l();return}if(!this._service.session){this._service.session=new Se.Session({connection:t})}else{this._previousConnection=((s=this._service.session.connection)===null||s===void 0?void 0:s.kernel)?this._service.session.connection:null;this._service.session.connection=t}d();await this._service.restoreState(false);if(!this._service.isStarted){a();this._service.session.connection=(i=this._previousConnection)!==null&&i!==void 0?i:t;await this._service.restoreState(false);return}o();this._previousConnection=t;e.disposed.connect(a)}}const M='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <g class="jp-icon3" fill="#616161">\n    <path d="M16.4805 17.2481C16.8158 16.3972 17 15.4701 17 14.5C17 10.3579 13.6421 7.00001 9.5 7.00001C8.36314 7.00001 7.28536 7.25295 6.31986 7.70564C7.60064 6.0592 9.60074 5 11.8482 5C15.7142 5 18.8482 8.13401 18.8482 12C18.8482 14.0897 17.9325 15.9655 16.4805 17.2481Z" />\n    <path d="M19.1607 14.2481C19.496 13.3971 19.6801 12.4701 19.6801 11.5C19.6801 7.35786 16.3223 4 12.1801 4C11.0433 4 9.9655 4.25295 9.00001 4.70563C10.2808 3.05919 12.2809 2 14.5284 2C18.3944 2 21.5284 5.134 21.5284 9C21.5284 11.0897 20.6127 12.9655 19.1607 14.2481Z" />\n    <path d="M16 15C16 18.866 12.866 22 9 22C5.13401 22 2 18.866 2 15C2 11.134 5.13401 8 9 8C12.866 8 16 11.134 16 15ZM11.7914 11L13 12.2086L10.2086 15L13 17.7914L11.7914 19L9 16.2086L6.20857 19L5 17.7914L7.79143 15L5 12.2086L6.20857 11L9 13.7914L11.7914 11Z" />\n    </g>\n</svg>\n';const x='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 9.53198H8.54198L12.447 5.62698L11.386 4.56698L8.74898 7.17698L8.74898 0.999985H7.99998H7.25098L7.25098 7.17698L4.61398 4.56698L3.55298 5.62698L7.45798 9.53198H7.99998ZM9.95598 13.013C9.95598 14.1175 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1175 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const I='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M7.99998 1H7.45798L3.55298 4.905L4.61398 5.965L7.25098 3.355V9.532H7.99998H8.74898V3.355L11.386 5.965L12.447 4.905L8.54198 1H7.99998ZM9.95598 13.013C9.95598 14.1176 9.06055 15.013 7.95598 15.013C6.85141 15.013 5.95598 14.1176 5.95598 13.013C5.95598 11.9084 6.85141 11.013 7.95598 11.013C9.06055 11.013 9.95598 11.9084 9.95598 13.013Z"/>\n\t</g>\n</svg>\n';const D='<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n\t<g class="jp-icon3" fill="#616161">\n\t\t<path d="M14.25 5.75V1.75H12.75V4.2916C11.605 2.93303 9.83899 2.08334 7.90914 2.08334C4.73316 2.08334 1.98941 4.39036 1.75072 7.48075L1.72992 7.75H3.231L3.25287 7.5241C3.46541 5.32932 5.45509 3.58334 7.90914 3.58334C9.6452 3.58334 11.1528 4.45925 11.9587 5.75H9.12986V7.25H13.292L14.2535 6.27493V5.75H14.25ZM7.99997 14C9.10454 14 9.99997 13.1046 9.99997 12C9.99997 10.8954 9.10454 10 7.99997 10C6.8954 10 5.99997 10.8954 5.99997 12C5.99997 13.1046 6.8954 14 7.99997 14Z"/>\n\t</g>\n</svg>\n';const T='<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 4L1 4.5V12.5L1.5 13H4V12H2V5H4V4H1.5ZM14.5 13L15 12.5L15 4.5L14.5 4H12V5L14 5L14 12H12V13H14.5ZM8.79693 5L4.29693 7L4 7.45691V9.95691L4.24275 10.3857L6.74275 11.8857L7.20307 11.9138L11.7031 9.91381L12 9.45691V6.95691L11.7572 6.52816L9.25725 5.02816L8.79693 5ZM5 8.34V9.67381L6.5 10.5738V9.24L5 8.34ZM7.5 9.28184V10.6875L11 9.13197V7.72629L7.5 9.28184ZM10.4178 6.89071L8.96559 6.01936L5.58216 7.52311L7.03441 8.39445L10.4178 6.89071Z" fill="#007ACC"/>\n</svg>\n';const B='<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g class="jp-icon3" fill="#616161">\n        <path d="M5 2H15L20 7V20C20 20.5304 19.7893 21.0391 19.4142 21.4142C19.0391 21.7893 18.5304 22 18 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V14H4V16L8 13L4 10V12H3V4C3 3.46957 3.21071 2.96086 3.58579 2.58579C3.96086 2.21071 4.46957 2 5 2ZM12 18H16V16H12V18ZM12 14H18V12H12V14ZM12 10H18V8H12V10ZM10 14C10.5523 14 11 13.5523 11 13C11 12.4477 10.5523 12 10 12C9.44771 12 9 12.4477 9 13C9 13.5523 9.44771 14 10 14Z"/>\n        <path d="M3 12V14H1V13V12H3Z"/>\n    </g>\n</svg>\n';const H=new i.LabIcon({name:"debugger:close-all",svgstr:M});const L=new i.LabIcon({name:"debugger:step-into",svgstr:x});const j=new i.LabIcon({name:"debugger:step-over",svgstr:D});const R=new i.LabIcon({name:"debugger:step-out",svgstr:I});const V=new i.LabIcon({name:"debugger:variable",svgstr:T});const W=new i.LabIcon({name:"debugger:view-breakpoint",svgstr:B});class F{constructor(){this._breakpoints=new Map;this._changed=new r.Signal(this);this._restored=new r.Signal(this);this._clicked=new r.Signal(this)}get changed(){return this._changed}get restored(){return this._restored}get clicked(){return this._clicked}get breakpoints(){return this._breakpoints}setBreakpoints(e,t){this._breakpoints.set(e,t);this._changed.emit(t)}getBreakpoints(e){var t;return(t=this._breakpoints.get(e))!==null&&t!==void 0?t:[]}restoreBreakpoints(e){this._breakpoints=e;this._restored.emit()}}class N{constructor(){this._state=[];this._framesChanged=new r.Signal(this);this._currentFrameChanged=new r.Signal(this)}get frames(){return this._state}set frames(e){this._state=e;const t=e.find((e=>P.getFrameId(e)===P.getFrameId(this.frame)));if(!t){this.frame=e[0]}this._framesChanged.emit(e)}get frame(){return this._currentFrame}set frame(e){this._currentFrame=e;this._currentFrameChanged.emit(e)}get framesChanged(){return this._framesChanged}get currentFrameChanged(){return this._currentFrameChanged}}var P;(function(e){function t(e){var t;return`${(t=e===null||e===void 0?void 0:e.source)===null||t===void 0?void 0:t.path}-${e===null||e===void 0?void 0:e.id}`}e.getFrameId=t})(P||(P={}));class q{constructor(e){this._currentSourceOpened=new r.Signal(this);this._currentSourceChanged=new r.Signal(this);this.currentFrameChanged=e.currentFrameChanged}get currentSourceOpened(){return this._currentSourceOpened}get currentSourceChanged(){return this._currentSourceChanged}get currentSource(){return this._currentSource}set currentSource(e){this._currentSource=e;this._currentSourceChanged.emit(e)}open(){this._currentSourceOpened.emit(this._currentSource)}}class O{constructor(){this._state=[];this._variableExpanded=new r.Signal(this);this._changed=new r.Signal(this)}get scopes(){return this._state}set scopes(e){this._state=e;this._changed.emit()}get changed(){return this._changed}get variableExpanded(){return this._variableExpanded}expandVariable(e){this._variableExpanded.emit(e)}}class A{constructor(){this._disposed=new r.Signal(this);this._isDisposed=false;this._stoppedThreads=new Set;this._title="-";this._titleChanged=new r.Signal(this);this.breakpoints=new F;this.callstack=new N;this.variables=new O;this.sources=new q({currentFrameChanged:this.callstack.currentFrameChanged})}get disposed(){return this._disposed}get isDisposed(){return this._isDisposed}get stoppedThreads(){return this._stoppedThreads}set stoppedThreads(e){this._stoppedThreads=e}get title(){return this._title}set title(e){if(e===this._title){return}this._title=e!==null&&e!==void 0?e:"-";this._titleChanged.emit(e)}get titleChanged(){return this._titleChanged}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit()}clear(){this._stoppedThreads.clear();const e=new Map;this.breakpoints.restoreBreakpoints(e);this.callstack.frames=[];this.variables.scopes=[];this.sources.currentSource=null;this.title="-"}}var Z=s(1258);var $=s(86992);class G extends $.Panel{constructor(e){super();const{model:t,commands:s,scopes:i,themeManager:n}=e;this._grid=new z({commands:s,themeManager:n});this._grid.addClass("jp-DebuggerVariables-grid");this._model=t;this._model.changed.connect((e=>{this._grid.dataModel.setData(e.scopes)}),this);this._grid.dataModel.setData(i!==null&&i!==void 0?i:[]);this.addWidget(this._grid);this.addClass("jp-DebuggerVariables-body")}set filter(e){this._grid.dataModel.filter=e;this._grid.dataModel.setData(this._model.scopes)}}class z extends $.Panel{constructor(e){super();const{commands:t,themeManager:s}=e;const i=new K;const n=new Z.DataGrid;const r=new U.MouseHandler;r.doubleClicked.connect(((e,s)=>t.execute(Se.CommandIDs.inspectVariable,{variableReference:i.getVariableReference(s.row),title:i.getVariableName(s.row)})));n.dataModel=i;n.keyHandler=new Z.BasicKeyHandler;n.mouseHandler=r;n.selectionModel=new Z.BasicSelectionModel({dataModel:i});n.stretchLastColumn=true;n.node.style.height="100%";this._grid=n;if(s){s.themeChanged.connect(this._updateStyles,this)}this.addWidget(n)}set filter(e){this._grid.dataModel.filter=e;this.update()}get dataModel(){return this._grid.dataModel}onAfterAttach(e){super.onAfterAttach(e);this._updateStyles()}_updateStyles(){const{style:e,textRenderer:t}=U.computeStyle();this._grid.cellRenderers.update({},t);this._grid.style=e}}class K extends Z.DataModel{constructor(){super(...arguments);this._filter=new Set;this._data={name:[],type:[],value:[],variablesReference:[]}}set filter(e){this._filter=e}rowCount(e){return e==="body"?this._data.name.length:1}columnCount(e){return e==="body"?2:1}data(e,t,s){if(e==="row-header"){return this._data.name[t]}if(e==="column-header"){return s===1?"Value":"Type"}if(e==="corner-header"){return"Name"}return s===1?this._data.value[t]:this._data.type[t]}getVariableReference(e){return this._data.variablesReference[e]}getVariableName(e){return this._data.name[e]}setData(e){this._clearData();this.emitChanged({type:"model-reset",region:"body"});e.forEach((e=>{const t=e.variables.filter((e=>e.evaluateName&&!this._filter.has(e.evaluateName)));t.forEach(((e,t)=>{this._data.name[t]=e.evaluateName;this._data.type[t]=e.type||"";this._data.value[t]=e.value;this._data.variablesReference[t]=e.variablesReference}));this.emitChanged({type:"rows-inserted",region:"body",index:1,span:t.length})}))}_clearData(){this._data={name:[],type:[],value:[],variablesReference:[]}}}var U;(function(e){function t(){const e=document.createElement("div");e.className="jp-DebuggerVariables-colorPalette";e.innerHTML=`\n      <div class="jp-mod-void"></div>\n      <div class="jp-mod-background"></div>\n      <div class="jp-mod-header-background"></div>\n      <div class="jp-mod-grid-line"></div>\n      <div class="jp-mod-header-grid-line"></div>\n      <div class="jp-mod-selection"></div>\n      <div class="jp-mod-text"></div>\n    `;return e}function s(){const e=t();document.body.appendChild(e);let s;s=e.querySelector(".jp-mod-void");const i=getComputedStyle(s).color;s=e.querySelector(".jp-mod-background");const n=getComputedStyle(s).color;s=e.querySelector(".jp-mod-header-background");const r=getComputedStyle(s).color;s=e.querySelector(".jp-mod-grid-line");const o=getComputedStyle(s).color;s=e.querySelector(".jp-mod-header-grid-line");const a=getComputedStyle(s).color;s=e.querySelector(".jp-mod-selection");const d=getComputedStyle(s).color;s=e.querySelector(".jp-mod-text");const l=getComputedStyle(s).color;document.body.removeChild(e);return{style:{voidColor:i,backgroundColor:n,headerBackgroundColor:r,gridLineColor:o,headerGridLineColor:a,rowBackgroundColor:e=>e%2===0?i:n,selectionFillColor:d},textRenderer:new Z.TextRenderer({font:"12px sans-serif",textColor:l,backgroundColor:"",verticalAlignment:"center",horizontalAlignment:"left"})}}e.computeStyle=s;class i extends Z.BasicMouseHandler{constructor(){super(...arguments);this._doubleClicked=new r.Signal(this)}get doubleClicked(){return this._doubleClicked}onMouseDoubleClick(e,t){const s=e.hitTest(t.clientX,t.clientY);this._doubleClicked.emit(s)}}e.MouseHandler=i})(U||(U={}));class J{constructor(e){var t,s;this._eventMessage=new r.Signal(this);this._isDisposed=false;this._sessionChanged=new r.Signal(this);this._config=e.config;this._session=null;this._specsManager=(t=e.specsManager)!==null&&t!==void 0?t:null;this._model=new Se.Model;this._debuggerSources=(s=e.debuggerSources)!==null&&s!==void 0?s:null}get eventMessage(){return this._eventMessage}get isDisposed(){return this._isDisposed}get isStarted(){var e,t;return(t=(e=this._session)===null||e===void 0?void 0:e.isStarted)!==null&&t!==void 0?t:false}get model(){return this._model}get session(){return this._session}set session(e){var t;if(this._session===e){return}if(this._session){this._session.dispose()}this._session=e;(t=this._session)===null||t===void 0?void 0:t.eventMessage.connect(((e,t)=>{if(t.event==="stopped"){this._model.stoppedThreads.add(t.body.threadId);void this._getAllFrames()}else if(t.event==="continued"){this._model.stoppedThreads.delete(t.body.threadId);this._clearModel();this._clearSignals()}this._eventMessage.emit(t)}));this._sessionChanged.emit(e)}get sessionChanged(){return this._sessionChanged}dispose(){if(this.isDisposed){return}this._isDisposed=true;r.Signal.clearData(this)}getCodeId(e){var t,s,i,n;try{return this._config.getCodeId(e,(n=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&n!==void 0?n:"")}catch(r){return""}}hasStoppedThreads(){var e,t;return(t=((e=this._model)===null||e===void 0?void 0:e.stoppedThreads.size)>0)!==null&&t!==void 0?t:false}async isAvailable(e){var t,s,i,n;if(!this._specsManager){return true}await this._specsManager.ready;const r=e===null||e===void 0?void 0:e.kernel;if(!r){return false}const o=r.name;if(!((t=this._specsManager.specs)===null||t===void 0?void 0:t.kernelspecs[o])){return true}return!!((n=(i=(s=this._specsManager.specs.kernelspecs[o])===null||s===void 0?void 0:s.metadata)===null||i===void 0?void 0:i["debugger"])!==null&&n!==void 0?n:false)}async clearBreakpoints(){var e;if(((e=this.session)===null||e===void 0?void 0:e.isStarted)!==true){return}this._model.breakpoints.breakpoints.forEach(((e,t,s)=>{void this._setBreakpoints([],t)}));let t=new Map;this._model.breakpoints.restoreBreakpoints(t)}async continue(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("continue",{threadId:this._currentThread()});this._model.stoppedThreads.delete(this._currentThread())}catch(e){console.error("Error:",e.message)}}async getSource(e){var t,s;if(!this.session){throw new Error("No active debugger session")}const i=await this.session.sendRequest("source",{source:e,sourceReference:(t=e.sourceReference)!==null&&t!==void 0?t:0});return Object.assign(Object.assign({},i.body),{path:(s=e.path)!==null&&s!==void 0?s:""})}async next(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("next",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async inspectVariable(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("variables",{variablesReference:e});return t.body.variables}async restart(){const{breakpoints:e}=this._model.breakpoints;await this.stop();await this.start();for(const[t,s]of e){await this._setBreakpoints(s.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e}))),t)}this._model.breakpoints.restoreBreakpoints(e)}async restoreState(e){var t,s,i,n,r,o,a,d,l,c;if(!this.model||!this.session){return}const h=await this.session.restoreState();const{body:u}=h;const g=this._mapBreakpoints(h.body.breakpoints);const p=new Set(h.body.stoppedThreads);this._config.setHashParams({kernel:(n=(i=(s=(t=this.session)===null||t===void 0?void 0:t.connection)===null||s===void 0?void 0:s.kernel)===null||i===void 0?void 0:i.name)!==null&&n!==void 0?n:"",method:u.hashMethod,seed:u.hashSeed});this._config.setTmpFileParams({kernel:(d=(a=(o=(r=this.session)===null||r===void 0?void 0:r.connection)===null||o===void 0?void 0:o.kernel)===null||a===void 0?void 0:a.name)!==null&&d!==void 0?d:"",prefix:u.tmpFilePrefix,suffix:u.tmpFileSuffix});this._model.stoppedThreads=p;if(!this.isStarted&&(e||p.size!==0)){await this.start()}if(this.isStarted||e){this._model.title=this.isStarted?((c=(l=this.session)===null||l===void 0?void 0:l.connection)===null||c===void 0?void 0:c.name)||"-":"-"}if(this._debuggerSources){const e=this._filterBreakpoints(g);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(g)}if(p.size!==0){await this._getAllFrames()}else if(this.isStarted){this._clearModel();this._clearSignals()}}start(){if(!this.session){throw new Error("No active debugger session")}return this.session.start()}async stepIn(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepIn",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stepOut(){try{if(!this.session){throw new Error("No active debugger session")}await this.session.sendRequest("stepOut",{threadId:this._currentThread()})}catch(e){console.error("Error:",e.message)}}async stop(){if(!this.session){throw new Error("No active debugger session")}await this.session.stop();if(this._model){this._model.clear()}}async updateBreakpoints(e,t,s){var i;if(!((i=this.session)===null||i===void 0?void 0:i.isStarted)){return}if(!s){s=(await this._dumpCell(e)).body.sourcePath}const n=await this.session.restoreState();const r=t.filter((({line:e})=>typeof e==="number")).map((({line:e})=>({line:e})));const o=this._mapBreakpoints(n.body.breakpoints);if(this._debuggerSources){const e=this._filterBreakpoints(o);this._model.breakpoints.restoreBreakpoints(e)}else{this._model.breakpoints.restoreBreakpoints(o)}const a=await this._setBreakpoints(r,s);const d=a.body.breakpoints.filter(((e,t,s)=>s.findIndex((t=>t.line===e.line))>-1));this._model.breakpoints.setBreakpoints(s,d);await this.session.sendRequest("configurationDone",{})}_clearModel(){this._model.callstack.frames=[];this._model.variables.scopes=[]}_clearSignals(){this._model.callstack.currentFrameChanged.disconnect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.disconnect(this._onVariableExpanded,this)}_convertScopes(e,t){if(!t||!e){return[]}return e.map((e=>({name:e.name,variables:t.map((e=>Object.assign({},e)))})))}_currentThread(){return 1}async _dumpCell(e){if(!this.session){throw new Error("No active debugger session")}return this.session.sendRequest("dumpCell",{code:e})}_filterBreakpoints(e){if(!this._debuggerSources){return e}let t=new Map;for(const s of e){const[e,i]=s;i.forEach((()=>{var s,n,r,o,a,d,l;this._debuggerSources.find({focus:false,kernel:(o=(r=(n=(s=this.session)===null||s===void 0?void 0:s.connection)===null||n===void 0?void 0:n.kernel)===null||r===void 0?void 0:r.name)!==null&&o!==void 0?o:"",path:(l=(d=(a=this._session)===null||a===void 0?void 0:a.connection)===null||d===void 0?void 0:d.path)!==null&&l!==void 0?l:"",source:e}).forEach((()=>{if(i.length>0){t.set(e,i)}}))}))}return t}async _getAllFrames(){this._model.callstack.currentFrameChanged.connect(this._onCurrentFrameChanged,this);this._model.variables.variableExpanded.connect(this._onVariableExpanded,this);const e=await this._getFrames(this._currentThread());this._model.callstack.frames=e}async _getFrames(e){if(!this.session){throw new Error("No active debugger session")}const t=await this.session.sendRequest("stackTrace",{threadId:e});const s=t.body.stackFrames;return s}async _getScopes(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("scopes",{frameId:e.id});return t.body.scopes}async _getVariables(e){if(!this.session){throw new Error("No active debugger session")}if(!e){return[]}const t=await this.session.sendRequest("variables",{variablesReference:e.variablesReference});return t.body.variables}_mapBreakpoints(e){if(!e.length){return new Map}return e.reduce(((e,t)=>{const{breakpoints:s,source:i}=t;e.set(i,s.map((e=>Object.assign(Object.assign({},e),{verified:true}))));return e}),new Map)}async _onCurrentFrameChanged(e,t){if(!t){return}const s=await this._getScopes(t);const i=await this._getVariables(s[0]);const n=this._convertScopes(s,i);this._model.variables.scopes=n}async _onVariableExpanded(e,t){if(!this.session){throw new Error("No active debugger session")}const s=await this.session.sendRequest("variables",{variablesReference:t.variablesReference});let i=Object.assign(Object.assign({},t),{expanded:true});s.body.variables.forEach((e=>{i=Object.assign({[e.name]:e},i)}));const n=this._model.variables.scopes.map((e=>{const s=e.variables.findIndex((e=>e.variablesReference===t.variablesReference));e.variables[s]=i;return Object.assign({},e)}));this._model.variables.scopes=[...n];return s.body.variables}async _setBreakpoints(e,t){if(!this.session){throw new Error("No active debugger session")}return await this.session.sendRequest("setBreakpoints",{breakpoints:e,source:{path:t},sourceModified:false})}}var X=s(52191);class Y{constructor(e){this._seq=0;this._ready=new X.PromiseDelegate;this._isDisposed=false;this._isStarted=false;this._disposed=new r.Signal(this);this._eventMessage=new r.Signal(this);this.connection=e.connection;this.translator=e.translator||m.nullTranslator}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get connection(){return this._connection}set connection(e){var t,s;if(this._connection){this._connection.iopubMessage.disconnect(this._handleEvent,this)}this._connection=e;if(!this._connection){this._isStarted=false;return}this._connection.iopubMessage.connect(this._handleEvent,this);this._ready=new X.PromiseDelegate;const i=(s=(t=this.connection)===null||t===void 0?void 0:t.kernel)===null||s===void 0?void 0:s.requestDebug({type:"request",seq:0,command:"debugInfo"});if(i){i.onReply=e=>{this._ready.resolve();i.dispose()}}}get isStarted(){return this._isStarted}get eventMessage(){return this._eventMessage}dispose(){if(this._isDisposed){return}this._isDisposed=true;this._disposed.emit();r.Signal.clearData(this)}async start(){var e,t,s;await this.sendRequest("initialize",{clientID:"jupyterlab",clientName:"JupyterLab",adapterID:(s=(t=(e=this.connection)===null||e===void 0?void 0:e.kernel)===null||t===void 0?void 0:t.name)!==null&&s!==void 0?s:"",pathFormat:"path",linesStartAt1:true,columnsStartAt1:true,supportsVariableType:true,supportsVariablePaging:true,supportsRunInTerminalRequest:true,locale:document.documentElement.lang});this._isStarted=true;await this.sendRequest("attach",{})}async stop(){await this.sendRequest("disconnect",{restart:false,terminateDebuggee:true});this._isStarted=false}async restoreState(){const e=await this.sendRequest("debugInfo",{});this._isStarted=e.body.isStarted;return e}async sendRequest(e,t){await this._ready.promise;const s=await this._sendDebugMessage({type:"request",seq:this._seq++,command:e,arguments:t});return s.content}_handleEvent(e,t){const s=t.header.msg_type;if(s!=="debug_event"){return}const i=t.content;this._eventMessage.emit(i)}async _sendDebugMessage(e){var t;const s=(t=this.connection)===null||t===void 0?void 0:t.kernel;if(!s){return Promise.reject(new Error("A kernel is required to send debug messages."))}const i=new X.PromiseDelegate;const n=s.requestDebug(e);n.onReply=e=>{i.resolve(e)};await n.done;return i.promise}}var Q=s(77865);var ee=s.n(Q);class te extends v.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerBreakpoints-body")}render(){return ee().createElement(se,{model:this._model})}}const se=({model:e})=>{const[t,s]=(0,Q.useState)(Array.from(e.breakpoints.entries()));(0,Q.useEffect)((()=>{const t=(t,i)=>{s(Array.from(e.breakpoints.entries()))};const i=t=>{s(Array.from(e.breakpoints.entries()))};e.changed.connect(t);e.restored.connect(i);return()=>{e.changed.disconnect(t);e.restored.disconnect(i)}}));return ee().createElement(ee().Fragment,null,t.map((t=>ee().createElement(ie,{key:t[0],breakpoints:t[1],model:e}))))};const ie=({breakpoints:e,model:t})=>ee().createElement(ee().Fragment,null,e.sort(((e,t)=>{var s,i;return((s=e.line)!==null&&s!==void 0?s:0)-((i=t.line)!==null&&i!==void 0?i:0)})).map(((e,s)=>{var i,n;return ee().createElement(ne,{key:((n=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&n!==void 0?n:"")+s,breakpoint:e,model:t})})));const ne=({breakpoint:e,model:t})=>{var s,i,n;const r=e=>e[0]==="/"?e.slice(1)+"/":e;return ee().createElement("div",{className:"jp-DebuggerBreakpoint",onClick:()=>t.clicked.emit(e),title:(s=e.source)===null||s===void 0?void 0:s.path},ee().createElement("span",{className:"jp-DebuggerBreakpoint-marker"},"●"),ee().createElement("span",{className:"jp-DebuggerBreakpoint-source jp-left-truncated"},r((n=(i=e.source)===null||i===void 0?void 0:i.path)!==null&&n!==void 0?n:"")),ee().createElement("span",{className:"jp-DebuggerBreakpoint-line"},e.line))};class re extends $.Widget{constructor(e){super({node:document.createElement("header")});this.toolbar=new v.Toolbar;e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new $.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Breakpoints");const i=new $.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}class oe extends $.Panel{constructor(e){super();this.clicked=new r.Signal(this);const{model:t,service:s}=e;const i=e.translator||m.nullTranslator;const n=i.load("jupyterlab");const o=new re(i);const a=new te(t);o.toolbar.addItem("closeAll",new v.ToolbarButton({icon:H,onClick:()=>{void s.clearBreakpoints()},tooltip:n.__("Remove All Breakpoints")}));this.addWidget(o);this.addWidget(a);this.addClass("jp-DebuggerBreakpoints")}}class ae extends v.ReactWidget{constructor(e){super();this._model=e;this.addClass("jp-DebuggerCallstack-body")}render(){return ee().createElement(de,{model:this._model})}}const de=({model:e})=>{const[t,s]=(0,Q.useState)(e.frames);const[i,n]=(0,Q.useState)(e.frame);const r=t=>{n(t);e.frame=t};(0,Q.useEffect)((()=>{const t=()=>{n(e.frame);s(e.frames)};e.framesChanged.connect(t);return()=>{e.framesChanged.disconnect(t)}}),[e]);return ee().createElement("ul",null,t.map((e=>{var t;return ee().createElement("li",{key:e.id,onClick:()=>r(e),className:(i===null||i===void 0?void 0:i.id)===e.id?"selected":""},e.name," at ",(t=e.source)===null||t===void 0?void 0:t.name,":",e.line)})))};class le extends $.Widget{constructor(e){super({node:document.createElement("header")});this.toolbar=new v.Toolbar;e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new $.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Callstack");const i=new $.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}class ce extends $.Panel{constructor(e){super();const{commands:t,model:s}=e;const i=e.translator||m.nullTranslator;const n=new le(i);const r=new ae(s);n.toolbar.addItem("continue",new v.CommandToolbarButton({commands:t.registry,id:t.continue}));n.toolbar.addItem("terminate",new v.CommandToolbarButton({commands:t.registry,id:t.terminate}));n.toolbar.addItem("step-over",new v.CommandToolbarButton({commands:t.registry,id:t.next}));n.toolbar.addItem("step-in",new v.CommandToolbarButton({commands:t.registry,id:t.stepIn}));n.toolbar.addItem("step-out",new v.CommandToolbarButton({commands:t.registry,id:t.stepOut}));this.addWidget(n);this.addWidget(r);this.addClass("jp-DebuggerCallstack")}}class he extends $.Widget{constructor(e){super();this._model=e.model;this._debuggerService=e.service;this._mimeTypeService=e.editorServices.mimeTypeService;const t=new Se.ReadOnlyEditorFactory({editorServices:e.editorServices});this._editor=t.createNewEditor({content:"",mimeType:"",path:""});this._editor.hide();this._model.currentFrameChanged.connect((async(e,t)=>{if(!t){this._clearEditor();return}void this._showSource(t)}));const s=new $.PanelLayout;s.addWidget(this._editor);this.layout=s;this.addClass("jp-DebuggerSources-body")}dispose(){var e;if(this.isDisposed){return}(e=this._editorHandler)===null||e===void 0?void 0:e.dispose();r.Signal.clearData(this);super.dispose()}_clearEditor(){this._model.currentSource=null;this._editor.hide()}async _showSource(e){var t;const s=(t=e.source)===null||t===void 0?void 0:t.path;const i=await this._debuggerService.getSource({sourceReference:0,path:s});if(!(i===null||i===void 0?void 0:i.content)){this._clearEditor();return}if(this._editorHandler){this._editorHandler.dispose()}const{content:n,mimeType:r}=i;const o=r||this._mimeTypeService.getMimeTypeByFilePath(s!==null&&s!==void 0?s:"");this._editor.model.value.text=n;this._editor.model.mimeType=o;this._editorHandler=new d({debuggerService:this._debuggerService,editor:this._editor.editor,path:s});this._model.currentSource={content:n,mimeType:o,path:s!==null&&s!==void 0?s:""};requestAnimationFrame((()=>{d.showCurrentLine(this._editor.editor,e.line)}));this._editor.show()}}class ue extends $.Widget{constructor(e,t){super({node:document.createElement("header")});this.toolbar=new v.Toolbar;t=t||m.nullTranslator;const s=t.load("jupyterlab");const i=new $.PanelLayout;this.layout=i;const n=new $.Widget({node:document.createElement("h2")});n.node.textContent=s.__("Source");const r=v.ReactWidget.create(ee().createElement(ge,{model:e}));i.addWidget(n);i.addWidget(this.toolbar);i.addWidget(r);this.addClass("jp-DebuggerSources-header")}}const ge=({model:e})=>ee().createElement(v.UseSignal,{signal:e.currentSourceChanged,initialSender:e},(e=>{var t,s;return ee().createElement("span",{onClick:()=>e===null||e===void 0?void 0:e.open()},(s=(t=e===null||e===void 0?void 0:e.currentSource)===null||t===void 0?void 0:t.path)!==null&&s!==void 0?s:"")}));class pe extends $.Panel{constructor(e){super();const{model:t,service:s,editorServices:i}=e;const n=e.translator||m.nullTranslator;const r=n.load("jupyterlab");const o=new ue(t,n);const a=new he({service:s,model:t,editorServices:i});o.toolbar.addItem("open",new v.ToolbarButton({icon:W,onClick:()=>t.open(),tooltip:r.__("Open in the Main Area")}));this.addWidget(o);this.addWidget(a)}}class _e extends $.Widget{constructor(e){super({node:document.createElement("header")});this.toolbar=new v.Toolbar;e=e||m.nullTranslator;const t=e.load("jupyterlab");const s=new $.Widget({node:document.createElement("h2")});s.node.textContent=t.__("Variables");const i=new $.PanelLayout;i.addWidget(s);i.addWidget(this.toolbar);this.layout=i}}class ve extends v.ReactWidget{constructor(e){super();this._scopes=[];this._filter=new Set;this._service=e.service;const t=e.model;t.changed.connect(this._updateScopes,this);this.addClass("jp-DebuggerVariables-body")}render(){return ee().createElement(ee().Fragment,null,this._scopes.map((e=>ee().createElement(me,{key:e.name,service:this._service,data:e.variables,filter:this._filter}))))}set filter(e){this._filter=e;this.update()}_updateScopes(e){if(w.ArrayExt.shallowEqual(this._scopes,e.scopes)){return}this._scopes=e.scopes;this.update()}}const me=({data:e,service:t,filter:s})=>{const[i,n]=(0,Q.useState)(e);(0,Q.useEffect)((()=>{n(e)}),[e]);return ee().createElement("ul",null,i===null||i===void 0?void 0:i.filter((e=>!(s||new Set).has(e.evaluateName||""))).map((e=>{const i=`${e.evaluateName}-${e.type}-${e.value}`;return ee().createElement(be,{key:i,data:e,service:t,filter:s})})))};const be=({data:e,service:t,filter:s})=>{const[n]=(0,Q.useState)(e);const[r,o]=(0,Q.useState)();const[a,d]=(0,Q.useState)();const l={color:"var(--jp-mirror-editor-attribute-color)"};const c={color:"var(--jp-mirror-editor-string-color)"};const h=n.variablesReference!==0||n.type==="function";const u=async e=>{if(!h){return}e.stopPropagation();const s=await t.inspectVariable(n.variablesReference);o(!r);d(s)};return ee().createElement("li",{onClick:e=>u(e)},ee().createElement(i.caretDownEmptyIcon.react,{visibility:h?"visible":"hidden",stylesheet:"menuItem",tag:"span",transform:r?"rotate(0deg)":"rotate(-90deg)"}),ee().createElement("span",{style:l},n.name),ee().createElement("span",null,": "),ee().createElement("span",{style:c},we(n)),r&&a&&ee().createElement(me,{key:n.name,data:a,service:t,filter:s}))};class fe extends $.Panel{constructor(e){super();const{model:t,service:s,commands:i,themeManager:n}=e;const r=e.translator||m.nullTranslator;const o=r.load("jupyterlab");this._header=new _e(r);this._tree=new ve({model:t,service:s});this._table=new G({model:t,commands:i,themeManager:n});this._table.hide();const a=()=>{if(this._table.isHidden){this._tree.hide();this._table.show();this.node.setAttribute("data-jp-table","true")}else{this._tree.show();this._table.hide();this.node.removeAttribute("data-jp-table")}this.update()};this._header.toolbar.addItem("view-VariableSwitch",new v.ToolbarButton({iconClass:"jp-ToggleSwitch",onClick:a,tooltip:o.__("Table / Tree View")}));this.addWidget(this._header);this.addWidget(this._tree);this.addWidget(this._table);this.addClass("jp-DebuggerVariables")}set filter(e){this._tree.filter=e;this._table.filter=e}onResize(e){super.onResize(e);this._resizeBody(e)}_resizeBody(e){const t=e.height-this._header.node.offsetHeight;this._tree.node.style.height=`${t}px`}}const we=e=>{const{type:t,value:s}=e;switch(t){case"int":return parseInt(s,10);case"float":return parseFloat(s);case"bool":return s;case"str":return s.slice(1,s.length-1);default:return t!==null&&t!==void 0?t:""}};class Ce extends $.Panel{constructor(e){super();this.id="jp-debugger-sidebar";this.title.icon=i.bugIcon;this.addClass("jp-DebuggerSidebar");const{callstackCommands:t,editorServices:s,service:n,themeManager:r}=e;const o=e.translator||m.nullTranslator;const a=n.model;this.variables=new fe({model:a.variables,commands:t.registry,service:n,themeManager:r,translator:o});this.callstack=new ce({commands:t,model:a.callstack,translator:o});this.breakpoints=new oe({service:n,model:a.breakpoints,translator:o});this.sources=new pe({model:a.sources,service:n,editorServices:s,translator:o});const d=new Ce.Header;this.addWidget(d);a.titleChanged.connect(((e,t)=>{d.title.label=t}));this._body=new $.SplitPanel;this._body.orientation="vertical";this._body.addClass("jp-DebuggerSidebar-body");this.addWidget(this._body);this.addItem(this.variables);this.addItem(this.callstack);this.addItem(this.breakpoints);this.addItem(this.sources)}addItem(e){this._body.addWidget(e)}insertItem(e,t){this._body.insertWidget(e,t)}get items(){return this._body.widgets}dispose(){if(this.isDisposed){return}super.dispose()}}(function(e){class t extends $.Widget{constructor(){super({node:ke.createHeader()});this.title.changed.connect((e=>{this.node.querySelector("h2").textContent=this.title.label}))}}e.Header=t})(Ce||(Ce={}));var ke;(function(e){function t(){const e=document.createElement("header");const t=document.createElement("h2");t.textContent="-";t.classList.add("jp-left-truncated");e.appendChild(t);return e}e.createHeader=t})(ke||(ke={}));class ye{constructor(e){var t,s,i;this._config=e.config;this._shell=e.shell;this._notebookTracker=(t=e.notebookTracker)!==null&&t!==void 0?t:null;this._consoleTracker=(s=e.consoleTracker)!==null&&s!==void 0?s:null;this._editorTracker=(i=e.editorTracker)!==null&&i!==void 0?i:null;this._readOnlyEditorTracker=new v.WidgetTracker({namespace:"@jupyterlab/debugger"})}find(e){return[...this._findInConsoles(e),...this._findInEditors(e),...this._findInNotebooks(e),...this._findInReadOnlyEditors(e)]}open(e){const{editorWrapper:t,label:s,caption:n}=e;const r=new v.MainAreaWidget({content:t});r.id=v.DOMUtils.createDomID();r.title.label=s;r.title.closable=true;r.title.caption=n;r.title.icon=i.textEditorIcon;this._shell.add(r,"main");void this._readOnlyEditorTracker.add(r)}_findInNotebooks(e){if(!this._notebookTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._notebookTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.content;if(t){a.mode="command"}const d=e.content.widgets;d.forEach(((i,o)=>{const d=i.model.value.text;const l=this._getCodeId(d,s);if(!l){return}if(n!==l){return}if(t){a.activeCellIndex=o;if(a.activeCell){const e=a.activeCell.inputArea.node;const t=e.getBoundingClientRect();a.scrollToPosition(t.bottom,45)}this._shell.activateById(e.id)}r.push(i.editor)}))}));return r}_findInConsoles(e){if(!this._consoleTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._consoleTracker.forEach((e=>{const o=e.sessionContext;if(i!==o.path){return}const a=e.console.cells;(0,w.each)(a,(i=>{const o=i.model.value.text;const a=this._getCodeId(o,s);if(!a){return}if(n!==a){return}r.push(i.editor);if(t){this._shell.activateById(e.id)}}))}));return r}_findInEditors(e){if(!this._editorTracker){return[]}const{focus:t,kernel:s,path:i,source:n}=e;const r=[];this._editorTracker.forEach((e=>{const o=e.content;if(i!==o.context.path){return}const a=o.editor;if(!a){return}const d=a.model.value.text;const l=this._getCodeId(d,s);if(!l){return}if(n!==l){return}r.push(a);if(t){this._shell.activateById(e.id)}}));return r}_findInReadOnlyEditors(e){const{focus:t,kernel:s,source:i}=e;const n=[];this._readOnlyEditorTracker.forEach((e=>{var r;const o=(r=e.content)===null||r===void 0?void 0:r.editor;if(!o){return}const a=o.model.value.text;const d=this._getCodeId(a,s);if(!d){return}if(e.title.caption!==i&&i!==d){return}n.push(o);if(t){this._shell.activateById(e.id)}}));return n}_getCodeId(e,t){try{return this._config.getCodeId(e,t)}catch(s){return""}}}var Se;(function(e){class t extends g{}e.Config=t;class s extends d{}e.EditorHandler=s;class n extends E{}e.Handler=n;class r extends A{}e.Model=r;class o extends _{}e.ReadOnlyEditorFactory=o;class a extends J{}e.Service=a;class l extends Y{}e.Session=l;class c extends Ce{}e.Sidebar=c;class h extends ye{}e.Sources=h;class u extends G{}e.VariablesGrid=u;let p;(function(e){e.debugContinue="debugger:continue";e.terminate="debugger:terminate";e.next="debugger:next";e.stepIn="debugger:stepIn";e.stepOut="debugger:stepOut";e.inspectVariable="debugger:inspect-variable"})(p=e.CommandIDs||(e.CommandIDs={}));let v;(function(e){e.closeAllIcon=H;e.continueIcon=i.runIcon;e.stepIntoIcon=L;e.stepOutIcon=R;e.stepOverIcon=j;e.terminateIcon=i.stopIcon;e.variableIcon=V;e.viewBreakpointIcon=W})(v=e.Icons||(e.Icons={}))})(Se||(Se={}));const Ee=new X.Token("@jupyterlab/debugger:IDebugger");const Me=new X.Token("@jupyterlab/debugger:IDebuggerConfig");const xe=new X.Token("@jupyterlab/debugger:IDebuggerSources");const Ie=new X.Token("@jupyterlab/debugger:IDebuggerSidebar")}}]);