(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[53],{90053:(e,t,o)=>{"use strict";o.r(t);o.d(t,{fileUploadStatus:()=>N,default:()=>E});var r=o(44626);var n=o.n(r);var a=o(90265);var i=o.n(a);var c=o(66995);var s=o.n(c);var d=o(91180);var l=o.n(d);var u=o(99021);var m=o.n(u);var p=o(32834);var f=o.n(p);var h=o(11368);var w=o.n(h);var g=o(82507);var y=o.n(g);var b=o(56204);var v=o.n(b);var I=o(21157);var _=o.n(I);var x=o(29103);var C=o.n(x);var k=o(93269);var B=o.n(k);var F=o(92163);var M=o.n(F);var P=o(86992);var T=o.n(P);var L;(function(e){e.copy="filebrowser:copy";e.copyDownloadLink="filebrowser:copy-download-link";e.createLauncher="filebrowser:create-main-launcher";e.cut="filebrowser:cut";e.del="filebrowser:delete";e.download="filebrowser:download";e.duplicate="filebrowser:duplicate";e.hideBrowser="filebrowser:hide-main";e.goToPath="filebrowser:go-to-path";e.openPath="filebrowser:open-path";e.open="filebrowser:open";e.openBrowserTab="filebrowser:open-browser-tab";e.paste="filebrowser:paste";e.createNewDirectory="filebrowser:create-new-directory";e.createNewFile="filebrowser:create-new-file";e.createNewMarkdownFile="filebrowser:create-new-markdown-file";e.rename="filebrowser:rename";e.share="filebrowser:share-main";e.copyPath="filebrowser:copy-path";e.showBrowser="filebrowser:activate";e.shutdown="filebrowser:shutdown";e.toggleBrowser="filebrowser:toggle-main";e.toggleNavigateToCurrentDirectory="filebrowser:toggle-navigate-to-current-directory";e.toggleLastModified="filebrowser:toggle-last-modified";e.search="filebrowser:search"})(L||(L={}));const D={activate:$,id:"@jupyterlab/filebrowser-extension:browser",requires:[u.IFileBrowserFactory,d.IDocumentManager,r.ILabShell,r.ILayoutRestorer,h.ISettingRegistry,r.ITreePathUpdater,I.ITranslator],optional:[a.ICommandPalette,p.IMainMenu],autoStart:true};const W={activate:U,id:"@jupyterlab/filebrowser-extension:factory",provides:u.IFileBrowserFactory,requires:[r.ILabShell,d.IDocumentManager,I.ITranslator],optional:[g.IStateDB,r.IRouter,r.JupyterFrontEnd.ITreeResolver]};const j={activate:z,id:"@jupyterlab/filebrowser-extension:share-file",requires:[u.IFileBrowserFactory,I.ITranslator],autoStart:true};const N={id:"@jupyterlab/filebrowser-extension:file-upload-status",autoStart:true,requires:[u.IFileBrowserFactory,I.ITranslator],optional:[b.IStatusBar],activate:(e,t,o,r)=>{if(!r){return}const n=new u.FileUploadStatus({tracker:t.tracker,translator:o});r.registerStatusItem("@jupyterlab/filebrowser-extension:file-upload-status",{item:n,align:"middle",isActive:()=>!!n.model&&n.model.items.length>0,activeStateChanged:n.model.stateChanged})}};const S="filebrowser";const O=[W,D,j,N];const E=O;async function U(e,t,o,r,n,i,s){const d=r.load("jupyterlab");const{commands:l}=e;const m=new a.WidgetTracker({namespace:S});const p=(e,i={})=>{var s;const p=new u.FilterFileBrowserModel({translator:r,auto:(s=i.auto)!==null&&s!==void 0?s:true,manager:o,driveName:i.driveName||"",refreshInterval:i.refreshInterval,state:i.state===null?undefined:i.state||n||undefined});const f=i.restore;const h=new u.FileBrowser({id:e,model:p,restore:f,translator:r});const w=new a.ToolbarButton({icon:x.addIcon,onClick:()=>{if(t.mode==="multiple-document"&&l.hasCommand("launcher:create")){return A.createLauncher(l,h)}else{const e=c.PageConfig.getUrl({mode:t.mode,workspace:c.PageConfig.defaultWorkspace,treePath:p.path});window.open(e,"_blank")}},tooltip:d.__("New Launcher"),actualOnClick:true});h.toolbar.insertItem(0,"launch",w);void m.add(h);return h};const f=p("filebrowser",{auto:false,restore:false});void A.restoreBrowser(f,l,i,s);return{createFileBrowser:p,defaultBrowser:f,tracker:m}}function $(e,t,o,r,n,a,i,c,s,d){const l=c.load("jupyterlab");const u=t.defaultBrowser;const{commands:m}=e;n.add(u,S);R(e,t,r,o,a,c,s,d);u.title.icon=x.folderIcon;const p=()=>{const t=(0,k.find)(e.commands.keyBindings,(e=>e.command===L.toggleBrowser));if(t){const e=F.CommandRegistry.formatKeystroke(t.keys.join(" "));u.title.caption=l.__("File Browser (%1)",e)}else{u.title.caption=l.__("File Browser")}};p();e.commands.keyBindingChanged.connect((()=>{p()}));r.add(u,"left",{rank:100});void r.restored.then((e=>{if(e.fresh&&r.mode!=="single-document"){void m.execute(L.showBrowser,void 0)}}));void Promise.all([e.restored,u.model.restored]).then((()=>{function e(){if(r.isEmpty("main")&&m.hasCommand("launcher:create")){void A.createLauncher(m,u)}}r.layoutModified.connect((()=>{e()}));let n=false;let s=true;void a.load("@jupyterlab/filebrowser-extension:browser").then((e=>{e.changed.connect((e=>{n=e.get("navigateToCurrentDirectory").composite;u.navigateToCurrentDirectory=n}));n=e.get("navigateToCurrentDirectory").composite;u.navigateToCurrentDirectory=n;e.changed.connect((e=>{s=e.get("useFuzzyFilter").composite;u.useFuzzyFilter=s}));s=e.get("useFuzzyFilter").composite;u.useFuzzyFilter=s}));r.currentChanged.connect((async(e,a)=>{var i;if(n&&a.newValue){const{newValue:e}=a;const n=o.contextForWidget(e);if(n){const{path:e}=n;try{await A.navigateToPath(e,t,c);(i=r.currentWidget)===null||i===void 0?void 0:i.activate()}catch(s){console.warn(`${L.goToPath} failed to open: ${e}`,s)}}}}));u.model.pathChanged.connect(((e,t)=>{i(t.newValue)}));e()}))}function z(e,t,o){const r=o.load("jupyterlab");const{commands:n}=e;const{tracker:i}=t;n.addCommand(L.share,{execute:()=>{const e=i.currentWidget;const t=e===null||e===void 0?void 0:e.selectedItems().next();if(!t){return}const o=encodeURI(t.path);a.Clipboard.copyToSystem(c.URLExt.normalize(c.PageConfig.getUrl({mode:"single-document",workspace:c.PageConfig.defaultWorkspace,treePath:o})))},isVisible:()=>!!i.currentWidget&&(0,k.toArray)(i.currentWidget.selectedItems()).length===1,icon:x.linkIcon.bindprops({stylesheet:"menuItem"}),label:r.__("Copy Shareable Link")})}function R(e,t,o,r,n,i,c,s){const d=i.load("jupyterlab");const{docRegistry:l,commands:u}=e;const{defaultBrowser:m,tracker:p}=t;u.addCommand(L.del,{execute:()=>{const e=p.currentWidget;if(e){return e.delete()}},icon:x.closeIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Delete"),mnemonic:0});u.addCommand(L.copy,{execute:()=>{const e=p.currentWidget;if(e){return e.copy()}},icon:x.copyIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Copy"),mnemonic:0});u.addCommand(L.cut,{execute:()=>{const e=p.currentWidget;if(e){return e.cut()}},icon:x.cutIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Cut")});u.addCommand(L.download,{execute:()=>{const e=p.currentWidget;if(e){return e.download()}},icon:x.downloadIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Download")});u.addCommand(L.duplicate,{execute:()=>{const e=p.currentWidget;if(e){return e.duplicate()}},icon:x.copyIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Duplicate")});u.addCommand(L.hideBrowser,{execute:()=>{const e=p.currentWidget;if(e&&!e.isHidden){o.collapseLeft()}}});u.addCommand(L.goToPath,{execute:async e=>{var o;const r=e.path||"";const n=!((o=e===null||e===void 0?void 0:e.dontShowBrowser)!==null&&o!==void 0?o:false);try{const e=await A.navigateToPath(r,t,i);if(e.type!=="directory"&&n){const e=A.getBrowserForPath(r,t);if(e){e.clearSelectedItems();const t=r.split("/");const o=t[t.length-1];if(o){await e.selectItemByName(o)}}}}catch(a){console.warn(`${L.goToPath} failed to go to: ${r}`,a)}if(n){return u.execute(L.showBrowser,{path:r})}}});u.addCommand(L.openPath,{label:e=>e.path?d.__("Open %1",e.path):d.__("Open from Pathâ€¦"),caption:e=>e.path?d.__("Open %1",e.path):d.__("Open from path"),execute:async e=>{var o;let r;if(e===null||e===void 0?void 0:e.path){r=e.path}else{r=(o=(await a.InputDialog.getText({label:d.__("Path"),placeholder:"/path/relative/to/jlab/root",title:d.__("Open Path"),okLabel:d.__("Open")})).value)!==null&&o!==void 0?o:undefined}if(!r){return}try{const o=r!=="/"&&r.endsWith("/");if(o){r=r.slice(0,r.length-1)}const n=A.getBrowserForPath(r,t);const{services:a}=n.model.manager;const i=await a.contents.get(r,{content:false});if(o&&i.type!=="directory"){throw new Error(`Path ${r}/ is not a directory`)}await u.execute(L.goToPath,{path:r,dontShowBrowser:e.dontShowBrowser});if(i.type==="directory"){return}return u.execute("docmanager:open",{path:r})}catch(n){if(n.response&&n.response.status===404){n.message=d.__("Could not find path: %1",r)}return(0,a.showErrorMessage)(d.__("Cannot open"),n)}}});if(c){c.addItem({command:L.openPath,category:d.__("File Operations")})}u.addCommand(L.open,{execute:e=>{const t=e["factory"]||void 0;const o=p.currentWidget;if(!o){return}const{contents:r}=o.model.manager.services;return Promise.all((0,k.toArray)((0,k.map)(o.selectedItems(),(e=>{if(e.type==="directory"){const t=r.localPath(e.path);return o.model.cd(`/${t}`)}return u.execute("docmanager:open",{factory:t,path:e.path})}))))},icon:e=>{var t;const o=e["factory"]||void 0;if(o){const e=l.getFileType(o);return(t=e===null||e===void 0?void 0:e.icon)===null||t===void 0?void 0:t.bindprops({stylesheet:"menuItem"})}else{return x.folderIcon.bindprops({stylesheet:"menuItem"})}},label:e=>e["label"]||e["factory"]||d.__("Open"),mnemonic:0});u.addCommand(L.openBrowserTab,{execute:()=>{const e=p.currentWidget;if(!e){return}return Promise.all((0,k.toArray)((0,k.map)(e.selectedItems(),(e=>u.execute("docmanager:open-browser-tab",{path:e.path})))))},icon:x.addIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Open in New Browser Tab"),mnemonic:0});u.addCommand(L.copyDownloadLink,{execute:()=>{const e=p.currentWidget;if(!e){return}return e.model.manager.services.contents.getDownloadUrl(e.selectedItems().next().path).then((e=>{a.Clipboard.copyToSystem(e)}))},icon:x.copyIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Copy Download Link"),mnemonic:0});u.addCommand(L.paste,{execute:()=>{const e=p.currentWidget;if(e){return e.paste()}},icon:x.pasteIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Paste"),mnemonic:0});u.addCommand(L.createNewDirectory,{execute:()=>{const e=p.currentWidget;if(e){return e.createNewDirectory()}},icon:x.newFolderIcon.bindprops({stylesheet:"menuItem"}),label:d.__("New Folder")});u.addCommand(L.createNewFile,{execute:()=>{const{model:{path:e}}=m;void u.execute("docmanager:new-untitled",{path:e,type:"file",ext:"txt"})},icon:x.textEditorIcon.bindprops({stylesheet:"menuItem"}),label:d.__("New File")});u.addCommand(L.createNewMarkdownFile,{execute:()=>{const{model:{path:e}}=m;void u.execute("docmanager:new-untitled",{path:e,type:"file",ext:"md"})},icon:x.markdownIcon.bindprops({stylesheet:"menuItem"}),label:d.__("New Markdown File")});u.addCommand(L.rename,{execute:e=>{const t=p.currentWidget;if(t){return t.rename()}},icon:x.editIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Rename"),mnemonic:0});u.addCommand(L.copyPath,{execute:()=>{const e=p.currentWidget;if(!e){return}const t=e.selectedItems().next();if(!t){return}a.Clipboard.copyToSystem(t.path)},isVisible:()=>!!p.currentWidget&&p.currentWidget.selectedItems().next!==undefined,icon:x.fileIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Copy Path")});u.addCommand(L.showBrowser,{execute:e=>{const r=e.path||"";const n=A.getBrowserForPath(r,t);if(!n){return}if(m===n){o.activateById(m.id);return}else{const e=["left","right"];for(const t of e){const e=o.widgets(t);let r=e.next();while(r){if(r.contains(n)){o.activateById(r.id);return}r=e.next()}}}}});u.addCommand(L.shutdown,{execute:()=>{const e=p.currentWidget;if(e){return e.shutdownKernels()}},icon:x.stopIcon.bindprops({stylesheet:"menuItem"}),label:d.__("Shut Down Kernel")});u.addCommand(L.toggleBrowser,{execute:()=>{if(m.isHidden){return u.execute(L.showBrowser,void 0)}return u.execute(L.hideBrowser,void 0)}});u.addCommand(L.createLauncher,{label:d.__("New Launcher"),execute:()=>A.createLauncher(u,m)});u.addCommand(L.toggleNavigateToCurrentDirectory,{label:d.__("Show Active File in File Browser"),isToggled:()=>m.navigateToCurrentDirectory,execute:()=>{const e=!m.navigateToCurrentDirectory;const t="navigateToCurrentDirectory";return n.set("@jupyterlab/filebrowser-extension:browser",t,e).catch((e=>{console.error(`Failed to set navigateToCurrentDirectory setting`)}))}});u.addCommand(L.toggleLastModified,{label:d.__("Toggle Last Modified Column"),execute:()=>{const e=a.DOMUtils.findElement(document.body,"jp-id-modified");const t=a.DOMUtils.findElements(document.body,"jp-DirListing-itemModified");if(e.classList.contains("jp-LastModified-hidden")){e.classList.remove("jp-LastModified-hidden");for(let e=0;e<t.length;e++){t[e].classList.remove("jp-LastModified-hidden")}}else{e.classList.add("jp-LastModified-hidden");for(let e=0;e<t.length;e++){t[e].classList.add("jp-LastModified-hidden")}}}});u.addCommand(L.search,{label:d.__("Search on File Names"),execute:()=>alert("search")});if(s){s.settingsMenu.addGroup([{command:L.toggleNavigateToCurrentDirectory}],5)}if(c){c.addItem({command:L.toggleNavigateToCurrentDirectory,category:d.__("File Operations")})}class f extends P.Menu{onBeforeAttach(e){this.clearItems();const t=p.currentWidget?f._intersection((0,k.map)(p.currentWidget.selectedItems(),(e=>f._getFactories(e)))):undefined;if(t){t.forEach((e=>{this.addItem({args:{factory:e},command:L.open})}))}super.onBeforeAttach(e)}static _getFactories(e){var t;const o=l.preferredWidgetFactories(e.path).map((e=>e.name));const r=(t=l.getWidgetFactory("notebook"))===null||t===void 0?void 0:t.name;if(r&&e.type==="notebook"&&o.indexOf(r)===-1){o.unshift(r)}return o}static _intersection(e){const t=e.next();if(!t){return}const o=new Set(t);return(0,k.reduce)(e,((e,t)=>new Set(t.filter((t=>e.has(t))))),o)}}const h=".jp-DirListing-content";const w=".jp-DirListing-item[data-isdir]";const g='.jp-DirListing-item[data-isdir="false"]';e.contextMenu.addItem({command:L.createNewDirectory,selector:h,rank:1});e.contextMenu.addItem({command:L.createNewFile,selector:h,rank:2});e.contextMenu.addItem({command:L.createNewMarkdownFile,selector:h,rank:3});e.contextMenu.addItem({command:L.paste,selector:h,rank:4});e.contextMenu.addItem({command:L.open,selector:w,rank:1});const y=new f({commands:u});y.title.label=d.__("Open With");e.contextMenu.addItem({type:"submenu",submenu:y,selector:g,rank:2});e.contextMenu.addItem({command:L.openBrowserTab,selector:g,rank:3});e.contextMenu.addItem({command:L.rename,selector:w,rank:4});e.contextMenu.addItem({command:L.del,selector:w,rank:5});e.contextMenu.addItem({command:L.cut,selector:w,rank:6});e.contextMenu.addItem({command:L.copy,selector:g,rank:7});e.contextMenu.addItem({command:L.duplicate,selector:g,rank:8});e.contextMenu.addItem({command:L.download,selector:g,rank:9});e.contextMenu.addItem({command:L.shutdown,selector:g,rank:10});e.contextMenu.addItem({command:L.share,selector:w,rank:11});e.contextMenu.addItem({command:L.copyPath,selector:w,rank:12});e.contextMenu.addItem({command:L.copyDownloadLink,selector:g,rank:13});e.contextMenu.addItem({command:L.toggleLastModified,selector:".jp-DirListing-header",rank:14})}var A;(function(e){function t(e,t){const{model:o}=t;return e.execute("launcher:create",{cwd:o.path}).then((e=>{o.pathChanged.connect((()=>{if(e.content){e.content.cwd=o.path}}),e);return e}))}e.createLauncher=t;function o(e,t){const{defaultBrowser:o,tracker:r}=t;const n=o.model.manager.services.contents.driveName(e);if(n){const t=r.find((e=>e.model.driveName===n));if(!t){console.warn(`${L.goToPath} failed to find filebrowser for path: ${e}`);return}return t}return o}e.getBrowserForPath=o;async function r(t,o,r){const n=r.load("jupyterlab");const a=e.getBrowserForPath(t,o);if(!a){throw new Error(n.__("No browser for path"))}const{services:i}=a.model.manager;const s=i.contents.localPath(t);await i.ready;const d=await i.contents.get(t,{content:false});const{model:l}=a;await l.restored;if(d.type==="directory"){await l.cd(`/${s}`)}else{await l.cd(`/${c.PathExt.dirname(s)}`)}return d}e.navigateToPath=r;async function n(e,t,o,r){const n="jp-mod-restoring";e.addClass(n);if(!o){await e.model.restore(e.id);await e.model.refresh();e.removeClass(n);return}const a=async()=>{o.routed.disconnect(a);const i=await(r===null||r===void 0?void 0:r.paths);if((i===null||i===void 0?void 0:i.file)||(i===null||i===void 0?void 0:i.browser)){await e.model.restore(e.id,false);if(i.file){await t.execute(L.openPath,{path:i.file,dontShowBrowser:true})}if(i.browser){await t.execute(L.openPath,{path:i.browser,dontShowBrowser:true})}}else{await e.model.restore(e.id);await e.model.refresh()}e.removeClass(n)};o.routed.connect(a)}e.restoreBrowser=n})(A||(A={}))}}]);