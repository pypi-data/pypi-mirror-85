(self["webpackChunk_jupyterlab_application_top"]=self["webpackChunk_jupyterlab_application_top"]||[]).push([[7144],{87144:(e,t,n)=>{"use strict";n.r(t);n.d(t,{savingStatusPlugin:()=>S,pathStatusPlugin:()=>I,default:()=>M});var o=n(44626);var a=n.n(o);var r=n(90265);var i=n.n(r);var d=n(66995);var c=n.n(d);var s=n(91180);var l=n.n(s);var u=n(32834);var m=n.n(u);var g=n(11368);var p=n.n(g);var f=n(56204);var h=n.n(f);var v=n(21157);var _=n.n(v);var w=n(93269);var b=n.n(w);var y=n(52191);var x=n.n(y);var C=n(86992);var D=n.n(C);var k;(function(e){e.clone="docmanager:clone";e.deleteFile="docmanager:delete-file";e.newUntitled="docmanager:new-untitled";e.open="docmanager:open";e.openBrowserTab="docmanager:open-browser-tab";e.reload="docmanager:reload";e.rename="docmanager:rename";e.del="docmanager:delete";e.restoreCheckpoint="docmanager:restore-checkpoint";e.save="docmanager:save";e.saveAll="docmanager:save-all";e.saveAs="docmanager:save-as";e.download="docmanager:download";e.toggleAutosave="docmanager:toggle-autosave";e.showInFileBrowser="docmanager:show-in-file-browser"})(k||(k={}));const W="@jupyterlab/docmanager-extension:plugin";const F={id:W,provides:s.IDocumentManager,requires:[g.ISettingRegistry,v.ITranslator],optional:[o.ILabStatus,r.ICommandPalette,o.ILabShell,u.IMainMenu,r.ISessionContextDialogs],activate:(e,t,n,o,a,r,i,d)=>{var c;const l=n.load("jupyterlab");const u=e.serviceManager;const m=new WeakSet;const g={open:(t,n)=>{if(!t.id){t.id=`document-manager-${++j.id}`}t.title.dataset=Object.assign({type:"document-title"},t.title.dataset);if(!t.isAttached){e.shell.add(t,"main",n||{})}e.shell.activateById(t.id);const a=h.contextForWidget(t);if(a&&!m.has(a)){if(o){R(o,a)}m.add(a)}}};const p=e.docRegistry;const f=e.restored.then((()=>void 0));const h=new s.DocumentManager({registry:p,manager:u,opener:g,when:f,setBusy:(c=o&&(()=>o.setBusy()))!==null&&c!==void 0?c:undefined,sessionDialogs:d||undefined,translator:n});O(e,h,g,t,n,r,a,i);const v=t=>{const n=t.get("autosave").composite;h.autosave=n===true||n===false?n:true;e.commands.notifyCommandChanged(k.toggleAutosave);const o=t.get("autosaveInterval").composite;h.autosaveInterval=o||120;const a=t.get("defaultViewers").composite;const r={};Object.keys(a).forEach((e=>{if(!p.getFileType(e)){console.warn(`File Type ${e} not found`);return}if(!p.getWidgetFactory(a[e])){console.warn(`Document viewer ${a[e]} not found`)}r[e]=a[e]}));(0,w.each)(p.fileTypes(),(e=>{try{p.setDefaultWidgetFactory(e.name,r[e.name])}catch(c){console.warn(`Failed to set default viewer ${r[e.name]} for file type ${e.name}`)}}))};Promise.all([t.load(W),e.restored]).then((([e])=>{e.changed.connect(v);v(e)})).catch((e=>{console.error(e.message)}));t.transform(W,{fetch:e=>{const t=(0,w.toArray)(p.fileTypes()).map((e=>e.name)).join("    \n");const n=(0,w.toArray)(p.widgetFactories()).map((e=>e.name)).join("    \n");const o=l.__(`Overrides for the default viewers for file types.\nSpecify a mapping from file type name to document viewer name, for example:\n\ndefaultViewers: {\n  markdown: "Markdown Preview"\n}\n\nIf you specify non-existent file types or viewers, or if a viewer cannot\nopen a given file type, the override will not function.\n\nAvailable viewers:\n%1\n\nAvailable file types:\n%2`,n,t);const a=y.JSONExt.deepCopy(e.schema);a.properties.defaultViewers.description=o;return Object.assign(Object.assign({},e),{schema:a})}});p.changed.connect((()=>t.reload(W)));h.mode=r.mode;r.modeChanged.connect(((e,t)=>{h.mode=t}));return h}};const S={id:"@jupyterlab/docmanager-extension:saving-status",autoStart:true,requires:[s.IDocumentManager,o.ILabShell,v.ITranslator],optional:[f.IStatusBar],activate:(e,t,n,o,a)=>{if(!a){return}const r=new s.SavingStatus({docManager:t,translator:o});r.model.widget=n.currentWidget;n.currentChanged.connect((()=>{r.model.widget=n.currentWidget}));a.registerStatusItem(S.id,{item:r,align:"middle",isActive:()=>true,activeStateChanged:r.model.stateChanged})}};const I={id:"@jupyterlab/docmanager-extension:path-status",autoStart:true,requires:[s.IDocumentManager,o.ILabShell],optional:[f.IStatusBar],activate:(e,t,n,o)=>{if(!o){return}const a=new s.PathStatus({docManager:t});a.model.widget=n.currentWidget;n.currentChanged.connect((()=>{a.model.widget=n.currentWidget}));o.registerStatusItem(I.id,{item:a,align:"right",rank:0,isActive:()=>true})}};const A=[F,I,S];const M=A;class B extends C.Widget{constructor(e,t,n="notebook"){super({node:j.createRevertConfirmNode(e,n,t)})}}function E(e,t){if(!e){return"File"}const n=t.contextForWidget(e);if(!n){return""}const o=t.registry.getFileTypesForPath(n.path);return o.length&&o[0].displayName?o[0].displayName:"File"}function O(e,t,n,o,a,i,d,c){const s=a.load("jupyterlab");const{commands:l,shell:u}=e;const m=s.__("File Operations");const g=()=>{const{currentWidget:e}=u;return!!(e&&t.contextForWidget(e))};const p=()=>{const{currentWidget:e}=u;if(!e){return false}const n=t.contextForWidget(e);return!!(n&&n.contentsModel&&n.contentsModel.writable)};if(i){T(e,t,i,n,a,d)}l.addCommand(k.deleteFile,{label:()=>`Delete ${E(u.currentWidget,t)}`,execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];if(!n){const e=k.deleteFile;throw new Error(`A non-empty path is required for ${e}.`)}return t.deleteFile(n)}});l.addCommand(k.newUntitled,{execute:e=>{const n=e["error"]||s.__("Error");const o=typeof e["path"]==="undefined"?"":e["path"];const a={type:e["type"],path:o};if(e["type"]==="file"){a.ext=e["ext"]||".txt"}return t.services.contents.newUntitled(a).catch((e=>(0,r.showErrorMessage)(n,e)))},label:e=>e["label"]||`New ${e["type"]}`});l.addCommand(k.open,{execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];const o=e["factory"]||void 0;const a=e===null||e===void 0?void 0:e.kernel;const r=e["options"]||void 0;return t.services.contents.get(n,{content:false}).then((()=>t.openOrReveal(n,o,a,r)))},icon:e=>e["icon"]||"",label:e=>e["label"]||e["factory"],mnemonic:e=>e["mnemonic"]||-1});l.addCommand(k.openBrowserTab,{execute:e=>{const n=typeof e["path"]==="undefined"?"":e["path"];if(!n){return}return t.services.contents.getDownloadUrl(n).then((e=>{const t=window.open();if(t){t.opener=null;t.location.href=e}else{throw new Error("Failed to open new browser tab.")}}))},icon:e=>e["icon"]||"",label:()=>s.__("Open in New Browser Tab")});l.addCommand(k.reload,{label:()=>s.__("Reload %1 from Disk",E(u.currentWidget,t)),caption:s.__("Reload contents from disk"),isEnabled:g,execute:()=>{if(!g()){return}const e=t.contextForWidget(u.currentWidget);const n=E(u.currentWidget,t);if(!e){return(0,r.showDialog)({title:s.__("Cannot Reload"),body:s.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:s.__("Ok")})]})}if(e.model.dirty){return(0,r.showDialog)({title:s.__("Reload %1 from Disk",n),body:s.__("Are you sure you want to reload the %1 from the disk?",n),buttons:[r.Dialog.cancelButton({label:s.__("Cancel")}),r.Dialog.warnButton({label:s.__("Reload")})]}).then((t=>{if(t.button.accept&&!e.isDisposed){return e.revert()}}))}else{if(!e.isDisposed){return e.revert()}}}});l.addCommand(k.restoreCheckpoint,{label:()=>s.__("Revert %1 to Checkpoint",E(u.currentWidget,t)),caption:s.__("Revert contents to previous checkpoint"),isEnabled:g,execute:()=>{if(!g()){return}const e=t.contextForWidget(u.currentWidget);if(!e){return(0,r.showDialog)({title:s.__("Cannot Revert"),body:s.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:s.__("Ok")})]})}return e.listCheckpoints().then((n=>{if(n.length<1){return}const o=n[n.length-1];if(!o){return}const a=E(u.currentWidget,t);return(0,r.showDialog)({title:s.__("Revert %1 to checkpoint",a),body:new B(o,s,a),buttons:[r.Dialog.cancelButton({label:s.__("Cancel")}),r.Dialog.warnButton({label:s.__("Revert")})]}).then((t=>{if(e.isDisposed){return}if(t.button.accept){if(e.model.readOnly){return e.revert()}return e.restoreCheckpoint().then((()=>e.revert()))}}))}))}});l.addCommand(k.save,{label:()=>s.__("Save %1",E(u.currentWidget,t)),caption:s.__("Save and create checkpoint"),isEnabled:p,execute:()=>{if(g()){const e=t.contextForWidget(u.currentWidget);if(!e){return(0,r.showDialog)({title:s.__("Cannot Save"),body:s.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:s.__("Ok")})]})}if(e.model.readOnly){return(0,r.showDialog)({title:s.__("Cannot Save"),body:s.__("Document is read-only"),buttons:[r.Dialog.okButton({label:s.__("Ok")})]})}return e.save().then((()=>e.createCheckpoint())).catch((e=>{if(e.message==="Cancel"){return}throw e}))}}});l.addCommand(k.saveAll,{label:()=>s.__("Save All"),caption:s.__("Save all open documents"),isEnabled:()=>(0,w.some)((0,w.map)(u.widgets("main"),(e=>t.contextForWidget(e))),(e=>{var t,n;return(n=(t=e===null||e===void 0?void 0:e.contentsModel)===null||t===void 0?void 0:t.writable)!==null&&n!==void 0?n:false})),execute:()=>{const e=[];const n=new Set;(0,w.each)(u.widgets("main"),(o=>{const a=t.contextForWidget(o);if(a&&!a.model.readOnly&&!n.has(a.path)){n.add(a.path);e.push(a.save())}}));return Promise.all(e)}});l.addCommand(k.saveAs,{label:()=>s.__("Save %1 As…",E(u.currentWidget,t)),caption:s.__("Save with new path"),isEnabled:g,execute:()=>{if(g()){const e=t.contextForWidget(u.currentWidget);if(!e){return(0,r.showDialog)({title:s.__("Cannot Save"),body:s.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:s.__("Ok")})]})}return e.saveAs()}}});l.addCommand(k.download,{label:s.__("Download"),caption:s.__("Download the file to your computer"),isEnabled:g,execute:()=>{if(g()){const e=t.contextForWidget(u.currentWidget);if(!e){return(0,r.showDialog)({title:s.__("Cannot Download"),body:s.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:s.__("OK")})]})}return e.download()}}});l.addCommand(k.toggleAutosave,{label:s.__("Autosave Documents"),isToggled:()=>t.autosave,execute:()=>{const e=!t.autosave;const n="autosave";return o.set(W,n,e).catch((e=>{console.error(`Failed to set ${W}:${n} - ${e.message}`)}))}});e.contextMenu.addItem({command:"filemenu:create-console",selector:'[data-type="document-title"].jp-mod-current',rank:6});if(d){[k.reload,k.restoreCheckpoint,k.save,k.saveAs,k.download,k.toggleAutosave].forEach((e=>{d.addItem({command:e,category:m})}))}if(c){c.settingsMenu.addGroup([{command:k.toggleAutosave}],5);c.fileMenu.addGroup([{command:k.download}],6)}}function T(e,t,n,o,a,i){const d=a.load("jupyterlab");const{commands:c}=e;const l=()=>{var o;const a=/[Pp]ath:\s?(.*)\n?/;const r=e=>{var t;return!!((t=e["title"])===null||t===void 0?void 0:t.match(a))};const i=e.contextMenuHitTest(r);const d=i===null||i===void 0?void 0:i["title"].match(a);return(o=d&&t.findWidget(d[1],null))!==null&&o!==void 0?o:n.currentWidget};const u=()=>{const{currentWidget:e}=n;return!!(e&&t.contextForWidget(e))};c.addCommand(k.clone,{label:()=>d.__("New View for %1",E(l(),t)),isEnabled:u,execute:e=>{const n=l();const a=e["options"]||{mode:"split-right"};if(!n){return}const r=t.cloneWidget(n);if(r){o.open(r,a)}}});c.addCommand(k.rename,{label:()=>d.__("Rename %1…",E(l(),t)),isEnabled:u,execute:()=>{if(u()){const e=t.contextForWidget(l());return(0,s.renameDialog)(t,e.path)}}});c.addCommand(k.del,{label:()=>d.__("Delete %1",E(l(),t)),isEnabled:u,execute:async()=>{if(u()){const n=t.contextForWidget(l());if(!n){return}const o=await(0,r.showDialog)({title:d.__("Delete"),body:d.__("Are you sure you want to delete %1",n.path),buttons:[r.Dialog.cancelButton({label:d.__("Cancel")}),r.Dialog.warnButton({label:d.__("Delete")})]});if(o.button.accept){await e.commands.execute("docmanager:delete-file",{path:n.path})}}}});c.addCommand(k.showInFileBrowser,{label:()=>d.__("Show in File Browser"),isEnabled:u,execute:async()=>{const e=l();const n=e&&t.contextForWidget(e);if(!n){return}await c.execute("filebrowser:activate",{path:n.path});await c.execute("filebrowser:go-to-path",{path:n.path})}});e.contextMenu.addItem({command:k.rename,selector:'[data-type="document-title"]',rank:1});e.contextMenu.addItem({command:k.del,selector:'[data-type="document-title"]',rank:2});e.contextMenu.addItem({command:k.clone,selector:'[data-type="document-title"]',rank:3});e.contextMenu.addItem({command:k.showInFileBrowser,selector:'[data-type="document-title"]',rank:4})}function R(e,t){let n=null;const o=(t,o)=>{if(o.name==="dirty"){if(o.newValue===true){if(!n){n=e.setDirty()}}else if(n){n.dispose();n=null}}};void t.ready.then((()=>{t.model.stateChanged.connect(o);if(t.model.dirty){n=e.setDirty()}}));t.disposed.connect((()=>{if(n){n.dispose()}}))}var j;(function(e){e.id=0;function t(e,t,n){const o=document.createElement("div");const a=document.createElement("p");const r=document.createTextNode(n.__("Are you sure you want to revert the %1 to the latest checkpoint? ",t));const i=document.createElement("strong");i.textContent=n.__("This cannot be undone.");a.appendChild(r);a.appendChild(i);const c=document.createElement("p");const s=document.createTextNode(n.__("The checkpoint was last updated at: "));const l=document.createElement("p");const u=new Date(e.last_modified);l.style.textAlign="center";l.textContent=d.Time.format(u,"dddd, MMMM Do YYYY, h:mm:ss a")+" ("+d.Time.formatHuman(u)+")";c.appendChild(s);c.appendChild(l);o.appendChild(a);o.appendChild(c);return o}e.createRevertConfirmNode=t})(j||(j={}))}}]);