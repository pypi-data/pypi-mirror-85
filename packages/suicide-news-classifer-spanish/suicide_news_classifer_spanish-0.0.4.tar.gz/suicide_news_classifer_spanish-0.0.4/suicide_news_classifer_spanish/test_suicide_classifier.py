import unittest
from suicide_classifier import SuicideClassifier
 
class TestClassifier(unittest.TestCase):
        
    def test_sum(self):
        classifier = SuicideClassifier()

        sentence_test_no_suicide = [
            "Elegimos el hotel por su buena situación, en el centro, en la calle Ancha. Apenas a unos metros de la Catedral y el barrio Húmedo. En ese sentido, perfecto. El problema es que esa localización precisamente es lo que genera que sea imposible dormir. Nos tocó una habitación en el primer piso de la fachada que da a la calle Cervantes, repleta de bares. Hasta las 3 de la mañana con ruidos constantes, golpes, gritos. A partir de esa hora, borrachos gritando. No pudimos pegar ojo, algo que también fue culpa de la estrecha cama de 1,35 cm. Una auténtica pesadilla.  El hotel es un tres estrellas anclado en los finales de los ochenta. El baño y el mobiliario así lo demuestran. Las habitaciones están dispersas por varios edificios, pasillos y más pasillos, escaleras, etc...Caótico.  Otro aspecto negativo fue la televisión. Sólo tenía sintonizadas dos cadenas y no había posibilidad de resintonizar el aparato, ya que estaba bloqueado. Además, estaba contectada la descripción para ciegos, imposible de quitar, por lo que ver una película (lo único que se podía ver, la verdad), era toda una epopeya.  Al menos pudimos disfrutar de un circuito de spa gratuito. Se trata de un spa humilde, pero que no nos vino mal. SI hubiéramos sabido que íbamos a dormir así, nos quedamos en la piscina.  El desayuno no es buffet, es un café con zumo natural y una tostada.  Habíamos reservado aparcamiento, pero viendo las opiniones al respecto acerca de la estrechez e incomodidad, decidimos aparcar en uno público que está a 50 metros...al menos no tengo que volverme loco para entrar en una calle peatonal, maniobrar de locura y arriesgarme.  https://www.tripadvisor.es/ShowUserReviews-g187492-d8670166-r384189174-Hotel_Paris-Leon_Province_of_Leon_Castile_and_Leon.html#"
            "La comida está correcta, buena, pero un poco escasa. El precio adecuado si vas con promoción de El Tenedor. Aunque los camareros son agradables, el servicio es un poco caótico, con intervalos irregulares a la hora de traer la comida. Además, pedimos dos veces la carta para pedir más raciones, pero nunca la trajeron, y la cuenta venía con un error en el descuento aplicado",
            "Meh. Iba con unas expectativas medias y salí decepcionado. Es verdad que la carta pinta bien y que la están renovando (cambio de cocinero), pero no hay nada que sorprenda o deje un buen recuerdo. Sabores que intentan ser originales y acaban con el producto principal. Presentaciones muy similares, abusando de almendras, lechugas... Lo único destacable fueron los postres, especialmente un trampantojo de huevo. ",
            "que alegría que alboroto otro perrito piloto. muy correcto", "lo odio, fatal, que horror",
            "malo malísimo feo caca, horrible",
            "Recuerdo que antes decía, que en mí vivían sentimientos de agonía y tristeza, sentimientos que revivían con cada recuerdo que tenía, mi mente, un lugar abrumado, confundido, desolado y que pensaba que en ningún otro momento eso cambiaría, estaba tan lastimado no sólo por las personas, sino por la vida en general… De un momento a otro llega una pequeña casualidad, aquella que le daría un rumbo diferente a mi vida, que haría despertar aquel yo que se había ocultado por mucho tiempo, aquellos sentimientos que habían desaparecido, aquella pequeña casualidad, cobró mucha importancia, ya no sólo era una casualidad, era la razón de que yo no brincara al fondo de ese hoyo el cual me atraía cada vez más para hundirme dentro de el, era por quién en las mañanas ya no pensaba que todo era repetitivo, sino que todas las mañanas eran días nuevos, para poder vivir, poder disfrutar y sobre todo poder amar"
        ]

        sentence_suicide = [
            "Superar el duelo por la pérdida de algún ser querido durante el estado de alarma, abordar el llamado ‘síndrome de la cabaña’ o el miedo y la incertidumbre ante la vuelta al trabajo, gestionar el cierre de un negocio o una situación de desempleo... Durante estas últimas semanas, la población está afrontando complejas y muy difíciles situaciones que han reforzado nuestra preocupación por la salud física pero que también requieren de altas dosis de cuidados en el plano mental. Por esta razón, la Confederación Salud Mental España en colaboración con el Ministerio de Sanidad, Consumo y Bienestar acaba de lanzar la campaña Salud mental en la desescalada: cómo afrontar el largo camino, que tiene como objetivo ayudar a prevenir o bien abordar determinados momentos que tienen su origen en la crisis de la Covid-19 y que están afectando a gran número de personas. La campaña, difundida en redes sociales bajo el hasthag #DesescaladaSaludMental, aborda ocho escenarios principales donde cuidar la salud mental resulta prioritario y pone a disposición de la población una guía con recomendaciones para abordar dichas situaciones. Cómo afrontar el duelo Sin duda, una de las situaciones más dolorosa provocadas por la pandemia, que ha provocado que muchas personas no hayan podido despedirse de sus seres queridos ni compartir el dolor con su familia y amistades. “Tenemos que cuidar la muerte para cuidar la vida”, afirma el psicólogo Joseba Rico, subdirector de la Asociación madrileña de amigos y familiares de personas con esquizofrenia (AMAFE), que pertenece a la Federación Salud Mental Madrid. Mujer con mascarilla Ocho reglas de oro para aprender a gestionar la incertidumbre Según el especialista “los ritos son muy necesarios para cerrar la despedida”, y recuerda que durante estos meses se han producido situaciones muy diferentes: “Si por ejemplo alguien convive con sus padres y ha fallecido un abuelo, al menos hay una compañía porque les ha tocado vivir el confinamiento juntos, pero alguien que está en otra provincia, no ha podido estar cerca no ya de la persona que ha fallecido, sino de la familia. No ha podido recibir abrazos”. Por ello, Salud Mental España recomienda a todas las personas que pasan por un proceso de duelo permitirse sentir y exteriorizar la tristeza, crear rituales nuevos de despedida como escribir cartas de despedida o crear un collage con fotografías, reunirse con personas cercanas para realizar, cuando sea ya posible, una despedida u homenaje a la persona que ha fallecido y pedir ayuda profesional cuando se sienta que la situación nos supera. Miedo a salir de casa La psicóloga Alejandra Julio Berrio, colaboradora de Salud Mental España, explica que el llamado ‘Síndrome de la cabaña’ se produce cuando “relacionamos ‘casa’ con seguridad y ‘calle’ con peligro”. El hogar se convierte en una nueva zona de confort, hay miedo al contagio y salir supone un nuevo esfuerzo de adaptación. La experta aconseja “hacer trayectos emocionales cortos: si no te apetece salir a las ocho de la tarde a dar un paseo, puedes por ejemplo bajar la basura o ir a comprar el pan”. Además, se recomienda no forzar las salidas, crear rituales que nos hagan sentir más seguros (llevar mascarilla, uso de gel hidroalcohólico...), no compararse con nadie y ponerse pequeñas metas respetando el ritmo y los tiempos de cada uno. Personas con problemas de salud mental Durante el estado de alarma las personas que ya sufrían algún tipo de trastorno mental han podido sentirse más vulnerables al encontrarse mucho mas limitados los recursos necesarios para garantizar la continuidad de sus cuidados. “La clave es sentirte escuchado y acompañado y que, al menos puntualmente, en un momento dado seas importante para alguien que te presta su oído y su humanidad, para acoger toda la desesperación”, explica Joseba Rico. Entre las recomendaciones de la campaña se encuentra prestar atención a síntomas nuevos, observar si alguno ha empeorado y recordar que en esta situación es normal tener más estrés, pensamiento obsesivo, dificultad de concentración, estados de alerta y ansiedad. Mantener el autocuidado, respetar los horarios de sueño y cumplir el tratamiento y las recomendaciones del psicólogo o psiquiatra se hacen más necesarios que nunca.",
            "Es evidente que el perro es el mejor amigo del hombre, pues son fieles y leales a sus dueños incluso cuando ya no están. Así lo demuestra este animal de Wuhan, China, que fue visto la semana pasada en el puente sobre el río Yangtsé esperando a su propietario, que tristemente suicidaron tirándose al río desde allí. Hichiko, el leal perro que esperaba todos los días a su dueño en el hospital. Un perro va todos los días al hospital desde hace tres meses a buscar a un dueño que no sabe que ha fallecido Los transeúntes que pasaban por allí veían al perro sin moverse, a veces tumbado, a veces mirando por los barrotes, así durante cuatro días. ADVERTISING Ads by Teads El pasado sábado, uno de los residentes de la zona quiso cogerlo para adoptarlo, pero el perro se escapó y, desde entonces, la Asociación de Protección de Animales Pequeños de Wuhan lo está buscando. Según declaró a Pear Video Du Fan, director de la protectora, la mascota siguió a su dueño hasta el puente sobre el río Yangtsé el pasado 1 de junio. Pedimos a los oficiales que comprobaran lo que había pasado exactamente. Estaba muy oscuro y no pudimos ver mucho en las cámaras de seguridad, pero vimos que la persona saltó, aseguró. Tal y como informó Daily Mail, la protectora tiene a sus voluntarios buscando al fiel animal y piden que cualquier persona que lo vea se presente en sus instalaciones para dar información. Todavía tenemos esperanza de encontrar un nuevo dueño para el perro, dijo Du Fan. Creemos que es muy triste que un perro tan leal se pierda en la calle.",
            "El exfutbolista serbio Miljan Mrdakovic, antiguo jugador del Partizan, se quitó la vida el sábado en un piso en Belgrado con un tiro en la cabeza, informaron este domingo medios de Serbia. El diario Kurir señala que el exdelantero, que tenía 38 años, cometió el  en un piso alquilado en el que vivía con su novia. Mrdakovic comenzó su carrera en la ciudad meridional serbia de Nis, de donde pasó al Partizan. Militó en más de una docena de clubes, entre otros en el Anderlecht y el Gante belgas, el Salzburgo austríaco, el Maccabi israelí y los serbios Vojvodina, Rad y OFK Beograd, en el que disputó 48 partidos y marcó 24 tantos, y terminó su carrera, en 2017. Jugó nueve partidos con la selección serbia sub21 y tres encuentros con el equipo nacional en los Juegos Olímpicos de 2008. El diario Novosti indica que Mrdakovic tiene un hijo, de 16 años, que también se dedica al fútbol."
        ]

        for text in sentence_suicide:
            print(text)
            sentiment_result = classifier.suicide_probability(text)
            print(sentiment_result)
            print("--------")
            self.assertGreater(sentiment_result, 0.5, "Result should be possitive")
        
        for text in sentence_test_no_suicide:
            print(text)
            sentiment_result = classifier.suicide_probability(text)
            print(sentiment_result)
            print("--------")
            self.assertLess(sentiment_result, 0.5, "Result should be negative")



if __name__ == '__main__':
    unittest.main()