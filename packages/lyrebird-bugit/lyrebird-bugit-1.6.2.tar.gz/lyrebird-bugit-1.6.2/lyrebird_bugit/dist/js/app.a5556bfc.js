(function(t){function e(e){for(var a,o,c=e[0],r=e[1],l=e[2],u=0,h=[];u<c.length;u++)o=c[u],i[o]&&h.push(i[o][0]),i[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);d&&d(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var r=n[o];0!==i[r]&&(a=!1)}a&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var a={},i={app:0},s=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2d0a3577":"0c6ed0e5","chunk-2d0a43df":"3f172ac8","chunk-2d0aa90c":"e613e3b1","chunk-2d0aab07":"edd2015f","chunk-2d0abc00":"e0c858d7","chunk-2d0ae937":"389f3c11","chunk-2d0aeb45":"671acb52","chunk-2d0afa49":"c4da21e2","chunk-2d0b2762":"b19570e5","chunk-2d0b6187":"19d05469","chunk-2d0ba136":"d610093f","chunk-2d0bb267":"32c34d82","chunk-2d0bcec1":"d5b61dde","chunk-2d0bff92":"6a2eabbb","chunk-2d0c0494":"1d432945","chunk-2d0c0a09":"cdb911ab","chunk-2d0c1ed0":"4354e978","chunk-2d0c4313":"dc5398d7","chunk-2d0c46d1":"fa0845c7","chunk-2d0c512b":"875d6d4a","chunk-2d0cf16e":"3691ea11","chunk-2d0d056d":"b5ce89fe","chunk-2d0d0645":"995c91b6","chunk-2d0d2f22":"ce8b3dd3","chunk-2d0d7e63":"32ff38a2","chunk-2d0e1b57":"d9e637ff","chunk-2d0e1fbe":"12a45b65","chunk-2d0e22d6":"f1b7700f","chunk-2d0e542a":"28f29d3f","chunk-2d0e57ec":"76ea1212","chunk-2d0e6553":"c83cb76a","chunk-2d0e6c86":"1fa99c35","chunk-2d0ea098":"bdff2097","chunk-2d208ac5":"60d9f986","chunk-2d209408":"ed8d8b14","chunk-2d20f745":"20ba6202","chunk-2d2138c7":"6ab48f6e","chunk-2d216f3b":"4b9b7f2b","chunk-2d217e5b":"73284392","chunk-2d21b84a":"b9fd655d","chunk-2d21dcd2":"f28ce99f","chunk-2d21f327":"e1f0bb23","chunk-2d2214b3":"6220ebfc","chunk-2d221814":"721e94e1","chunk-2d221a34":"059e8396","chunk-2d22502a":"be7d0abd","chunk-2d228ca6":"2301aaaa","chunk-2d2295e9":"a7fd7320","chunk-2d22c171":"6f917d33","chunk-2d22c2b8":"cd35e71b","chunk-2d22ca58":"d1f13469","chunk-2d2311f7":"0dc04b7d","chunk-2d237ee7":"39e9307d","chunk-2d238465":"39fbc9a8","chunk-7532b3ea":"950a975e","chunk-76fee5a0":"d8fa1d2d","chunk-774ac664":"a47b3bab"}[t]+".js"}function c(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise(function(e,a){n=i[t]=[e,a]});e.push(n[2]=a);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,c.nc&&r.setAttribute("nonce",c.nc),r.src=o(t),s=function(e){r.onerror=r.onload=null,clearTimeout(l);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src,o=new Error("Loading chunk "+t+" failed.\n("+a+": "+s+")");o.type=a,o.request=s,n[1](o)}i[t]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:r})},12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(e)},c.m=t,c.c=a,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)c.d(n,a,function(e){return t[e]}.bind(null,a));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="dist/",c.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var d=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("64a9"),i=n.n(a);i.a},"0be9":function(t,e,n){},1:function(t,e){},"1df7":function(t,e,n){"use strict";var a=n("2db7"),i=n.n(a);i.a},2:function(t,e){},2199:function(t,e,n){},"27a0":function(t,e,n){"use strict";var a=n("eac7"),i=n.n(a);i.a},"28fd":function(t,e,n){"use strict";var a=n("d2c7"),i=n.n(a);i.a},"2db7":function(t,e,n){},3:function(t,e){},4:function(t,e){},"41ac":function(t,e,n){},"4e6f":function(t,e,n){"use strict";var a=n("50ab"),i=n.n(a);i.a},5:function(t,e){},"50ab":function(t,e,n){},5465:function(t,e,n){"use strict";var a=n("6e42"),i=n.n(a);i.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Bugit")],1)},s=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bugit-split"},[n("Split",{model:{value:t.split,callback:function(e){t.split=e},expression:"split"}},[n("div",{attrs:{slot:"left"},slot:"left"},[n("BugTemplateSelector"),n("BugItForm")],1),n("div",{attrs:{slot:"right"},slot:"right"},[n("bugit-devices"),n("bugit-extra")],1)])],1)},c=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Form",{staticClass:"split-left-template-selector",attrs:{"label-width":80}},[n("FormItem",{attrs:{label:"template"}},[n("Select",{attrs:{filterable:"",size:"small",placeholder:"Select template"},model:{value:t.selectedTemplateIndex,callback:function(e){t.selectedTemplateIndex=e},expression:"selectedTemplateIndex"}},t._l(t.templates,function(e,a){return n("Option",{key:a,attrs:{value:a}},[t._v(t._s(e.name))])}),1)],1)],1)},l=[],u={created:function(){this.$store.dispatch("loadTemplateList")},computed:{templates:function(){return this.$store.state.form.templates},selectedTemplateIndex:{get:function(){return this.$store.state.form.selectedTemplateIndex},set:function(t){this.$store.dispatch("updateSelectedTemplateIndex",t)}}}},d=u,h=(n("adbe"),n("2877")),p=Object(h["a"])(d,r,l,!1,null,"246aa2a7",null),m=p.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.fields?n("div",[n("Form",{staticClass:"split-left-form",attrs:{"label-width":100}},[t._l(t.fields,function(e,a){return n(t.getFormComponentByData(a,e),{key:a,tag:"component",attrs:{data:e,index:a}})}),n("AttachmentsList"),t.loadTempalte?n("Spin",{attrs:{fix:""}},[t._v("Loading Tempalte")]):t._e()],2),n("Submit")],1):t._e(),n("AttachmentModal")],1)},v=[],g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formItemData,expression:"formItemData"}],staticClass:"ivu-input ivu-input-small",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.formItemData},on:{input:function(e){e.target.composing||(t.formItemData=e.target.value)}}})])])},x=[],b=(n("7f7f"),{props:["data","index"],computed:{formItemData:{get:function(){return this.$store.state.form.templateDetail[this.index].value},set:function(t){var e=this.index;this.$store.commit("setFormData",{index:e,value:t})}},placeholder:function(){return this.data?this.data.name:""},isRequired:function(){return Boolean(this.data.required)}}}),y=b,w=Object(h["a"])(y,g,x,!1,null,null,null),k=w.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",[n("Select",{attrs:{size:"small",clearable:!t.data.required,multiple:t.data.multiple,filterable:"",placeholder:t.placeholder},model:{value:t.formItemData,callback:function(e){t.formItemData=e},expression:"formItemData"}},t._l(t.data.options,function(e,a){return n("Option",{key:a,attrs:{value:e.id}},[t._v(t._s(e.name))])}),1)],1)])},_=[],S={props:["data","index"],computed:{formItemData:{get:function(){return this.$store.state.form.templateDetail[this.index].value},set:function(t){var e=this.index;this.$store.commit("setFormData",{index:e,value:t})}},isRequired:function(){return Boolean(this.data.required)},placeholder:function(){return this.data?this.data.name:""}}},I=S,C=Object(h["a"])(I,$,_,!1,null,null,null),T=C.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:t.data.name,required:t.isRequired}},[n("div",{staticStyle:{background:"#eee",padding:"10px"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:20},placeholder:"Enter your description..."},model:{value:t.data.value,callback:function(e){t.$set(t.data,"value",e)},expression:"data.value"}}),t._l(t.data.extraMsg,function(t,e){return n("div",{key:e,staticStyle:{"padding-top":"10px"}},[n("MovableDescription",{attrs:{data:t,index:e}})],1)})],2)])},D=[],E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("Col",{attrs:{span:"6"}},[n("Tooltip",{attrs:{content:"Upward this section",placement:"top",delay:500}},[t.index?n("a",[n("Icon",{staticStyle:{"padding-right":"5px"},attrs:{type:"md-arrow-round-up"},on:{click:function(e){return t.sortDesc(t.index)}}})],1):t._e()]),n("strong",{staticStyle:{"padding-right":"5px"}},[t._v(t._s(t.data.channel))]),n("Tooltip",{attrs:{content:"Delete this section",placement:"top",delay:500}},[n("a",[n("Icon",{attrs:{type:"md-trash"},on:{click:function(e){return t.deleteDesc(t.index)}}})],1)])],1),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"18"}},[t.data.sender?n("Tag",{staticStyle:{"max-width":"100%"},attrs:{color:"green"}},[t._v(t._s(t.data.sender.file))]):t._e()],1)],1),n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:t.data.message,callback:function(e){t.$set(t.data,"message",e)},expression:"data.message"}})],1)},F=[],A={props:["data","index"],methods:{deleteDesc:function(t){this.$parent.$parent.deleteDesc(t)},sortDesc:function(t){this.$parent.$parent.sortDesc(t)}}},O=A,j=Object(h["a"])(O,E,F,!1,null,null,null),L=j.exports,P={props:["data","index"],components:{MovableDescription:L},created:function(){this.$bus.$on("addMessage",this.addDesc)},methods:{addDesc:function(t){this.$store.commit("addExtraMsg",{index:this.index,value:t})},deleteDesc:function(t){this.$store.commit("deleteExtraMsg",{index:t,propsIndex:this.index})},sortDesc:function(t){this.$store.dispatch("setExtraMsgUpward",{index:t,propsIndex:this.index})}},computed:{isRequired:function(){return Boolean(this.data.required)}}},B=P,R=Object(h["a"])(B,M,D,!1,null,null,null),N=R.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",{attrs:{label:"attachments"}},[t.attachments.length?n("div",t._l(t.attachments,function(t,e){return n("p",{key:e},[n("AttachmentItem",{attrs:{data:t,index:e}})],1)}),0):t._e(),t.snapshots.length?n("div",t._l(t.snapshots,function(t,e){return n("p",{key:e},[n("SnapshotItem",{attrs:{data:t,index:e}})],1)}),0):t.attachments.length?t._e():n("div",[n("p",{staticStyle:{color:"#c5c8ce"}},[t._v("No attachment")])])])},V=[],z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",[n("Tooltip",{attrs:{content:"Click to preview",placement:"top"}},[n("a",{staticStyle:{"padding-right":"10px",color:"#515a6e"},on:{click:function(e){return t.displayAttach(t.data)}}},[t._v(t._s(t.data.name))])]),n("Tooltip",{attrs:{content:"Delete this attachment",placement:"top"}},[n("a",{on:{click:function(e){return t.deleteAttach(t.data)}}},[t._v("delete")])])],1)},U=[],K={props:["data","index"],methods:{deleteAttach:function(t){this.$store.dispatch("removeAttachment",{id:t.id,index:this.index})},displayAttach:function(t){this.$bus.$emit("displayAttach",t)}}},J=K,Y=Object(h["a"])(J,z,U,!1,null,null,null),X=Y.exports,H=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("FormItem",[n("Tooltip",{attrs:{content:"Click to preview",placement:"top"}},[n("a",{staticStyle:{"padding-right":"10px",color:"#515a6e"},on:{click:function(e){return t.displayAttach(t.data)}}},[t._v(t._s(t.data.name))])]),n("Tooltip",{attrs:{content:"Delete this snapshot",placement:"top"}},[n("a",{on:{click:function(e){return t.deleteAttach(t.data)}}},[t._v("delete")])])],1)},G=[],W={props:["data","index"],methods:{deleteAttach:function(t){this.$store.commit("deleteSnapshot",this.index)},displayAttach:function(t){this.$bus.$emit("displayAttach",t)}}},Z=W,Q=Object(h["a"])(Z,H,G,!1,null,null,null),tt=Q.exports,et={components:{AttachmentItem:X,SnapshotItem:tt},created:function(){this.$io.on("attachments",this.addAttachment),this.$bus.$on("addAttachments",this.addAttachment),this.$bus.$on("addSnapshot",this.addSnapshot),this.$store.dispatch("loadAttachment")},computed:{attachments:function(){return this.$store.state.form.attachmentsList},snapshots:function(){return this.$store.state.form.snapshotList}},methods:{addAttachment:function(){this.$store.dispatch("loadAttachment")},addSnapshot:function(t){this.$store.commit("addSnapshot",t)}}},nt=et,at=Object(h["a"])(nt,q,V,!1,null,null,null),it=at.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{width:"60",styles:{top:"30px"}},model:{value:t.isDisplayFile,callback:function(e){t.isDisplayFile=e},expression:"isDisplayFile"}},[n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("p",[n("Icon",{attrs:{type:"md-document"}}),n("span",{staticStyle:{"padding-left":"10px"}},[t._v(t._s(t.attachmentName))])],1)]),n("div",[t.isImageFile?n("p",[n("ImageEditor",{attrs:{attachmentId:t.attachmentId,src:"/plugins/bugit/api/attachments/"+this.attachmentId}})],1):t.isSnapshot?n("p",[n("CodeEditor",{staticStyle:{height:"500px"},attrs:{"read-only":"",language:"json"},model:{value:this.attachmentContent,callback:function(e){t.$set(this,"attachmentContent",e)},expression:"this.attachmentContent"}})],1):n("p",[n("FileViewer",{attrs:{attachmentId:t.attachmentId}})],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[t.isImageFile?n("p",[n("Button",{attrs:{long:"",type:"success"},on:{click:function(e){return t.saveImage()}}},[t._v("Save")])],1):n("p",[n("Button",{staticStyle:{"background-color":"#dcdee2"},attrs:{long:""},on:{click:function(e){t.isDisplayFile=!1}}},[t._v("Close")])],1)])])},ot=[],ct=n("f499"),rt=n.n(ct),lt=(n("28a5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",[n("i-col",{attrs:{span:"2"}},[n("ButtonGroup",{attrs:{vertical:""}},[n("Button",{attrs:{type:t.btnType("text")},on:{click:function(e){return t.setMode("text")}}},[n("b",[t._v("T")])]),n("Button",{attrs:{icon:"md-brush",type:t.btnType("brush")},on:{click:function(e){return t.setMode("brush")}}}),n("Button",{class:t.undoButtonClass,attrs:{icon:"md-undo"},on:{click:t.undo}})],1)],1),n("i-col",{staticStyle:{"text-align":"center",padding:"10px"},attrs:{span:"20"}},[n("canvas",{ref:"canvas",style:{cursor:t.canvasStyle},on:{mousedown:t.handleMouseDown,mousemove:t.handleMouseMove,mouseup:t.handleMouseUp}}),n("input",{directives:[{name:"show",rawName:"v-show",value:t.isTextInputShown,expression:"isTextInputShown"},{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],ref:"textInput",staticStyle:{position:"absolute"},style:{left:t.inputLeft,top:t.inputTop},attrs:{width:"120px"},domProps:{value:t.inputText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addText(e)},input:function(e){e.target.composing||(t.inputText=e.target.value)}}})])],1)],1)}),ut=[],dt=n("5d73"),ht=n.n(dt),pt={props:["src","attachmentId"],data:function(){return{activatedMode:"brush",history:[],currentPath:null,canvasBounds:null,inputText:"",isTextInputShown:!1,inputLeft:"50%",inputTop:"50%",canvas:null,ctx:null,img:null}},mounted:function(){this.canvas=this.$refs.canvas,this.canvas.addEventListener("resize",function(){console.log("resize")}),this.ctx=this.canvas.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.img=new Image;var t=this.scaleCanvas,e=this.drawBackground;this.img.onload=function(){t(),e()},this.img.src=this.src},watch:{src:function(){this.inputText="",this.isTextInputShown=!1,this.img.src=this.src}},created:function(){this.$bus.$on("saveImage",this.save)},computed:{canvasStyle:function(){return"brush"===this.activatedMode?"crosshair":"text"===this.activatedMode?"text":"pointer"},undoButtonClass:function(){return{disabled:this.history.length<=0}}},methods:{showTextInput:function(t,e){var n=this,a=this.event2position(e);this.inputLeft=e.clientX-this.canvasBounds.left+this.canvas.offsetLeft+"px",this.inputTop=e.clientY-this.canvasBounds.top+"px",this.textX=a.x,this.textY=a.y,this.isTextInputShown=t,this.$nextTick(function(){n.$refs.textInput.focus()})},btnType:function(t){return t===this.activatedMode?"primary":"default"},setMode:function(t){this.activatedMode=t,"text"!==t&&(this.isTextInputShown=!1)},undo:function(){if(!(this.history.length<=0)){this.clearCanvas(),this.drawBackground(),this.history.pop();var t=!0,e=!1,n=void 0;try{for(var a,i=ht()(this.history);!(t=(a=i.next()).done);t=!0){var s=a.value;if("path"===s.name){this.ctx.beginPath();for(var o=0;o<s.data.length;o++){var c=s.data[o];0===o?this.ctx.moveTo(c.x,c.y):this.ctx.lineTo(c.x,c.y)}this.ctx.strokeStyle="#FF0000",this.ctx.lineWidth=5,this.ctx.stroke(),this.ctx.closePath()}else"text"===s.name&&(this.ctx.font="normal normal 36pt Verdana",this.ctx.fillStyle="#FF0000",this.ctx.fillText(s.data.text,s.data.x,s.data.y))}}catch(r){e=!0,n=r}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},event2position:function(t){return{x:(t.clientX-this.canvasBounds.left)*this.ratio*this.ratio,y:(t.clientY-this.canvasBounds.top)*this.ratio*this.ratio}},scaleCanvas:function(){this.canvas.width=250,this.canvas.height=this.canvas.width*this.img.height/this.img.width;var t=this.getPixelRatio(this.ctx);this.ratio=t,this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px",this.canvas.width=this.canvas.width*t,this.canvas.height=this.canvas.height*t,this.ctx.scale(1/t,1/t)},clearCanvas:function(){this.ctx.clearRect(0,0,this.canvas.width*this.ratio,this.canvas.height*this.ratio)},drawBackground:function(){this.ctx.drawImage(this.img,0,0,this.img.width,this.img.height,0,0,this.canvas.width*this.ratio,this.canvas.height*this.ratio),this.canvasBounds=this.canvas.getBoundingClientRect()},handleMouseDown:function(t){if("brush"===this.activatedMode){this.canvasBounds=this.canvas.getBoundingClientRect(),this.ctx.beginPath();var e=this.event2position(t);this.ctx.moveTo(e.x,e.y),this.currentPath={name:"path",data:[e]}}},handleMouseUp:function(t){"brush"===this.activatedMode?(this.ctx.closePath(),this.history.push(this.currentPath),this.currentPath=null):"text"===this.activatedMode&&this.showTextInput(!0,t)},handleMouseMove:function(t){if("brush"===this.activatedMode&&1===t.buttons){var e=this.event2position(t);this.ctx.lineTo(e.x,e.y),this.ctx.strokeStyle="#FF0000",this.ctx.lineWidth=5,this.ctx.stroke(),this.currentPath&&this.currentPath.data.push(e)}},addText:function(){this.ctx.font="normal normal 36pt Verdana",this.ctx.fillStyle="#FF0000",this.ctx.fillText(this.inputText,this.textX,this.textY),this.history.push({name:"text",data:{text:this.inputText,x:this.textX,y:this.textY}}),this.isTextInputShown=!1,this.inputText=""},save:function(){this.$store.dispatch("saveEditedImage",{id:this.attachmentId,imageData:this.canvas.toDataURL("image/png")})},getPixelRatio:function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}}},mt=pt,ft=(n("d359"),Object(h["a"])(mt,lt,ut,!1,null,null,null)),vt=ft.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("pre",{staticStyle:{"overflow-x":"auto"}},[t._v(t._s(t.shownFileContent))])])},xt=[],bt={props:["attachmentId"],data:function(){return{shownFileContent:null}}},yt=bt,wt=Object(h["a"])(yt,gt,xt,!1,null,null,null),kt=wt.exports,$t=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_t=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{width:"100%",height:"100%",border:"1px solid grey"},attrs:{id:"code-editor"}})])}],St=n("c2c6"),It=(n("a481"),n("4917"),{Object:Object,Array:Array});function Ct(t,e){var n=0,a=[],i=!1;while(n<e){var s=n;switch(t[n]){case'"':var o=Dt(t,n),c=o.text,r=o.pos;if(a.length){var l=a[a.length-1];l.colType===It.Object&&i&&(l.key=c,i=!1)}n=r;break;case"{":a.push({colType:It.Object}),i=!0;break;case"[":a.push({colType:It.Array,index:0});break;case"}":case"]":a.pop();break;case",":if(a.length){var u=a[a.length-1];u.colType===It.Object?i=!0:u.index++}break}n===s&&n++}return Tt(a)}function Tt(t){var e="$";try{var n=!0,a=!1,i=void 0;try{for(var s,o=ht()(t);!(n=(s=o.next()).done);n=!0){var c=s.value;if(c.colType===It.Object)if(c.key.match(/^[a-zA-Z$_][a-zA-Z\d$_]*$/))e.length&&(e+="."),e+=c.key;else{c.key.replace('"','\\"');e+='["'.concat(c.key,'"]')}else e+="[".concat(c.index,"]")}}catch(r){a=!0,i=r}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return e}catch(l){return""}}function Mt(t){return t%2===0}function Dt(t,e){var n=e+1;n=Et(t,n);var a={text:t.substring(e+1,n),pos:n+1};return a}function Et(t,e){while(e<t.length){if('"'===t[e]){var n=e;while(n>=0&&"\\"===t[n])n--;if(Mt(e-n))break}e++}return e}var Ft={name:"codeEditor",model:{prop:"content",event:"change"},props:{content:null,language:{default:"javascript"},readOnly:{type:Boolean,default:!1}},data:function(){return{editor:null,jsonPath:null}},watch:{content:function(t){this.editor&&t!==this.editor.getValue()&&(St["editor"].setModelLanguage(this.editor.getModel(),this.language),this.editor.setValue(t),this.editor.trigger(this.editor.getValue(),"editor.action.formatDocument"))}},mounted:function(){var t=this,e=this.copyToClipboard;this.editor=St["editor"].create(this.$el.querySelector("#code-editor"),{value:this.content,language:this.language,theme:"vs",readOnly:this.readOnly}),this.editor.addAction({id:"json-path",label:"Copy JsonPath",keybindings:[St["KeyMod"].chord(St["KeyMod"].CtrlCmd|St["KeyCode"].KEY_J)],precondition:"editorLangId == 'json'",keybindingContext:"editorLangId == 'json'",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:2,run:e}),this.editor.onDidChangeModelContent(function(e){var n=t.editor.getValue();t.value!==n&&t.$emit("change",n,e)}),this.editor.onDidChangeCursorPosition(function(e){var n=t.editor.getValue(),a=t.editor.getModel().getOffsetAt(e.position),i=t.language;t.value!==n&&"json"===i&&t.$emit("on-cursor-change",{offSet:a}),"json"===i&&0!==a&&(t.jsonPath=Ct(n,a),t.$emit("on-jsonpath-change",{jsonPath:t.jsonPath}))})},methods:{copyToClipboard:function(){var t=this.$Notice;this.jsonPath?navigator.clipboard.writeText(this.jsonPath).then(function(){},function(){t.error({title:"jsonpath copy failed."})}):t.warning({title:"There is no jsonpath that can be copied."})}}},At=Ft,Ot=Object(h["a"])(At,$t,_t,!1,null,null,null),jt=Ot.exports,Lt={components:{ImageEditor:vt,FileViewer:kt,CodeEditor:jt},created:function(){this.$bus.$on("displayAttach",this.displayAttach)},data:function(){return{isDisplayFile:!1,attachmentName:null,attachmentId:null,attachmentContent:null}},computed:{isImageFile:function(){if(!this.attachmentName)return!1;var t=["png","jpg","jpeg","webp"],e=this.attachmentName.split("."),n=e[e.length-1];return t.indexOf(n)>-1},isSnapshot:function(){return!!this.attachmentContent&&(this.attachmentContent=rt()(this.attachmentContent,null,2),!0)}},methods:{displayAttach:function(t){this.isDisplayFile=!0,this.attachmentName=t.name,this.attachmentId=t.id,this.attachmentContent=t.eventObj},saveImage:function(){this.$bus.$emit("saveImage"),this.isDisplayFile=!1}}},Pt=Lt,Bt=Object(h["a"])(Pt,st,ot,!1,null,null,null),Rt=Bt.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{staticStyle:{margin:"10px"}},[n("i-col",{attrs:{span:"24"}},[n("Button",{attrs:{long:"",type:"primary",loading:t.submitLock},on:{click:t.onSubmit}},[t.submitLock?n("span",[n("b",[t._v("Submitting Issue...")])]):n("span",[n("b",[t._v("Submit")])])])],1)],1)],1)},qt=[],Vt={methods:{onSubmit:function(){this.$store.dispatch("submit")}},computed:{submitLock:function(){return this.$store.state.form.submitLock}}},zt=Vt,Ut=Object(h["a"])(zt,Nt,qt,!1,null,null,null),Kt=Ut.exports,Jt={components:{InputFormItem:k,SelectFormItem:T,CompoundTextAreaFormItem:N,AttachmentsList:it,AttachmentModal:Rt,Submit:Kt},computed:{fields:function(){return this.$store.state.form.templateDetail},loadTempalte:function(){return this.$store.state.form.loadTemplate}},methods:{getFormComponentByData:function(t,e){return"input"===e.component?"InputFormItem":"select"===e.component?"SelectFormItem":"compoundTextarea"===e.component?(this.$store.state.form.templateDetail[t].extraMsg||this.$set(this.$store.state.form.templateDetail[t],"extraMsg",[]),"CompoundTextAreaFormItem"):"InputFormItem"}}},Yt=Jt,Xt=(n("9705"),Object(h["a"])(Yt,f,v,!1,null,null,null)),Ht=Xt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"split-right-bar"},[n("p",{staticStyle:{"line-height":"28px","vertical-align":"middle"}},[t._m(0),t.noneDevices?n("span",[n("b",[t._v("N/A - Please connect your phone to your computer using a USB cable")])]):t._e(),t._l(t.devicesInfo,function(e,a){return n("span",{key:a,staticClass:"device-btn-group"},[n("a",{staticClass:"device-btn",on:{click:function(n){return t.addDevice(e)}}},[n("Tooltip",{attrs:{"max-width":"400",placement:"bottom-end"}},[n("span",["Android"===e.platform?n("Icon",{attrs:{type:"logo-android"}}):n("Icon",{attrs:{type:"logo-apple"}}),t._v("\n            "+t._s(e.info.model)+"\n          ")],1),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("Click to add the following info to description")]),n("p",[t._v("-----------------------------------------------------------")]),t._l(e.info,function(e,a){return n("Row",{key:a,staticStyle:{width:"200px"}},[e?n("i-col",{attrs:{span:"9"}},[t.DeviceInfoAllUpperKey.indexOf(a)>-1?n("b",{staticStyle:{float:"right"}},[t._v(t._s(a.toUpperCase()))]):n("b",{staticStyle:{float:"right"}},[t._v(t._s(a.charAt(0).toUpperCase()+a.slice(1)))])]):t._e(),n("i-col",{attrs:{span:"14",offset:"1"}},[t._v(t._s(e))])],1)})],2)])],1),n("a",{staticClass:"screenshot-btn",on:{click:function(n){return t.takeScreenshot(e)}}},[n("Tooltip",{attrs:{placement:"bottom-end"}},[n("Icon",{attrs:{type:"md-images"}}),n("div",{attrs:{slot:"content"},slot:"content"},[t._v("Take a screenshot")])],1)],1)])})],2)])},Wt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticStyle:{"padding-left":"10px","padding-right":"10px"}},[n("b",[t._v("Devices:")])])}],Zt={created:function(){this.loadDevices(),this.$io.on("devices",this.loadDevices)},data:function(){return{DeviceInfoAllUpperKey:["os","sn","ip"]}},computed:{devicesInfo:function(){return this.$store.state.devicesInfo},noneDevices:function(){return null===this.devicesInfo||0===this.devicesInfo.length}},methods:{addDevice:function(t){var e="Model: "+t.info.model+"\nVersion: "+t.info.os+"\n";t.app&&(e+="App: "+t.app.packageName+"\nApp version: "+t.app.version+"\n",t.app.build&&(e+="BundleID: "+t.app.build+"\n")),this.$bus.$emit("addMessage",{channel:t.platform,message:e})},takeScreenshot:function(t){this.$store.dispatch("takeScreenshot",{platform:t.platform,deviceId:t.id})},loadDevices:function(){this.$store.dispatch("loadDevices")}}},Qt=Zt,te=(n("9a9c"),Object(h["a"])(Qt,Gt,Wt,!1,null,"7e888db2",null)),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"split-right-table"},[n("Split",{attrs:{mode:"vertical"},model:{value:t.detailSplit,callback:function(e){t.detailSplit=e},expression:"detailSplit"}},[n("div",{ref:"eventContainer",staticClass:"demo-split-pane",attrs:{slot:"top"},slot:"top"},[n("EventInspector",{ref:"eventList"})],1),n("div",{staticClass:"demo-split-pane",attrs:{slot:"bottom"},slot:"bottom"},[n("CodeEditor",{staticStyle:{height:"800px"},attrs:{"read-only":"",language:"json"},model:{value:t.eventDetail,callback:function(e){t.eventDetail=e},expression:"eventDetail"}})],1)])],1)},ae=[],ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{ref:"eventTable",staticClass:"event-table",staticStyle:{height:"100%"},attrs:{size:"small","highlight-row":"",columns:t.columns,data:t.events},on:{"on-filter-change":t.onFilterChange,"on-row-click":t.onRowClick},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row;return[n("ContextMenuItem",[n("Button",{attrs:{type:"text",shape:"circle",icon:"ios-add-circle-outline"},on:{click:function(e){return t.onAddEvent(a)}}})],1)]}},{key:"timestamp",fn:function(e){var a=e.row;return[n("ContextMenuItem",[n("div",[t._v(t._s(t.ts2String(a.timestamp)))])])]}},{key:"channel",fn:function(t){var e=t.row;return[n("ChannelColumn",{attrs:{channel:e.channel}})]}},{key:"content",fn:function(e){var a=e.row;return[n(t.contentComponentName(a.content),{tag:"component",attrs:{event:t.content2Obj(a.content)}})]}}])}),n("div",{staticClass:"page"},[t.page?n("Page",{attrs:{current:t.page.index+1,total:t.page.count*t.page.size,"page-size":t.page.size},on:{"on-change":t.onPageChange}}):t._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isContextMenuShown,expression:"isContextMenuShown"}],staticClass:"row-contextmenu ivu-select-dropdown",style:{left:t.contextMenuLeft,top:t.contextMenuTop}},[n("ul",{staticClass:"ivu-dropdown-menu"},[n("li",{staticClass:"ivu-dropdown-item",on:{click:t.onContextMenuShowNotice}},[t._v("Show notice")]),n("li",{staticClass:"ivu-dropdown-item",on:{click:t.onContextMenuShowAll}},[t._v("Show all")])])])],1)},se=[],oe=(n("386d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",[n("span",{staticStyle:{color:"#52c41a","font-weight":"bold","padding-left":"3px","padding-right":"3px"}},[t._v(t._s(t.event.flow.request.method))]),n("span",{staticStyle:{"font-weight":"bold","padding-left":"3px","padding-right":"3px"},style:{color:t.responseCodeColor}},[t._v(t._s(t.event.flow.response.code))]),n("a",{staticStyle:{"font-weight":"bold","padding-left":"3px","padding-right":"3px"},on:{"!click":function(e){return t.openURL(e)}}},[t._v(t._s(t.event.flow.request.scheme)+"://"+t._s(t.event.flow.request.host)+t._s(t.event.flow.request.path))])]),n("div",[n("span",{staticClass:"property_font"},[t._v("Duration: "+t._s(t.duration))]),n("span",{staticClass:"property_font"},[t._v("Size: "+t._s(t.size))])])])}),ce=[],re=function(t){if(0===t)return"0B";var e=["B","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(n))).toFixed(1)+e[n]},le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contextmenu-item",on:{contextmenu:function(e){return e.preventDefault(),t.onContextMenu(e)}}},[n("div",{staticClass:"contextmenu-item-container"},[t._t("default")],2)])},ue=[],de={methods:{onContextMenu:function(t){this.$bus.$emit("contextmenu.show",t)}}},he=de,pe=(n("5465"),Object(h["a"])(he,le,ue,!1,null,null,null)),me=pe.exports,fe={props:["event"],components:{ContextMenuItem:me},computed:{duration:function(){var t=this.event.flow.duration;return t>=1?Math.round(100*t/100)+"s":(1e3*t).toFixed(0)+"ms"},size:function(){var t=this.event.flow.size;return re(t)},responseCodeColor:function(){return this.event.flow.response.code<=399?"#52c41a":"#ed4014"}},methods:{openURL:function(){"GET"===this.event.flow.request.method&&window.open(this.event.flow.request.url,"_blank")}}},ve=fe,ge=(n("27a0"),Object(h["a"])(ve,oe,ce,!1,null,"09affdc8",null)),xe=ge.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",{staticClass:"description"},[t._v(t._s(t.eventDescription))])])},ye=[],we={props:["event"],components:{ContextMenuItem:me},computed:{eventDescription:function(){return this.event.hasOwnProperty("message")?this.event.message:rt()(this.event)}}},ke=we,$e=(n("5811"),Object(h["a"])(ke,be,ye,!1,null,"14c96c95",null)),_e=$e.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContextMenuItem",[n("div",{staticClass:"ivu-tag ivu-tag-checked",staticStyle:{"min-width":"60px","text-align":"center"},style:{background:t.bgColor,color:"#ffffff"}},[n("b",[t._v(t._s(t.channel))])])])},Ie=[],Ce={props:["channel"],components:{ContextMenuItem:me},computed:{bgColor:function(){return"flow"===this.channel?"#0fccbf":"notice"===this.channel?"#ff9900":"snapshot"===this.channel?"#52A7F9":"#808695"}}},Te=Ce,Me=Object(h["a"])(Te,Se,Ie,!1,null,null,null),De=Me.exports,Ee={components:{FlowTableItem:xe,CustomTableItem:_e,ChannelColumn:De,ContextMenuItem:me},created:function(){this.$store.dispatch("loadChannelNames");var t=new URLSearchParams(window.location.search),e=t.get("event_id");this.$store.dispatch("loadEvents",{eventId:e}),this.$bus.$on("contextmenu.show",this.showContextMenu),this.$bus.$on("contextmenu.dismiss",this.dismissContextMenu)},mounted:function(){this.tableRect=this.$refs.eventTable.$el.getBoundingClientRect()},data:function(){return{tableRect:null,isContextMenuShown:!1,contextMenuLeft:0,contextMenuTop:0}},computed:{events:function(){return this.$store.state.event.events},page:function(){return this.$store.state.event.page},channelNames:function(){return this.$store.state.event.channelNames},columns:function(){var t=[],e=!0,n=!1,a=void 0;try{for(var i,s=ht()(this.$store.state.event.channelNames);!(e=(i=s.next()).done);e=!0){var o=i.value;t.push({label:o,value:o})}}catch(c){n=!0,a=c}finally{try{e||null==s.return||s.return()}finally{if(n)throw a}}return[{title:"",slot:"action",width:35},{title:"Time",key:"timestamp",slot:"timestamp",width:90},{title:"Channel",key:"channel",slot:"channel",width:80,filters:t,filteredValue:this.$store.state.event.channelFilters,filterRemote:function(t){this.$store.dispatch("updateChannelFilters",t)}},{title:"Content",key:"content",slot:"content"}]}},methods:{content2Obj:function(t){return JSON.parse(t)},contentComponentName:function(t){var e=JSON.parse(t);return"flow"===e.channel?"FlowTableItem":"CustomTableItem"},onFilterChange:function(t){console.log("filter change",t)},onRowClick:function(t){this.$store.commit("setSelectedEventId",t.event_id);var e=rt()(JSON.parse(t.content),null,2);this.$store.commit("setEventDetail",e),this.isContextMenuShown=!1},ts2String:function(t){var e=new Date(1e3*t),n=e.getHours()+":",a=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return e.getMonth()+1+"-"+e.getDate()+" "+n+a+i},onPageChange:function(t){this.$store.commit("setSelectedEventId",null),this.$store.commit("setEventDetail",""),this.$store.dispatch("loadEvents",{page:t-1})},onAddEvent:function(t){var e=JSON.parse(t.content);e.summary&&this.$bus.$emit("addSummary",e.summary),e.message&&this.$bus.$emit("addMessage",{channel:e.channel,message:e.message,id:e.id,sender:e.sender}),e.snapshot&&this.$bus.$emit("addSnapshot",e),e.attachments&&this.$bus.$emit("addAttachments",e.attachments)},showContextMenu:function(t){var e=this.$refs.eventTable.$el.getBoundingClientRect();this.contextMenuLeft=t.pageX-e.left+"px",this.contextMenuTop=t.pageY-this.tableRect.top+"px",this.isContextMenuShown=!0},dismissContextMenu:function(){this.isContextMenuShown=!1},onContextMenuShowNotice:function(){this.$store.dispatch("showNotice"),this.isContextMenuShown=!1},onContextMenuShowAll:function(){this.$store.dispatch("showAll"),this.isContextMenuShown=!1}}},Fe=Ee,Ae=(n("28fd"),Object(h["a"])(Fe,ie,se,!1,null,null,null)),Oe=Ae.exports,je={components:{EventInspector:Oe,CodeEditor:jt},data:function(){return{detailSplit:.6,scrollRate:0}},created:function(){this.$bus.$on("eventLitScroll",this.setEventContainerScroll)},computed:{eventDetail:{get:function(){return this.$store.state.event.eventDetail},set:function(t){}}},methods:{addDescAttach:function(t){this.channelAddToDesc.indexOf(t.channel)>-1?this.dispatch("addIntoDesc",t.id):this.channelAddToAttach.indexOf(t.channel)>-1&&this.dispatch("addIntoAttach",t.id),this.$Message.error("Add description and attachments have not supported yet!")},timestampToTime:function(t){var e=new Date(1e3*t),n=e.getHours()+":",a=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+a+i},getColunmsFilterItem:function(){return[]},setEventContainerScroll:function(t){var e=this;this.scrollRate=t,setTimeout(function(){var n=e.$refs.eventContainer,a=n.scrollHeight*t;e.$refs.eventContainer.scrollTop=a-n.scrollHeight/20},1)}}},Le=je,Pe=(n("4e6f"),Object(h["a"])(Le,ne,ae,!1,null,"7b55e704",null)),Be=Pe.exports,Re={components:{BugTemplateSelector:m,BugItForm:Ht,BugitDevices:ee,BugitExtra:Be},data:function(){return{metaKey:!1,split:.4}},created:function(){this.$bus.$on("message",this.displayMessage),this.$bus.$on("msg.success",this.successMessage),this.$bus.$on("msg.info",this.infoMessage),this.$bus.$on("msg.error",this.errorMessage)},mounted:function(){document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},methods:{onKeyDown:function(t){"Meta"===t.key?this.metaKey=!0:"s"==t.key&&this.metaKey&&(window.event.preventDefault(),this.$store.dispatch("saveCache"))},onKeyUp:function(t){"Meta"===t.key&&(this.metaKey=!1)},successMessage:function(t){this.$Message.success({content:t,duration:3,closable:!0})},infoMessage:function(t){this.$Message.info({content:t,duration:3,closable:!0})},errorMessage:function(t){this.$Message.error({content:t,duration:0,closable:!0})},displayMessage:function(t){t.hasOwnProperty("code")?1e3===t.code?this.$Message.success({content:t.message,duration:3,closable:!0}):(t.code,this.$Message.error({content:t.message,duration:0,closable:!0})):this.$Message.info({content:t,duration:3,closable:!0})}}},Ne=Re,qe=(n("1df7"),Object(h["a"])(Ne,o,c,!1,null,"440bea07",null)),Ve=qe.exports,ze={name:"app",components:{Bugit:Ve}},Ue=ze,Ke=(n("034f"),Object(h["a"])(Ue,i,s,!1,null,null,null)),Je=Ke.exports,Ye=n("2f62"),Xe=n("bc3a"),He=n.n(Xe),Ge="/plugins/bugit/api",We=function(t){var e=Ge+"/template";return t?He()({url:e,method:"POST",data:{path:t}}):He()({url:e})},Ze=function(){return He()({url:Ge+"/device"})},Qe=function(t){var e="/api/event";return t&&t.hasOwnProperty("channelFilters")&&t.channelFilters.length>0&&(e+="/"+t.channelFilters.join("+")),t&&t.hasOwnProperty("eventId")&&t.eventId?e+="/id/"+t.eventId:t&&t.hasOwnProperty("page")&&t.page&&(e+="/page/"+t.page),He()({url:e})},tn=function(){return He()({url:"/api/channel/default"})},en=function(t,e){return He()({url:Ge+"/attachments/"+t,method:"PUT",data:{imageData:e}})},nn=function(t,e,n,a){return He()({url:Ge+"/issue",method:"POST",data:{template:t,issue:e,attachments:n,snapshots:a}})},an=function(t,e){return He()({url:Ge+"/take_screenshot/"+t+"/"+e})},sn=function(){return He()({url:Ge+"/attachments"})},on=function(t){return He()({url:Ge+"/attachments/"+t,method:"DELETE"})},cn=function(t,e){return He()({url:Ge+"/cache/"+t,method:"POST",data:e})},rn=new a["default"],ln=n("1c46"),un=n.n(ln),dn={state:{templates:[],selectedTemplateIndex:null,templateDetail:null,formInfo:null,ruleValidate:null,formValue:{},attachmentsList:[],snapshotList:[],loadAttachmentCount:0,shownFileName:null,submitLock:!1,loadTemplate:!1,shownFileContent:{code:null,type:null,message:null}},mutations:{setFormData:function(t,e){t.templateDetail[e.index].value=e.value},setTemplates:function(t,e){t.templates=e},setSelectedTemplateIndex:function(t,e){t.selectedTemplateIndex=e},setTemplateDetail:function(t,e){t.templateDetail=e},setSubmitLock:function(t,e){t.submitLock=e},setLoadTemplate:function(t,e){t.loadTemplate=e},updateFormInfo:function(t,e){for(var n in t.metadata)t.metadata[n].key===e&&(t.formInfo=t.metadata[n],t.ruleValidate=t.metadata[n].rules)},updateRuleValidate:function(t,e){t.ruleValidate=e},updateFormValue:function(t,e){t.formValue=e},deleteFormValue:function(t,e){t.formValue={}},updateExtraMsg:function(t,e){t.templateDetail[e.index].extraMsg=e.value},addExtraMsg:function(t,e){var n=e.value;t.templateDetail[e.index].extraMsg.push(n)},deleteExtraMsg:function(t,e){t.templateDetail[e.propsIndex].extraMsg.splice(e.index,1)},updateAttachmentsList:function(t,e){t.attachmentsList=e},addAttachmentsList:function(t,e){t.attachmentsList.push(e)},updateShownFileName:function(t,e){t.shownFileName=e},updateShownFileContent:function(t,e){t.shownFileContent=e},deleteAttachment:function(t,e){t.attachmentsList.splice(e,1)},addSnapshot:function(t,e){var n="snapshot_"+e.id;t.snapshotList.push({name:n,eventObj:e})},deleteSnapshot:function(t,e){t.snapshotList.splice(e,1)}},actions:{loadTemplateList:function(t){var e=t.commit,n=t.dispatch;We().then(function(t){1e3===t.data.code?(e("setSelectedTemplateIndex",t.data.selected_index),e("setTemplates",t.data.templates),n("loadTemplate")):rn.$emit("msg.error",t.data.message)})},loadTemplate:function(t){var e=t.state,n=t.commit;if(null!==e.selectedTemplateIndex){var a=e.templates[e.selectedTemplateIndex].path;n("setTemplateDetail",[]),n("setLoadTemplate",!0),We(a).then(function(t){n("setTemplateDetail",t.data),n("setLoadTemplate",!1)}).catch(function(t){rn.$emit("message",t.data),n("setLoadTemplate",!1)})}},updateSelectedTemplateIndex:function(t,e){var n=t.commit,a=t.dispatch;n("setSelectedTemplateIndex",e),a("loadTemplate")},setExtraMsgUpward:function(t,e){var n=t.state,a=t.commit,i=n.templateDetail[e.propsIndex].extraMsg,s=e.index,o=i[s];i.splice(s,1);for(var c=[],r=0;r<i.length;r++)r===s-1&&c.push(o),c.push(i[r]);a("updateExtraMsg",{index:e.propsIndex,value:c})},saveEditedImage:function(t,e){t.state,t.commit;var n=e.id,a=e.imageData;en(n,a)},submit:function(t){var e=t.state,n=t.commit;rn.$emit("message","Submitting issue ..."),n("setSubmitLock",!0),nn(e.templates[e.selectedTemplateIndex],e.templateDetail,e.attachmentsList,e.snapshotList).then(function(t){rn.$emit("message",t.data),n("setSubmitLock",!1)}).catch(function(t){rn.$emit("message",t.data),n("setSubmitLock",!1)})},loadAttachment:function(t){var e=t.state,n=t.commit;sn().then(function(t){if(n("updateAttachmentsList",t.data),e.attachmentsList.length>0&&e.loadAttachmentCount>0){var a=e.attachmentsList.length-1;rn.$emit("displayAttach",e.attachmentsList[a])}e.loadAttachmentCount+=1})},removeAttachment:function(t,e){var n=t.commit;n("deleteAttachment",e.index),on(e.id)},saveCache:function(t){var e=t.state;if(null!==e.selectedTemplateIndex){var n=e.templates[e.selectedTemplateIndex],a=un.a.createHash("md5");a.update(n.path);var i=a.digest("hex");cn(i,e.templateDetail).then(function(t){1e3===t.data.code?rn.$emit("msg.success","Save as draft, success"):rn.$emit("msg.error","Save draft failed: "+t.message)}).catch(function(t){rn.$emit("msg.error","Can't save as draft"),console.error("Can't save as draft",t)})}}}},hn={state:{channelNames:[],channelFilters:["flow","notice","snapshot"],events:[],selectedEventId:null,eventDetail:"",page:null},mutations:{setChannelNames:function(t,e){t.channelNames=e},setChannelFilters:function(t,e){t.channelFilters=e},setEvents:function(t,e){t.events=e},setSelectedEventId:function(t,e){t.selectedEventId=e},setEventDetail:function(t,e){t.eventDetail=e},setPage:function(t,e){t.page=e}},actions:{loadChannelNames:function(t){var e=t.commit;tn().then(function(t){1e3===t.data.code&&e("setChannelNames",t.data.data)})},loadEvents:function(t){var e=t.state,n=t.commit,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;a.eventId?i=a.eventId:e.selectedEventId&&(i=e.selectedEventId),Qe({channelFilters:e.channelFilters,eventId:i,page:a.page}).then(function(t){if(1e3===t.data.code){var e=t.data.events;if(i){var a=1,s=!0,o=!1,c=void 0;try{for(var r,l=ht()(e);!(s=(r=l.next()).done);s=!0){var u=r.value;if(u.event_id===i){u._highlight=!0;var d=rt()(JSON.parse(u.content),null,2);n("setEventDetail",d),n("setSelectedEventId",u.event_id),rn.$emit("eventLitScroll",a/e.length);break}a++}}catch(h){o=!0,c=h}finally{try{s||null==l.return||l.return()}finally{if(o)throw c}}}n("setEvents",e),n("setPage",{index:t.data.page,count:t.data.page_count,size:t.data.page_size})}})},updateChannelFilters:function(t,e){var n=t.commit,a=t.dispatch;n("setChannelFilters",e),a("loadEvents")},showNotice:function(t){var e=t.dispatch;e("updateChannelFilters",["notice"])},showAll:function(t){var e=t.dispatch;tn().then(function(t){1e3===t.data.code&&e("updateChannelFilters",t.data.data)})}}},pn={state:{},actions:{takeScreenshot:function(t,e){an(e.platform,e.deviceId).then(function(t){console.log("Take screenshot",t),rn.$emit("message",t.data)})}}};a["default"].use(Ye["a"]);var mn=new Ye["a"].Store({modules:{form:dn,event:hn,device:pn},state:{devicesInfo:null},mutations:{updateDevicesInfo:function(t,e){t.devicesInfo=e}},actions:{loadDevices:function(t){var e=t.commit;Ze().then(function(t){e("updateDevicesInfo",t.data)})}}}),fn=n("f825"),vn=n.n(fn),gn=(n("f8ce"),n("3250")),xn=n.n(gn),bn=n("8055"),yn=n.n(bn);a["default"].config.productionTip=!1,a["default"].use(vn.a,{locale:xn.a}),a["default"].use(vn.a),a["default"].prototype["$io"]=yn()(),a["default"].prototype.$bus=rn,new a["default"]({store:mn,render:function(t){return t(Je)}}).$mount("#app")},5811:function(t,e,n){"use strict";var a=n("41ac"),i=n.n(a);i.a},"64a9":function(t,e,n){},"6e42":function(t,e,n){},9705:function(t,e,n){"use strict";var a=n("af43"),i=n.n(a);i.a},"9a9c":function(t,e,n){"use strict";var a=n("bdbd"),i=n.n(a);i.a},adbe:function(t,e,n){"use strict";var a=n("2199"),i=n.n(a);i.a},af43:function(t,e,n){},bdbd:function(t,e,n){},d2c7:function(t,e,n){},d359:function(t,e,n){"use strict";var a=n("0be9"),i=n.n(a);i.a},eac7:function(t,e,n){}});