(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[187],{1966:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(10),a=n.n(r),o=n(11),i=n.n(o),s=n(12),c=n.n(s),l=n(13),u=n.n(l),p=n(7),f=n.n(p),g=n(300),b=n.n(g),d=(n(1),n(1967)),O=n(0);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f()(t);if(e){var a=f()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return u()(this,n)}}var y=function(t){c()(n,t);var e=v(n);function n(){return a()(this,n),e.apply(this,arguments)}return i()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var t=this.getTitle();return Object(O.f)(b.a,{title:"".concat(t?"".concat(t," - "):"","Sentry")},this.renderComponent())}}]),n}(d.a);y.displayName="AsyncView"},1989:function(t,e,n){"use strict";n.d(e,"a",(function(){return Vt})),n.d(e,"b",(function(){return Kt}));var r=n(4),a=n(2),o=n.n(a),i=n(1996),s=n.n(i),c=n(1997),l=n.n(c),u=n(1998),p=n.n(u),f=n(1999),g=n.n(f),b=n(2e3),d=n.n(b),O=n(2001),v=n.n(O),y=n(2002),j=n.n(y),h=n(2003),m=n.n(h),k=n(2004),x=n.n(k),w=n(2005),z=n.n(w),P=n(2006),S=n.n(P),A=n(2007),I=n.n(A),D=n(2008),_=n.n(D),R=n(2009),E=n.n(R),N=n(2010),T=n.n(N),C=n(2011),q=n.n(C),F=n(2012),M=n.n(F),B=n(2013),U=n.n(B),H=n(2014),L=n.n(H),V=n(2015),K=n.n(V),G=n(2016),W=n.n(G),J=n(2017),Y=n.n(J),Q=n(2018),X=n.n(Q),Z=n(2019),$=n.n(Z),tt=n(2020),et=n.n(tt),nt=n(2021),rt=n.n(nt),at=n(2022),ot=n.n(at),it=n(2023),st=n.n(it),ct=n(2024),lt=n.n(ct),ut=n(2025),pt=n.n(ut),ft=n(2026),gt=n.n(ft),bt=n(2027),dt=n.n(bt),Ot=n(2028),vt=n.n(Ot),yt=n(2029),jt=n.n(yt),ht=n(2030),mt=n.n(ht),kt=n(2031),xt=n.n(kt),wt=n(2032),zt=n.n(wt),Pt=n(2033),St=n.n(Pt),At=n(2034),It=n.n(At),Dt=n(2035),_t=n.n(Dt),Rt=n(2036),Et=n.n(Rt),Nt=n(2037),Tt=n.n(Nt),Ct=n(2038),qt=n.n(Ct),Ft=n(2039),Mt=n.n(Ft),Bt=n(2040),Ut=n.n(Bt),Ht=n(2041),Lt=n.n(Ht),Vt=s.a,Kt={_default:Vt,sentry:l.a,browsers:l.a,device:l.a,interface_types:l.a,os:l.a,urls:l.a,webhooks:l.a,"amazon-sqs":v.a,amixr:p.a,asana:g.a,asayer:d.a,bitbucket:j.a,bitbucket_pipelines:j.a,bitbucket_server:m.a,campfire:x.a,clickup:z.a,clubhouse:S.a,datadog:I.a,flowdock:_.a,fullstory:E.a,github:T.a,github_actions:q.a,github_enterprise:M.a,gitlab:U.a,heroku:L.a,jira:K.a,"jira-atlassian-connect":K.a,"jira-ac":K.a,jira_server:W.a,lighthouse:Y.a,linear:X.a,msteams:$.a,netlify:et.a,opsgenie:rt.a,pagerduty:ot.a,phabricator:st.a,pivotal:lt.a,pushover:pt.a,redmine:gt.a,rocketchat:dt.a,rookout:vt.a,segment:jt.a,slack:mt.a,split:xt.a,taiga:zt.a,teamwork:St.a,trello:It.a,twilio:_t.a,visualstudio:Et.a,vsts:Tt.a,youtrack:qt.a,vercel:Mt.a,victorops:Ut.a,zulip:Lt.a},Gt=Object(r.a)("div",{target:"e7e65lm0",label:"PluginIcon"})("position:relative;height:",(function(t){return t.size}),"px;width:",(function(t){return t.size}),"px;border-radius:2px;border:0;display:inline-block;background-size:contain;background-position:center center;background-repeat:no-repeat;background-image:url(",(function(t){var e=t.pluginId;return void 0!==e&&Kt[e]||Vt}),");");Gt.defaultProps={pluginId:"_default",size:20},Gt.propTypes={pluginId:o.a.string,size:o.a.number},e.c=Gt},1996:function(t,e,n){t.exports=n.p+"logo-default.8150ae.svg"},1997:function(t,e,n){t.exports=n.p+"logo-sentry.153773.svg"},1998:function(t,e,n){t.exports=n.p+"logo-amixr.44700c.svg"},1999:function(t,e,n){t.exports=n.p+"logo-asana.4b9761.svg"},2e3:function(t,e,n){t.exports=n.p+"logo-asayer.54bf9f.svg"},2001:function(t,e,n){t.exports=n.p+"logo-aws.4db55a.svg"},2002:function(t,e,n){t.exports=n.p+"logo-bitbucket.e085f1.svg"},2003:function(t,e,n){t.exports=n.p+"logo-bitbucket-server.a96954.svg"},2004:function(t,e,n){t.exports=n.p+"logo-campfire.18b13b.svg"},2005:function(t,e,n){t.exports=n.p+"logo-clickup.09adc7.svg"},2006:function(t,e,n){t.exports=n.p+"logo-clubhouse.3851be.svg"},2007:function(t,e,n){t.exports=n.p+"logo-datadog.31e1a3.svg"},2008:function(t,e,n){t.exports=n.p+"logo-flowdock.c9a31d.svg"},2009:function(t,e,n){t.exports=n.p+"logo-fullstory.b94255.svg"},2010:function(t,e,n){t.exports=n.p+"logo-github.53b0f1.svg"},2011:function(t,e,n){t.exports=n.p+"logo-github-actions.1b3a17.svg"},2012:function(t,e,n){t.exports=n.p+"logo-github-enterprise.c7994c.svg"},2013:function(t,e,n){t.exports=n.p+"logo-gitlab.9e3a4c.svg"},2014:function(t,e,n){t.exports=n.p+"logo-heroku.464159.svg"},2015:function(t,e,n){t.exports=n.p+"logo-jira.e5075f.svg"},2016:function(t,e,n){t.exports=n.p+"logo-jira-server.f8a5de.svg"},2017:function(t,e,n){t.exports=n.p+"logo-lighthouse.ce2190.svg"},2018:function(t,e,n){t.exports=n.p+"logo-linear.ae13a6.svg"},2019:function(t,e,n){t.exports=n.p+"logo-msteams.701683.svg"},2020:function(t,e,n){t.exports=n.p+"logo-netlify.c4ca8e.svg"},2021:function(t,e,n){t.exports=n.p+"logo-opsgenie.d768de.svg"},2022:function(t,e,n){t.exports=n.p+"logo-pagerduty.bc44db.svg"},2023:function(t,e,n){t.exports=n.p+"logo-phabricator.0c74a0.svg"},2024:function(t,e,n){t.exports=n.p+"logo-pivotaltracker.d31ffb.svg"},2025:function(t,e,n){t.exports=n.p+"logo-pushover.18df03.svg"},2026:function(t,e,n){t.exports=n.p+"logo-redmine.f62150.svg"},2027:function(t,e,n){t.exports=n.p+"logo-rocketchat.1f1636.svg"},2028:function(t,e,n){t.exports=n.p+"logo-rookout.4624c8.svg"},2029:function(t,e,n){t.exports=n.p+"logo-segment.0e616d.svg"},2030:function(t,e,n){t.exports=n.p+"logo-slack.895972.svg"},2031:function(t,e,n){t.exports=n.p+"logo-split.ab753a.svg"},2032:function(t,e,n){t.exports=n.p+"logo-taiga.21e125.svg"},2033:function(t,e,n){t.exports=n.p+"logo-teamwork.b3cc63.svg"},2034:function(t,e,n){t.exports=n.p+"logo-trello.eb7a54.svg"},2035:function(t,e,n){t.exports=n.p+"logo-twilio.9ba49d.svg"},2036:function(t,e,n){t.exports=n.p+"logo-visualstudio.b4a03e.svg"},2037:function(t,e,n){t.exports=n.p+"logo-azure.9b9f83.svg"},2038:function(t,e,n){t.exports=n.p+"logo-youtrack.d171d3.svg"},2039:function(t,e,n){t.exports=n.p+"logo-vercel.104c17.svg"},2040:function(t,e,n){t.exports=n.p+"logo-victorops.b62ffa.svg"},2041:function(t,e,n){t.exports=n.p+"logo-zulip.c07c6e.svg"},2093:function(t,e,n){var r=n(694),a=n(1102),o=Object.prototype.hasOwnProperty,i=a((function(t,e,n){o.call(t,n)?t[n].push(e):r(t,n,[e])}));t.exports=i},2116:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n(22),a=n.n(r),o=n(6),i=n.n(o),s=n(29),c=n.n(s),l=n(58);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f=function(){var t=c()(a.a.mark((function t(e,n,r){var o,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new l.a,i="/sentry-apps/".concat(e,"/interaction/"),t.next=4,o.requestPromise(i,{method:"POST",data:p({tsdbField:n},r)});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},2193:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return k}));var r=n(37),a=n.n(r),o=n(27),i=n.n(o),s=n(6),c=n.n(s),l=n(2194),u=n.n(l),p=n(2093),f=n.n(p),g=n(274),b=n.n(g);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){c()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={read:0,write:1,admin:2},y={project:"Project",team:"Team",release:"Release",event:"Event",org:"Organization",member:"Member"},j={Project:"no-access",Team:"no-access",Release:"no-access",Event:"no-access",Organization:"no-access",Member:"no-access"},h=function(t){var e=t.split(":")[1];return v[e]},m=function(t,e){return h(t)-h(e)};function k(t){var e,n=O({},j),r=i()(t);return t.includes("project:releases")&&(n.Release="admin",r=t.filter((function(t){return"project:releases"!==t}))),(e=r,Object.values(f()(e,(function(t){return t.split(":")[0]}))).map((function(t){return t.sort(m)})).map((function(t){return t.pop()}))).forEach((function(t){if(t){var e=t.split(":"),r=a()(e,2),o=r[0],i=r[1];n[y[o]]=i}})),n}function x(t){var e=k(t),n=b()(u()(e),["read","write","admin"]);return O(O({},{read:[],write:[],admin:[]}),n)}},2194:function(t,e,n){var r=n(275),a=n(2195),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,c=a((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=s.call(e)),i.call(t,e)?t[e].push(n):t[e]=[n]}),r);t.exports=c},2195:function(t,e,n){var r=n(2196);t.exports=function(t,e){return function(n,a){return r(n,t,e(a),{})}}},2196:function(t,e,n){var r=n(1103);t.exports=function(t,e,n,a){return r(t,(function(t,r,o){e(a,n(t),r,o)})),a}},2290:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i}));var r=n(32),a=n(3);function o(t,e,n){Object(r.b)();var o=t.requestPromise("/organizations/".concat(e,"/sentry-app-installations/"),{method:"POST",data:{slug:n.slug}});return o.then((function(){return Object(r.e)()}),(function(){return Object(r.a)(Object(a.b)("Unable to install ".concat(n.name)))})),o}function i(t,e){Object(r.b)();var n=t.requestPromise("/sentry-app-installations/".concat(e.uuid,"/"),{method:"DELETE"});return n.then((function(){Object(r.d)(Object(a.b)("".concat(e.app.slug," successfully uninstalled.")))}),(function(){return Object(r.e)()})),n}},3008:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return yt}));var r=n(6),a=n.n(r),o=n(37),i=n.n(o),s=n(22),c=n.n(s),l=n(29),u=n.n(l),p=n(10),f=n.n(p),g=n(11),b=n.n(g),d=n(149),O=n.n(d),v=n(12),y=n.n(v),j=n(13),h=n.n(j),m=n(7),k=n.n(m),x=n(4),w=n(1),z=n.n(w),P=n(32),S=n(79),A=n(2290),I=n(3),D=n(73),_=n(1966),R=n(686),E=n(16),N=n(365),T=n(495),C=n(176),q=n(15),F=n.n(q),M=n(5),B=n.n(M),U=n(411),H=n(31),L=n(1989),V=n(8),K=n(1967),G=n(2076),W=n(421),J=n(2193),Y=n(704),Q=n(2116),X=n(688),Z=n(0);function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var nt=function(t){y()(r,t);var e,n=et(r);function r(){return f()(this,r),n.apply(this,arguments)}return b()(r,[{key:"componentDidUpdate",value:function(t){this.props.organization.id!==t.organization.id&&this.trackOpened()}},{key:"componentDidMount",value:function(){this.trackOpened()}},{key:"trackOpened",value:function(){var t=this.props,e=t.sentryApp,n=t.organization,r=t.isInstalled;Object(Q.a)(e.slug,"sentry_app_viewed"),Object(X.m)({eventKey:"integrations.install_modal_opened",eventName:"Integrations: Install Modal Opened",integration_type:"sentry_app",integration:e.slug,already_installed:r,view:"external_install",integration_status:e.status},n,{startSession:!0})}},{key:"getEndpoints",value:function(){var t=this.props.sentryApp;return[["featureData","/sentry-apps/".concat(t.slug,"/features/")]]}},{key:"featureTags",value:function(t){return t.map((function(t){var e=t.featureGate.replace(/integrations/g,"");return Object(Z.f)(lt,{key:e},e.replace(/-/g," "))}))}},{key:"onInstall",value:(e=u()(c.a.mark((function t(){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.onInstall,t.prev=1,t.next=4,e();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(){return e.apply(this,arguments)})},{key:"renderPermissions",value:function(){var t=this.permissions;return 0===Object.keys(t).filter((function(e){return t[e].length>0})).length?null:Object(Z.f)(z.a.Fragment,null,Object(Z.f)(gt,null,"Permissions"),t.read.length>0&&Object(Z.f)(pt,null,Object(Z.f)(bt,null),Object(Z.f)(ut,{key:"read"},Object(I.c)("[read] access to [resources] resources",{read:Object(Z.f)("strong",null,"Read"),resources:t.read.join(", ")}))),t.write.length>0&&Object(Z.f)(pt,null,Object(Z.f)(bt,null),Object(Z.f)(ut,{key:"write"},Object(I.c)("[read] and [write] access to [resources] resources",{read:Object(Z.f)("strong",null,"Read"),write:Object(Z.f)("strong",null,"Write"),resources:t.write.join(", ")}))),t.admin.length>0&&Object(Z.f)(pt,null,Object(Z.f)(bt,null),Object(Z.f)(ut,{key:"admin"},Object(I.c)("[admin] access to [resources] resources",{admin:Object(Z.f)("strong",null,"Admin"),resources:t.admin.join(", ")}))))}},{key:"renderBody",value:function(){var t=this,e=this.props,n=e.sentryApp,r=e.closeModal,a=e.isInstalled,o=e.organization,i=(this.state.featureData||[]).map((function(t){return{featureGate:t.featureGate,description:Object(Z.f)("span",{dangerouslySetInnerHTML:{__html:Object(G.b)(t.description)}})}})),s=Object(X.d)(),c=s.FeatureList,l=s.IntegrationFeatures,u=n.overview||"",p={organization:o,features:i};return Object(Z.f)(z.a.Fragment,null,Object(Z.f)(rt,null,Object(Z.f)(L.c,{pluginId:n.slug,size:50}),Object(Z.f)(at,null,Object(Z.f)(ot,null,n.name),Object(Z.f)("div",null,i.length&&this.featureTags(i)))),Object(Z.f)(it,{dangerouslySetInnerHTML:{__html:Object(G.a)(u)}}),Object(Z.f)(c,B()({},p,{provider:tt(tt({},n),{},{key:n.slug})})),Object(Z.f)(l,p,(function(e){var i=e.disabled,s=e.disabledReason;return Object(Z.f)(z.a.Fragment,null,!i&&t.renderPermissions(),Object(Z.f)(ft,null,Object(Z.f)(st,null,Object(I.b)("Authored By %s",n.author)),Object(Z.f)("div",null,i&&Object(Z.f)(ct,{reason:s}),Object(Z.f)(H.a,{size:"small",onClick:r},Object(I.b)("Cancel")),Object(Z.f)(U.a,{organization:o,access:["org:integrations"]},(function(e){return e.hasAccess&&Object(Z.f)(H.a,{size:"small",priority:"primary",disabled:a||i,onClick:function(){return t.onInstall()},style:{marginLeft:Object(V.a)(1)},"data-test-id":"install"},Object(I.b)("Accept & Install"))})))))})))}},{key:"permissions",get:function(){return Object(J.a)(this.props.sentryApp.scopes)}}]),r}(K.a),rt=Object(x.a)("div",{target:"e1lk8kr50",label:"Heading"})("display:grid;grid-template-columns:max-content 1fr;grid-gap:",Object(V.a)(1),";align-items:center;margin-bottom:",Object(V.a)(2),";"),at=Object(x.a)("div",{target:"e1lk8kr51",label:"HeadingInfo"})("display:grid;grid-template-rows:max-content max-content;grid-gap:",Object(V.a)(.5),";align-items:start;"),ot=Object(x.a)("div",{target:"e1lk8kr52",label:"Name"})({name:"11ie7hh",styles:"font-weight:bold;font-size:1.4em;"}),it=Object(x.a)("div",{target:"e1lk8kr53",label:"Description"})("font-size:1.5rem;line-height:2.1rem;margin-bottom:",Object(V.a)(2),";li{margin-bottom:6px;}"),st=Object(x.a)("div",{target:"e1lk8kr54",label:"Author"})("color:",(function(t){return t.theme.gray300}),";"),ct=Object(x.a)((function(t){var e=t.reason,n=F()(t,["reason"]);return Object(Z.f)("div",n,Object(Z.f)(E.B,{color:"red300",size:"1.5em"}),e)}),{target:"e1lk8kr55",label:"DisabledNotice"})("display:grid;align-items:center;flex:1;grid-template-columns:max-content 1fr;color:",(function(t){return t.theme.red300}),";font-size:0.9em;"),lt=Object(x.a)(W.a,{target:"e1lk8kr56",label:"StyledTag"})("&:not(:first-child){margin-left:",Object(V.a)(.5),";}"),ut=Object(x.a)("p",{target:"e1lk8kr57",label:"Text"})({name:"1y1i75n",styles:"margin:0px 6px;"}),pt=Object(x.a)("div",{target:"e1lk8kr58",label:"Permission"})({name:"k008qs",styles:"display:flex;"}),ft=Object(x.a)("div",{target:"e1lk8kr59",label:"Footer"})({name:"117qhvk",styles:"display:flex;padding:20px 30px;border-top:1px solid #e2dee6;margin:20px -30px -30px;justify-content:space-between;"}),gt=Object(x.a)("p",{target:"e1lk8kr510",label:"Title"})("margin-bottom:",Object(V.a)(1),";font-weight:bold;"),bt=Object(x.a)((function(t){return Object(Z.f)(Y.a,B()({size:7},t))}),{target:"e1lk8kr511",label:"Indicator"})("margin-top:7px;color:",(function(t){return t.theme.success}),";");function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k()(t);if(e){var a=k()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h()(this,n)}}var yt=function(t){y()(n,t);var e=vt(n);function n(){var t;f()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).hasAccess=function(t){return t.access.includes("org:integrations")},t.onClose=function(){var e=t.state.selectedOrgSlug,n=document.referrer||"/settings/".concat(e,"/integrations/");window.location.assign(n)},t.onInstall=u()(c.a.mark((function e(){var n,r,a,o,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state,r=n.organization,a=n.sentryApp,r&&a){e.next=3;break}return e.abrupt("return",void 0);case 3:return Object(X.m)({eventKey:"integrations.installation_start",eventName:"Integrations: Installation Start",integration_type:"sentry_app",integration:a.slug,view:"external_install",integration_status:a.status},r),e.next=6,Object(A.a)(t.api,r.slug,a);case 6:if("installed"===(o=e.sent).status&&Object(X.m)({eventKey:"integrations.installation_complete",eventName:"Integrations: Installation Complete",integration_type:"sentry_app",integration:a.slug,view:"external_install",integration_status:a.status},r),!a.redirectUrl){e.next=12;break}return i={installationId:o.uuid,code:o.code,orgSlug:r.slug},s=Object(S.a)(a.redirectUrl,i),e.abrupt("return",window.location.assign(s));case 12:return e.abrupt("return",t.onClose());case 13:case"end":return e.stop()}}),e)}))),t.onSelectOrg=function(){var e=u()(c.a.mark((function e(n){var r,a,o,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({selectedOrgSlug:n,reloading:!0}),e.prev=1,e.next=4,Promise.all([t.api.requestPromise("/organizations/".concat(n,"/")),t.api.requestPromise("/organizations/".concat(n,"/sentry-app-installations/"))]);case 4:r=e.sent,a=i()(r,2),o=a[0],s=a[1],l=s.map((function(t){return t.app.slug})).includes(t.sentryAppSlug),t.setState({organization:o,isInstalled:l,reloading:!1}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),Object(P.a)(Object(I.b)("Failed to retrieve organization or integration details")),t.setState({reloading:!1});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),t.onRequestSuccess=function(e){var n=e.stateKey,r=e.data;"organizations"===n&&1===r.length&&t.onSelectOrg(r[0].slug)},t}return b()(n,[{key:"getDefaultState",value:function(){return Ot(Ot({},O()(k()(n.prototype),"getDefaultState",this).call(this)),{},{selectedOrgSlug:null,organization:null,organizations:[],reloading:!1})}},{key:"getEndpoints",value:function(){return[["organizations","/organizations/"],["sentryApp","/sentry-apps/".concat(this.sentryAppSlug,"/")]]}},{key:"getTitle",value:function(){return Object(I.b)("Choose Installation Organization")}},{key:"getOptions",value:function(){return this.state.organizations.map((function(t){return[t.slug,Object(Z.f)("div",{key:t.slug},Object(Z.f)(T.a,{organization:t}),Object(Z.f)(ht,null,t.slug))]}))}},{key:"renderInternalAppError",value:function(){var t=this.state.sentryApp;return Object(Z.f)(D.b,{type:"error",icon:Object(Z.f)(E.B,{size:"md"})},Object(I.c)("Integration [sentryAppName] is an internal integration. Internal integrations are automatically installed",{sentryAppName:Object(Z.f)("strong",null,t.name)}))}},{key:"checkAndRenderError",value:function(){var t=this.state,e=t.organization,n=t.selectedOrgSlug,r=t.isInstalled,a=t.sentryApp;if(n&&e&&!this.hasAccess(e))return Object(Z.f)(D.b,{type:"error",icon:Object(Z.f)(E.B,{size:"md"})},Object(Z.f)("p",null,Object(I.c)("You do not have permission to install integrations in\n          [organization]. Ask an organization owner or manager to\n          visit this page to finish installing this integration.",{organization:Object(Z.f)("strong",null,e.slug)})),Object(Z.f)(jt,null,window.location.href));if(r&&e)return Object(Z.f)(D.b,{type:"error",icon:Object(Z.f)(E.B,{size:"md"})},Object(I.c)("Integration [sentryAppName] already installed for [organization]",{organization:Object(Z.f)("strong",null,e.name),sentryAppName:Object(Z.f)("strong",null,a.name)}));if(this.isSentryAppUnavailableForOrg){var o,i,s=null!==(o=null==a?void 0:null===(i=a.owner)||void 0===i?void 0:i.slug)&&void 0!==o?o:"another organization";return Object(Z.f)(D.b,{type:"error",icon:Object(Z.f)(E.B,{size:"md"})},Object(I.c)("Integration [sentryAppName] is an unpublished integration for [otherOrg]. An unpublished integration can only be installed on the organization which created it.",{sentryAppName:Object(Z.f)("strong",null,a.name),otherOrg:Object(Z.f)("strong",null,s)}))}return null}},{key:"renderMultiOrgView",value:function(){var t=this,e=this.state,n=e.selectedOrgSlug,r=e.sentryApp;return Object(Z.f)("div",null,Object(Z.f)("p",null,Object(I.c)("Please pick a specific [organization:organization] to install [sentryAppName]",{organization:Object(Z.f)("strong",null),sentryAppName:Object(Z.f)("strong",null,r.name)})),Object(Z.f)(R.a,{label:Object(I.b)("Organization"),inline:!1,stacked:!0,required:!0},(function(){return Object(Z.f)(C.a,{deprecatedSelectControl:!0,onChange:function(e){var n=e.value;return t.onSelectOrg(n)},value:n,placeholder:Object(I.b)("Select an organization"),choices:t.getOptions()})})))}},{key:"renderSingleOrgView",value:function(){var t=this.state,e=t.organizations,n=t.sentryApp,r=e[0].name;return Object(Z.f)("div",null,Object(Z.f)("p",null,Object(I.c)("You are installing [sentryAppName] for organization [organization]",{organization:Object(Z.f)("strong",null,r),sentryAppName:Object(Z.f)("strong",null,n.name)})))}},{key:"renderMainContent",value:function(){var t=this.state,e=t.organization,n=t.sentryApp;return Object(Z.f)("div",null,Object(Z.f)(kt,null,this.isSingleOrg?this.renderSingleOrgView():this.renderMultiOrgView()),this.checkAndRenderError(),e&&Object(Z.f)(nt,{sentryApp:n,organization:e,onInstall:this.onInstall,closeModal:this.onClose,isInstalled:this.disableInstall}))}},{key:"renderBody",value:function(){return Object(Z.f)(N.a,null,Object(Z.f)(mt,null,Object(Z.f)("h3",null,Object(I.b)("Finish integration installation")),this.isSentryAppInternal?this.renderInternalAppError():this.renderMainContent()))}},{key:"sentryAppSlug",get:function(){return this.props.params.sentryAppSlug}},{key:"isSingleOrg",get:function(){return 1===this.state.organizations.length}},{key:"isSentryAppInternal",get:function(){var t=this.state.sentryApp;return t&&"internal"===t.status}},{key:"isSentryAppUnavailableForOrg",get:function(){var t,e=this.state,n=e.sentryApp,r=e.selectedOrgSlug;return r&&(null==n?void 0:null===(t=n.owner)||void 0===t?void 0:t.slug)!==r&&"unpublished"===n.status}},{key:"disableInstall",get:function(){var t=this.state,e=t.reloading;return t.isInstalled||e||this.isSentryAppUnavailableForOrg}}]),n}(_.a),jt=Object(x.a)("pre",{target:"eixfyet0",label:"InstallLink"})({name:"1y327hp",styles:"margin-bottom:0;background:#fbe3e1;"}),ht=Object(x.a)("span",{target:"eixfyet1",label:"OrgNameHolder"})({name:"o5uqvq",styles:"margin-left:5px;"}),mt=Object(x.a)("div",{target:"eixfyet2",label:"Content"})({name:"10ib5jr",styles:"margin-bottom:40px;"}),kt=Object(x.a)("div",{target:"eixfyet3",label:"OrgViewHolder"})({name:"uewl2b",styles:"margin-bottom:20px;"})}}]);
//# sourceMappingURL=SentryAppExternalInstallation.js.map