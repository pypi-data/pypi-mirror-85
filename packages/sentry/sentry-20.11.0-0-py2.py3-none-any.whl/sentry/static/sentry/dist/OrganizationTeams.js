(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[133],{1968:function(t,e,n){"use strict";var a=n(15),r=n.n(a),c=n(10),o=n.n(c),i=n(11),s=n.n(i),u=n(12),l=n.n(u),f=n(13),m=n.n(f),d=n(7),b=n.n(d),g=n(4),p=n(1),j=n.n(p),O=n(8),h=n(239),v=n(0);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=b()(t);if(e){var r=b()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var T=function(t){l()(n,t);var e=y(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var t=this.props,e=t.icon,n=t.title,a=t.action,c=t.tabs,o=t.noTitleStyles,i=r()(t,["icon","title","action","tabs","noTitleStyles"]);return Object(v.f)("div",i,Object(v.f)(I,null,e&&Object(v.f)(S,null,e),n&&Object(v.f)(z,{tabs:c,styled:o},Object(v.f)(h.a,null,n)),a&&Object(v.f)(w,{tabs:c},a)),c&&Object(v.f)("div",null,c))}}]),n}(j.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var I=Object(g.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),z=Object(g.a)("div",{target:"e1uay4fd1",label:"Title"})((function(t){return!t.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(t){return t.tabs?"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(2)," 0"):"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(4)," 0")}),";flex:1;"),S=Object(g.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(O.a)(1),";"),w=Object(g.a)("div",{target:"e1uay4fd3",label:"Action"})((function(t){return t.tabs?"margin-top: ".concat(Object(O.a)(2)):null}),";"),k=Object(g.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(O.a)(4),";");e.a=k},1971:function(t,e,n){"use strict";n(1);var a=n(300),r=n.n(a),c=n(0),o=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(c.f)(r.a,{title:e},t.children)};o.displayName="SentryDocumentTitle",e.a=o},1981:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(689),r=n.n(a),c=n(536);function o(t,e){var n,a,o,i,s=e.routes,u=e.params,l=e.location,f=e.stepBack,m=s.map((function(t){return t.path||""}));"string"!=typeof t?(i=s.indexOf(t)+1,o=r()(m.slice(0,i),(function(t){return"/"===t[0]}))):o=r()(m,(function(t){return"/"===t[0]}));var d=m.slice(o,i);void 0!==f&&(d=d.slice(0,f));var b=null!==(n=null==l?void 0:l.search)&&void 0!==n?n:"",g=null!==(a=null==l?void 0:l.hash)&&void 0!==a?a:"",p="".concat(d.join("")).concat("string"!=typeof t?"":t).concat(b).concat(g);return Object(c.a)(p,u)}},2079:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"g",(function(){return l})),n.d(e,"f",(function(){return f})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return b})),n.d(e,"e",(function(){return g}));var a=n(144),r=n(3),c=n(32),o=n(161),i=n(55),s=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];i.a.apply(void 0,[t[e]].concat(a))};function u(t,e,n){return a.a.fetchDetails(e.teamId),t.request("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{success:function(t){a.a.fetchDetailsSuccess(e.teamId,t),s(n,"success",t)},error:function(t){a.a.fetchDetailsError(e.teamId,t),s(n,"error",t)}})}function l(t,e){a.a.updateSuccess(t,e)}function f(t,e,n){var r="/teams/".concat(e.orgId,"/").concat(e.teamId,"/");return a.a.update(e.teamId,e.data),t.request(r,{method:"PUT",data:e.data,success:function(t){l(e.teamId,t),s(n,"success",t)},error:function(t){a.a.updateError(e.teamId,t),s(n,"error",t)}})}function m(t,e,n){var r,c="/organizations/".concat(e.orgId,"/members/").concat(null!==(r=e.memberId)&&void 0!==r?r:"me","/teams/").concat(e.teamId,"/"),i=Object(o.a)();return a.a.update(i,e.teamId),t.request(c,{method:"POST",success:function(t){a.a.updateSuccess(e.teamId,t),s(n,"success",t)},error:function(t){a.a.updateError(i,e.teamId,t),s(n,"error",t)}})}function d(t,e,n){var r="/organizations/".concat(e.orgId,"/members/").concat(e.memberId||"me","/teams/").concat(e.teamId,"/"),c=Object(o.a)();return a.a.update(c,e.teamId),t.request(r,{method:"DELETE",success:function(t){a.a.updateSuccess(e.teamId,t),s(n,"success",t)},error:function(t){a.a.updateError(c,e.teamId,t),s(n,"error",t)}})}function b(t,e,n){return a.a.createTeam(e),t.requestPromise("/organizations/".concat(n.orgId,"/teams/"),{method:"POST",data:e}).then((function(t){return a.a.createTeamSuccess(t),Object(c.d)(Object(r.c)("[team] has been added to the [organization] organization",{team:"#".concat(t.slug),organization:n.orgId})),t}),(function(t){throw a.a.createTeamError(e.slug,t),Object(c.a)(Object(r.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(e.slug),organization:n.orgId})),t}))}function g(t,e){return a.a.removeTeam(e.teamId),t.requestPromise("/teams/".concat(e.orgId,"/").concat(e.teamId,"/"),{method:"DELETE"}).then((function(t){return a.a.removeTeamSuccess(e.teamId,t),Object(c.d)(Object(r.c)("[team] has been removed from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}),(function(t){throw a.a.removeTeamError(e.teamId,t),Object(c.a)(Object(r.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(e.teamId),organization:e.orgId})),t}))}},2969:function(t,e,n){"use strict";n.r(e),n.d(e,"OrganizationTeamsContainer",(function(){return ot}));var a=n(5),r=n.n(a),c=n(1),o=n.n(c),i=n(25),s=n.n(i),u=n(34),l=n.n(u),f=n(422),m=n(28),d=n(134),b=n(310),g=n(54),p=n(59),j=n(10),O=n.n(j),h=n(11),v=n.n(h),y=n(12),T=n.n(y),I=n(13),z=n.n(I),S=n(7),w=n.n(S),k=n(100),L=n(1971),P=n(3),R=n(31),C=n(185),x=n(1968),q=n(1981),M=n(16),A=n(4),D=n(683),E=n(680),N=n(22),U=n.n(N),Y=n(29),J=n.n(Y),B=n(9),W=n(32),H=n(2079),F=n(306),G=n(8),K=n(0);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return z()(this,n)}}var V=function(t){T()(n,t);var e=Q(n);function n(){var t;O()(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={loading:!1,error:!1},t.handleRequestAccess=J()(U.a.mark((function e(){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.props.team;try{t.joinTeam({successMessage:Object(P.c)("You have requested access to [team]",{team:"#".concat(n.slug)}),errorMessage:Object(P.c)("Unable to request access to [team]",{team:"#".concat(n.slug)})})}catch(t){}case 2:case"end":return e.stop()}}),e)}))),t.handleJoinTeam=function(){var e=t.props.team;t.joinTeam({successMessage:Object(P.c)("You have joined [team]",{team:"#".concat(e.slug)}),errorMessage:Object(P.c)("Unable to join [team]",{team:"#".concat(e.slug)})})},t.joinTeam=function(e){var n=e.successMessage,a=e.errorMessage,r=t.props,c=r.api,o=r.organization,i=r.team;return t.setState({loading:!0}),new Promise((function(e,r){return Object(H.c)(c,{orgId:o.slug,teamId:i.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(W.d)(n),e()},error:function(){t.setState({loading:!1,error:!0}),Object(W.a)(a),r(new Error("Unable to join team"))}})}))},t.handleLeaveTeam=function(){var e=t.props,n=e.api,a=e.organization,r=e.team;t.setState({loading:!0}),Object(H.d)(n,{orgId:a.slug,teamId:r.slug},{success:function(){t.setState({loading:!1,error:!1}),Object(W.d)(Object(P.c)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){t.setState({loading:!1,error:!0}),Object(W.a)(Object(P.c)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},t}return v()(n,[{key:"render",value:function(){var t=this.props,e=t.team,n=t.urlPrefix,a=t.openMembership,r=Object(K.f)(F.a,{team:e,avatarSize:36,description:Object(P.d)("%s Member","%s Members",e.memberCount)}),c=e.hasAccess;return Object(K.f)($,null,Object(K.f)(tt,null,c?Object(K.f)(X,{to:"".concat(n,"teams/").concat(e.slug,"/")},r):r),Object(K.f)(_,null,this.state.loading?Object(K.f)(R.a,{size:"small",disabled:!0},"..."):e.isMember?Object(K.f)(R.a,{size:"small",onClick:this.handleLeaveTeam},Object(P.b)("Leave Team")):e.isPending?Object(K.f)(R.a,{size:"small",disabled:!0},Object(P.b)("Request Pending")):a?Object(K.f)(R.a,{size:"small",onClick:this.handleJoinTeam},Object(P.b)("Join Team")):Object(K.f)(R.a,{size:"small",onClick:this.handleRequestAccess},Object(P.b)("Request Access"))))}}]),n}(o.a.Component);V.displayName="AllTeamsRow";var X=Object(A.a)(B.Link,{target:"ekr4bwh0",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",Object(G.a)(1),";padding:",Object(G.a)(1),";background:#f2eff5;border-radius:3px;outline:none;}"),Z=Object(g.a)(V),$=Object(A.a)(C.f,{target:"ekr4bwh1",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),_=Object(A.a)("div",{target:"ekr4bwh2",label:"Spacer"})("padding:",Object(G.a)(2),";"),tt=Object(A.a)(_,{target:"ekr4bwh3",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"}),et=function(t){var e=t.organization,n=t.urlPrefix,a=t.openMembership,r=t.teamList,c=t.access,o=r.map((function(t){return Object(K.f)(Z,{urlPrefix:n,access:c,team:t,organization:e,openMembership:a,key:t.slug})}));if(!o.length){var i=c.has("project:admin");return Object(K.f)(E.a,null,Object(P.c)("No teams here. [teamCreate]",{root:Object(K.f)(D.a,{noMargin:!0}),teamCreate:i?Object(P.c)("You can always [link:create one].",{link:Object(K.f)(nt,{priority:"link",onClick:function(){return Object(k.d)({organization:e})}})}):null}))}return o},nt=Object(A.a)(R.a,{target:"e3ug7hf0",label:"StyledButton"})("font-size:",(function(t){return t.theme.fontSizeLarge}),";");function at(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=w()(t);if(e){var r=w()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return z()(this,n)}}var rt=function(t){T()(n,t);var e=at(n);function n(){return O()(this,n),e.apply(this,arguments)}return v()(n,[{key:"render",value:function(){var t=this.props,e=t.allTeams,n=t.activeTeams,a=t.organization,r=t.access,c=t.features,o=t.routes,i=t.params,s=a;if(!a)return null;var u=r.has("project:admin"),l=Object(K.f)(R.a,{priority:"primary",size:"small",disabled:!u,title:u?void 0:Object(P.b)("You do not have permission to create teams"),onClick:function(){return Object(k.d)({organization:a})},icon:Object(K.f)(M.b,{size:"xs",isCircled:!0})},Object(P.b)("Create Team")),f=o.find((function(t){return"teams/"===t.path})),m=Object(q.a)(f,{routes:o,params:i,stepBack:-2}),d=new Set(n.map((function(t){return t.id}))),b=e.filter((function(t){return!d.has(t.id)})),g=Object(P.b)("Teams");return Object(K.f)("div",{"data-test-id":"team-list"},Object(K.f)(L.a,{title:g,objSlug:a.slug}),Object(K.f)(x.a,{title:g,action:l}),Object(K.f)(C.a,null,Object(K.f)(C.e,null,Object(P.b)("Your Teams")),Object(K.f)(C.c,null,Object(K.f)(et,{urlPrefix:m,organization:s,teamList:n,access:r,openMembership:!1}))),Object(K.f)(C.a,null,Object(K.f)(C.e,null,Object(P.b)("Other Teams")),Object(K.f)(C.c,null,Object(K.f)(et,{urlPrefix:m,organization:s,teamList:b,access:r,openMembership:!(!c.has("open-membership")&&!r.has("org:write"))}))))}}]),n}(o.a.Component);rt.displayName="OrganizationTeams";var ct=rt,ot=l()({displayName:"OrganizationTeamsContainer",mixins:[s.a.listenTo(b.a,"onTeamListChange"),s.a.listenTo(d.a,"onProjectListChange")],getInitialState:function(){return{teamList:Object(m.t)(b.a.getAll(),(function(t){return t&&t.name})),projectList:Object(m.t)(d.a.getAll(),(function(t){return t&&t.name})),projectStats:{}}},componentDidMount:function(){this.fetchStats()},fetchStats:function(){Object(f.f)(this.props.api,{orgId:this.props.params.orgId,query:{since:(new Date).getTime()/1e3-86400,stat:"generated",group:"project"}})},onTeamListChange:function(){var t=b.a.getAll();this.setState({teamList:Object(m.t)(t,(function(t){return t.name}))})},onProjectListChange:function(){var t=d.a.getAll();this.setState({projectList:Object(m.t)(t,(function(t){return t.name}))})},render:function(){var t=this.props.organization;if(!t)return null;var e=this.state.teamList,n=this.state.teamList.filter((function(t){return t.isMember}));return Object(K.f)(ct,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,projectList:this.state.projectList,allTeams:e,activeTeams:n}))}});e.default=Object(g.a)(Object(p.a)(ot))}}]);
//# sourceMappingURL=OrganizationTeams.js.map