{"version":3,"sources":["webpack:///./app/views/alerts/builder/projectProvider.tsx"],"names":["AlertBuilderProjectProvider","props","children","params","organization","api","other","projectId","orgId","slug","slugs","projects","initiallyLoaded","isIncomplete","type","t","project","fetchOrgMembers","Number","id","Fragment","React","isValidElement","cloneElement","withApi"],"mappings":"ixBAuBA,SAASA,EAA4BC,GAAc,IAC1CC,EAAiDD,EAAjDC,SAAUC,EAAuCF,EAAvCE,OAAQC,EAA+BH,EAA/BG,aAAcC,EAAiBJ,EAAjBI,IAAQC,EADE,IACOL,EADP,4CAE1CM,EAAaJ,EAAbI,UACP,OACE,YAAC,IAAD,CAAUC,MAAOJ,EAAaK,KAAMC,MAAO,CAACH,KACzC,YAA+C,IAA7CI,EAA6C,EAA7CA,SAAUC,EAAmC,EAAnCA,gBAAiBC,EAAkB,EAAlBA,aAC5B,IAAKD,EACH,OAAO,YAAC,UAAD,MAGT,GAAIC,EACF,OACE,YAAC,IAAD,CAAOC,KAAK,WACTC,YAAE,oDAIT,IAAMC,EAAUL,EAAS,GAKzB,OAFAM,YAAgBZ,EAAKD,EAAaK,KAAM,CAACS,OAAOF,EAAQG,MAGtD,YAAC,IAAMC,SAAP,KACGlB,GAAYmB,IAAMC,eAAepB,GAC9BmB,IAAME,aAAarB,EAAnB,SACKI,GACAJ,EAASD,OAFd,IAGEe,UACAZ,kBAEFF,MA/BPF,E,0CAuCMwB,sBAAQxB","file":"AlertsProjectProvider.js","sourcesContent":["import React from 'react';\nimport {RouteComponentProps} from 'react-router/lib/Router';\n\nimport {Client} from 'app/api';\nimport {Organization, Project} from 'app/types';\nimport {t} from 'app/locale';\nimport {fetchOrgMembers} from 'app/actionCreators/members';\nimport Alert from 'app/components/alert';\nimport LoadingIndicator from 'app/components/loadingIndicator';\nimport Projects from 'app/utils/projects';\nimport withApi from 'app/utils/withApi';\n\ntype Props = RouteComponentProps<RouteParams, {}> & {\n  organization: Organization;\n  api: Client;\n  children?: React.ReactNode;\n  hasMetricAlerts: boolean;\n};\n\ntype RouteParams = {\n  projectId: string;\n};\n\nfunction AlertBuilderProjectProvider(props: Props) {\n  const {children, params, organization, api, ...other} = props;\n  const {projectId} = params;\n  return (\n    <Projects orgId={organization.slug} slugs={[projectId]}>\n      {({projects, initiallyLoaded, isIncomplete}) => {\n        if (!initiallyLoaded) {\n          return <LoadingIndicator />;\n        }\n        // if loaded, but project fetching states incomplete, project doesn't exist\n        if (isIncomplete) {\n          return (\n            <Alert type=\"warning\">\n              {t('The project you were looking for was not found.')}\n            </Alert>\n          );\n        }\n        const project = projects[0] as Project;\n\n        // fetch members list for mail action fields\n        fetchOrgMembers(api, organization.slug, [Number(project.id)]);\n\n        return (\n          <React.Fragment>\n            {children && React.isValidElement(children)\n              ? React.cloneElement(children, {\n                  ...other,\n                  ...children.props,\n                  project,\n                  organization,\n                })\n              : children}\n          </React.Fragment>\n        );\n      }}\n    </Projects>\n  );\n}\n\nexport default withApi(AlertBuilderProjectProvider);\n"],"sourceRoot":""}