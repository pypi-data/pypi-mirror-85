(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[90],{2052:function(t,e,n){"use strict";n(1);var r=n(28),a=n(186),c=n(0);function o(t){var e=t.className,n=t.bytes;return Object(c.f)("span",{className:e},Object(a.a)({value:Object(r.j)(n),fixed:"xx KB"}))}o.displayName="FileSize",e.a=o},2074:function(t,e,n){"use strict";var r=n(10),a=n.n(r),c=n(11),o=n.n(c),i=n(12),u=n.n(i),l=n(13),s=n.n(l),f=n(7),p=n.n(f),d=n(1),b=n.n(d),h=n(35),y=n(59),v=n(240);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s()(this,n)}}var j=function(t){u()(n,t);var e=O(n);function n(){return a()(this,n),e.apply(this,arguments)}return o()(n,[{key:"hasRole",value:function(){var t,e=h.default.get("user"),n=this.props,r=n.organization,a=n.role,c=r.availableRoles,o=null!==(t=r.role)&&void 0!==t?t:"";if(!e)return!1;if(e.isSuperuser)return!0;if(!Array.isArray(c))return!1;var i=c.map((function(t){return t.id}));if(!i.includes(a)||!i.includes(o))return!1;var u=i.indexOf(a);return i.indexOf(o)>=u}},{key:"render",value:function(){var t=this.props.children,e=this.hasRole();return Object(v.a)(t)?t({hasRole:e}):e&&t?t:null}}]),n}(b.a.Component);j.displayName="Role",e.a=Object(y.a)(j)},2108:function(t,e,n){var r=n(308),a=n(179);t.exports=function(t){return a(t)&&r(t)}},2145:function(t,e,n){"use strict";var r=n(10),a=n.n(r),c=n(11),o=n.n(c),i=n(12),u=n.n(i),l=n(13),s=n.n(l),f=n(7),p=n.n(f),d=n(1),b=n.n(d),h=n(59),y=n(2074),v=n(0);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p()(t);if(e){var a=p()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s()(this,n)}}var j=function(t){u()(n,t);var e=O(n);function n(){return a()(this,n),e.apply(this,arguments)}return o()(n,[{key:"getDownloadUrl",value:function(){var t=this.props,e=t.attachment,n=t.organization,r=t.eventId,a=t.projectId;return"/api/0/projects/".concat(n.slug,"/").concat(a,"/events/").concat(r,"/attachments/").concat(e.id,"/")}},{key:"render",value:function(){var t=this,e=this.props,n=e.children,r=e.organization;return Object(v.f)(y.a,{role:r.attachmentsRole},(function(e){var r=e.hasRole;return n(r?t.getDownloadUrl():null)}))}}]),n}(b.a.PureComponent);j.displayName="AttachmentUrl",e.a=Object(h.a)(j)},2199:function(t,e,n){"use strict";var r=n(22),a=n.n(r),c=n(29),o=n.n(c),i=n(10),u=n.n(i),l=n(11),s=n.n(l),f=n(12),p=n.n(f),d=n(13),b=n.n(d),h=n(7),y=n.n(h),v=n(4),O=n(1),j=n.n(O),m=n(3),g=n(31),D=n(8),R=n(197),w=n(16),I=n(54),A=n(0);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var P=function(t){p()(n,t);var e=x(n);function n(){var t;u()(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(t=e.call.apply(e,[this].concat(c))).handleDelete=o()(a.a.mark((function e(){var n,r,c,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.api,c=n.url,o=n.onDelete,i=n.attachmentId,!c){e.next=10;break}return e.prev=2,e.next=5,r.requestPromise(c,{method:"DELETE"});case 5:o(i),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])}))),t}return s()(n,[{key:"render",value:function(){var t=this.props.url;return Object(A.f)(j.a.Fragment,null,Object(A.f)(k,{size:"xsmall",icon:Object(A.f)(w.t,{size:"xs"}),href:t?"".concat(t,"?download=1"):"",disabled:!t,title:t?void 0:Object(m.b)("Insufficient permissions to download attachments")},Object(m.b)("Download")),Object(A.f)(R.a,{confirmText:Object(m.b)("Delete"),message:Object(m.b)("Are you sure you wish to delete this file?"),priority:"danger",onConfirm:this.handleDelete,disabled:!t},Object(A.f)(g.a,{size:"xsmall",icon:Object(A.f)(w.r,{size:"xs"}),disabled:!t,priority:"danger",title:t?void 0:Object(m.b)("Insufficient permissions to delete attachments")})))}}]),n}(j.a.Component);P.displayName="EventAttachmentActions";var k=Object(v.a)(g.a,{target:"ewomrm90",label:"DownloadButton"})("margin-right:",Object(D.a)(.5),";");e.a=Object(I.a)(P)},2200:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(6),a=n.n(r),c=n(4),o=(n(1),n(126)),i=n.n(o),u=n(2201),l=n.n(u),s=n(9),f=n(8),p=n(3),d=n(175),b=n(31),h=n(0);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=["event.minidump","event.applecrashreport"],j=function(t){var e=t.location,n=e.query,r=e.pathname,a=n.types,c=i()(n,"types"),o=v(v({},n),{},{types:O}),u="";return void 0===a?u="all":0===l()(O,a).length&&(u="onlyCrash"),Object(h.f)(m,null,Object(h.f)(d.a,{merged:!0,active:u},Object(h.f)(b.a,{barId:"all",size:"small",to:{pathname:r,query:c}},Object(p.b)("All Attachments")),Object(h.f)(b.a,{barId:"onlyCrash",size:"small",to:{pathname:r,query:o}},Object(p.b)("Only Crash Reports"))))};j.displayName="GroupEventAttachmentsFilter";var m=Object(c.a)("div",{target:"eoyp7bi0",label:"FilterWrapper"})("display:flex;justify-content:flex-end;margin-bottom:",Object(f.a)(3),";");e.b=Object(s.withRouter)(j)},2201:function(t,e,n){var r=n(1107),a=n(546),c=n(2202),o=n(2108),i=a((function(t){return c(r(t,o))}));t.exports=i},2202:function(t,e,n){var r=n(2203),a=n(547),c=n(713);t.exports=function(t,e,n){var o=t.length;if(o<2)return o?c(t[0]):[];for(var i=-1,u=Array(o);++i<o;)for(var l=t[i],s=-1;++s<o;)s!=i&&(u[i]=r(u[i]||l,t[s],e,n));return c(a(u,1),e,n)}},2203:function(t,e,n){var r=n(718),a=n(720),c=n(1108),o=n(363),i=n(367),u=n(719);t.exports=function(t,e,n,l){var s=-1,f=a,p=!0,d=t.length,b=[],h=e.length;if(!d)return b;n&&(e=o(e,i(n))),l?(f=c,p=!1):e.length>=200&&(f=u,p=!1,e=new r(e));t:for(;++s<d;){var y=t[s],v=null==n?y:n(y);if(y=l||0!==y?y:0,p&&v==v){for(var O=h;O--;)if(e[O]===v)continue t;b.push(y)}else f(e,v,l)||b.push(y)}return b}},2964:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),c=n(99),o=n(59),i=n(425),u=n(6),l=n.n(u),s=n(27),f=n.n(s),p=n(10),d=n.n(p),b=n(11),h=n.n(b),y=n(149),v=n.n(y),O=n(12),j=n.n(O),m=n(13),g=n.n(m),D=n(7),R=n.n(D),w=n(274),I=n.n(w),A=n(9),x=n(185),P=n(3),k=n(303),S=n(49),z=n(681),E=n(1967),N=n(4),C=n(68),q=n(413),T=n(2052),B=n(2145),F=n(2199),G={"event.minidump":Object(P.b)("Minidump"),"event.applecrashreport":Object(P.b)("Apple Crash Report"),"event.attachment":Object(P.b)("Other")},L=n(0),U=function(t){var e=t.attachment,n=t.projectId,r=t.onDelete,a=t.isDeleted,c=t.orgId,o=t.groupId;return Object(L.f)(W,{isDeleted:a},Object(L.f)("td",null,Object(L.f)("h5",null,e.name,Object(L.f)("br",null),Object(L.f)("small",null,Object(L.f)(q.a,{date:e.dateCreated})," Â·"," ",Object(L.f)(C.a,{to:"/organizations/".concat(c,"/issues/").concat(o,"/events/").concat(e.event_id,"/")},e.event_id)))),Object(L.f)("td",null,G[e.type]||Object(P.b)("Other")),Object(L.f)("td",null,Object(L.f)(T.a,{bytes:e.size})),Object(L.f)("td",null,Object(L.f)(B.a,{projectId:n,eventId:e.event_id,attachment:e},(function(t){return!a&&Object(L.f)(F.a,{url:t,onDelete:r,attachmentId:e.id})}))))};U.displayName="GroupEventAttachmentsTableRow";var W=Object(N.a)("tr",{target:"ekv38qo0",label:"TableRow"})("opacity:",(function(t){return t.isDeleted?.3:1}),";td{text-decoration:",(function(t){return t.isDeleted?"line-through":"normal"}),";}"),_=U,J=function(t){var e=t.attachments,n=t.orgId,r=t.projectId,a=t.groupId,c=t.onDelete,o=t.deletedAttachments,i=[Object(P.b)("Name"),Object(P.b)("Type"),Object(P.b)("Size"),Object(P.b)("Actions")];return Object(L.f)("table",{className:"table events-table"},Object(L.f)("thead",null,Object(L.f)("tr",null,i.map((function(t){return Object(L.f)("th",{key:t},t)})))),Object(L.f)("tbody",null,e.map((function(t){return Object(L.f)(_,{key:t.id,attachment:t,orgId:n,projectId:r,groupId:a,onDelete:c,isDeleted:o.some((function(e){return t.id===e}))})}))))};J.displayName="GroupEventAttachmentsTable";var Q=J,K=n(2200);function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var a=R()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g()(this,n)}}var X=function(t){j()(n,t);var e=V(n);function n(){var t;d()(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))).handleDelete=function(e){t.setState((function(t){return{deletedAttachments:[].concat(f()(t.deletedAttachments),[e])}}))},t}return h()(n,[{key:"getDefaultState",value:function(){return H(H({},v()(R()(n.prototype),"getDefaultState",this).call(this)),{},{deletedAttachments:[]})}},{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location;return[["eventAttachments","/issues/".concat(e.groupId,"/attachments/"),{query:H(H({},I()(n.query,["cursor","environment","types"])),{},{limit:50})}]]}},{key:"renderNoQueryResults",value:function(){return Object(L.f)(k.a,null,Object(L.f)("p",null,Object(P.b)("Sorry, no event attachments match your search query.")))}},{key:"renderEmpty",value:function(){return Object(L.f)(k.a,null,Object(L.f)("p",null,Object(P.b)("There don't seem to be any event attachments yet.")))}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderInnerBody",value:function(){var t=this.props,e=t.projectSlug,n=t.params,r=t.location,a=this.state,c=a.loading,o=a.eventAttachments,i=a.deletedAttachments;return c?Object(L.f)(S.default,null):o.length>0?Object(L.f)(Q,{attachments:o,orgId:n.orgId,projectId:e,groupId:n.groupId,onDelete:this.handleDelete,deletedAttachments:i}):r.query.types?this.renderNoQueryResults():this.renderEmpty()}},{key:"renderBody",value:function(){return Object(L.f)(a.a.Fragment,null,Object(L.f)(K.b,null),Object(L.f)(x.a,{className:"event-list"},Object(L.f)(x.c,null,this.renderInnerBody())),Object(L.f)(z.a,{pageLinks:this.state.eventAttachmentsPageLinks}))}}]),n}(E.a),Y=A.withRouter(X),Z=function(t){var e=t.organization,n=t.group;return Object(L.f)(c.a,{features:["event-attachments"],organization:e,renderDisabled:function(t){return Object(L.f)(i.a,t)}},Object(L.f)(Y,{projectSlug:n.project.slug}))};Z.displayName="GroupEventAttachmentsContainer";e.default=Object(o.a)(Z)}}]);
//# sourceMappingURL=GroupEventAttachments.js.map