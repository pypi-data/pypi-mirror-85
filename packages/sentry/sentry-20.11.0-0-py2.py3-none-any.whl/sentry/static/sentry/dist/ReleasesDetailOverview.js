(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[184],{2149:function(e,t,r){"use strict";var n=r(5),a=r.n(n),o=r(15),i=r.n(o),s=(r(1),r(31)),c=r(99),l=r(0);function u(e){var t=e.children,r=i()(e,["children"]);return Object(l.f)(c.a,{features:["organizations:discover-basic"]},(function(e){var n=e.hasFeature;return Object(l.f)(s.a,a()({disabled:!n},r),t)}))}u.displayName="DiscoverButton",t.a=u},2213:function(e,t,r){"use strict";var n=r(6),a=r.n(n),o=r(5),i=r.n(o),s=r(27),c=r.n(s),l=r(15),u=r.n(l),f=r(10),p=r.n(f),b=r(11),d=r.n(b),h=r(12),O=r.n(h),y=r(13),j=r.n(y),v=r(7),m=r.n(v),g=r(1),S=r.n(g),w=r(63),D=r.n(w),P=r(3),x=r(201),R=r(2056),E=r(2063),k=r(705),C=r(2044),N=r(2070),A=r(2082),T=r(16),I=r(26),L=r(2057),q=r(2054),U=r(1995),F=r(61),z=r(2053),H=r(0);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var a=m()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return j()(this,r)}}var B=function(e){O()(r,e);var t=V(r);function r(){var e;p()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={seriesSelection:{},forceUpdate:!1},e.handleLegendSelectChanged=function(t){var r=t.selected,n=Object.keys(r).reduce((function(e,t){return e[t]="Releases"!==t||r[t],e}),{});e.setState({seriesSelection:n,forceUpdate:!0},(function(){return e.setState({forceUpdate:!1})}))},e}return d()(r,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.forceUpdate||(!D()(this.state.seriesSelection,t.seriesSelection)||!(e.reloading||!e.timeseriesData)&&!(D()(this.props.timeseriesData,e.timeseriesData)&&D()(this.props.releaseSeries,e.releaseSeries)&&D()(this.props.previousTimeseriesData,e.previousTimeseriesData)))}},{key:"getChartComponent",value:function(){var e=this.props,t=e.showDaily,r=e.timeseriesData,n=e.yAxis;if(t)return k.a;if(r.length>1)switch(Object(F.g)(n)){case"line":return C.a;case"area":return E.a;default:throw new Error("Unknown multi plot type for ".concat(n))}return E.a}},{key:"render",value:function(){var e=this.props,t=(e.loading,e.reloading,e.yAxis),r=e.releaseSeries,n=e.zoomRenderProps,a=e.timeseriesData,o=e.previousTimeseriesData,s=e.showLegend,l=e.currentSeriesName,f=e.previousSeriesName,p=u()(e,["loading","reloading","yAxis","releaseSeries","zoomRenderProps","timeseriesData","previousTimeseriesData","showLegend","currentSeriesName","previousSeriesName"]),b=this.state.seriesSelection,d=[null!=l?l:Object(P.b)("Current"),null!=f?f:Object(P.b)("Previous")];Array.isArray(r)&&d.push(Object(P.b)("Releases"));var h=s&&{right:16,top:12,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",textStyle:{verticalAlign:"top",fontSize:11,fontFamily:"Rubik"},data:d,selected:b},O={colors:I.b.charts.getColorPalette(a.length-2),grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:function(e){return Object(U.c)(e,t)}},yAxis:{axisLabel:{color:I.b.gray200,formatter:function(e){return Object(U.b)(e,t)}}}},y=this.getChartComponent(),j=Array.isArray(r)?[].concat(c()(a),c()(r)):a;return Object(H.f)(y,i()({},p,n,O,{legend:h,onLegendSelectChanged:this.handleLegendSelectChanged,series:j,previousPeriod:o?[o]:null}))}}]),r}(S.a.Component);B.displayName="Chart";var W=function(e){O()(r,e);var t=V(r);function r(){return p()(this,r),t.apply(this,arguments)}return d()(r,[{key:"render",value:function(){var e=this.props,t=e.api,r=e.period,n=e.utc,a=e.query,o=e.router,s=e.start,c=e.end,l=e.projects,f=e.environments,p=e.showLegend,b=e.yAxis,d=e.disablePrevious,h=e.disableReleases,O=e.currentSeriesName,y=e.previousSeriesName,j=e.field,v=e.interval,m=e.showDaily,g=e.topEvents,S=e.orderby,w=e.confirmedQuery,D=u()(e,["api","period","utc","query","router","start","end","projects","environments","showLegend","yAxis","disablePrevious","disableReleases","currentSeriesName","previousSeriesName","field","interval","showDaily","topEvents","orderby","confirmedQuery"]),E=!d&&!s&&!c,k=(null!=y?y:b)?Object(P.b)("previous %s",b):void 0,C=null!=O?O:b,I=m?"1d":v||Object(x.c)(this.props,!0),U=function(e){var t=e.zoomRenderProps,r=e.releaseSeries,a=e.errored,o=e.loading,s=e.reloading,c=e.results,l=e.timeseriesData,u=e.previousTimeseriesData;if(a)return Object(H.f)(q.a,null,Object(H.f)(T.Kb,{color:"gray300",size:"lg"}));var f=c||l;return Object(H.f)(N.a,{loading:o,reloading:s},Object(H.f)(L.a,{visible:s}),Object(H.f)(B,i()({},t,{loading:o,reloading:s,utc:n,showLegend:p,releaseSeries:r||[],timeseriesData:f,previousTimeseriesData:u,currentSeriesName:C,previousSeriesName:k,stacked:"number"==typeof g&&g>0,yAxis:b,showDaily:m})))};if(!h){var F=U;U=function(e){return Object(H.f)(A.a,{utc:n,period:r,start:s,end:c,projects:l,environments:f},(function(t){var r=t.releaseSeries;return F(M(M({},e),{},{releaseSeries:r}))}))}}return Object(H.f)(R.a,i()({router:o,period:r,utc:n,projects:l,environments:f},D),(function(e){return Object(H.f)(z.a,i()({},D,{api:t,period:r,project:l,environment:f,start:s,end:c,interval:I,query:a,includePrevious:E,currentSeriesName:C,previousSeriesName:k,yAxis:b,field:j,orderby:S,topEvents:g,confirmedQuery:w}),(function(t){return U(M(M({},t),{},{zoomRenderProps:e}))}))}))}}]),r}(S.a.Component);W.displayName="EventsChart",t.a=W},2214:function(e,t,r){"use strict";r(1);var n=r(303),a=r(185),o=r(0),i=function(e){var t=e.withIcon,r=e.children;return Object(o.f)(a.a,null,Object(o.f)(a.c,null,Object(o.f)(n.a,{small:!0,withIcon:t},r)))};i.displayName="EmptyState",t.a=i},2314:function(e,t,r){"use strict";var n=r(5),a=r.n(n),o=r(10),i=r.n(o),s=r(11),c=r.n(s),l=r(12),u=r.n(l),f=r(13),p=r.n(f),b=r(7),d=r.n(b),h=r(1),O=r.n(h),y=r(2063),j=r(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var a=d()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p()(this,r)}}var m=function(e){u()(r,e);var t=v(r);function r(){return i()(this,r),t.apply(this,arguments)}return c()(r,[{key:"render",value:function(){return Object(j.f)(y.a,a()({tooltip:{filter:function(e){return e>0}}},this.props,{stacked:!0}))}}]),r}(O.a.Component);m.displayName="StackedAreaChart",t.a=m},2329:function(e,t,r){"use strict";var n=r(4),a=r(1),o=r.n(a),i=r(3),s=r(16),c=r(73),l=r(31),u=r(0);function f(e){var t=e.onRestore,r=e.multi;return Object(u.f)(c.b,{icon:Object(u.f)(s.J,{size:"md"}),type:"warning"},r?Object(i.b)("These releases have been archived."):Object(i.b)("This release has been archived."),!r&&t&&Object(u.f)(o.a.Fragment,null," ",Object(u.f)(p,{size:"zero",priority:"link",onClick:t},Object(i.b)("Restore this release"))))}f.displayName="ReleaseArchivedNotice";var p=Object(n.a)(l.a,{target:"e19b5eqp0",label:"UnarchiveButton"})("font-size:inherit;text-decoration:underline;&,&:hover,&:focus,&:active{color:",(function(e){return e.theme.textColor}),";}");t.a=f},2381:function(e,t,r){"use strict";var n=r(6),a=r.n(n),o=r(63),i=r.n(o),s=r(2),c=r.n(s),l=r(1),u=r.n(l),f=r(25),p=r.n(f),b=r(34),d=r.n(b),h=r(9),O=r(88),y=r(185),j=r(364),v=r(3),m=r(303),g=r(65),S=r(198),w=r(49),D=r(776),P=r(768),x=r(54),R=r(681),E=r(159),k=r(0),C=function(e){var t=e.withChart,r=void 0===t||t;return Object(k.f)(y.e,{disablePadding:!0},Object(k.f)(E.Box,{width:[8/12,8/12,.5],mx:2,flex:"1",className:"toolbar-header"},Object(v.b)("Issue")),r&&Object(k.f)(E.Box,{width:160,mx:2,className:"toolbar-header hidden-xs hidden-sm"},Object(v.b)("Last 24 hours")),Object(k.f)(E.Flex,{width:80,mx:2,justifyContent:"flex-end",className:"toolbar-header"},Object(v.b)("events")),Object(k.f)(E.Flex,{width:80,mx:2,justifyContent:"flex-end",className:"toolbar-header"},Object(v.b)("users")),Object(k.f)(E.Flex,{width:80,mx:2,justifyContent:"flex-end",className:"hidden-xs hidden-sm toolbar-header"},Object(v.b)("Assignee")))};C.displayName="GroupListHeader";var N=C;function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var I=d()({displayName:"GroupList",contextTypes:{location:c.a.object},mixins:[p.a.listenTo(g.a,"onGroupChange")],getInitialState:function(){return{loading:!0,error:!1,groups:[]}},componentWillMount:function(){this._streamManager=new P.a(g.a),this.fetchData()},shouldComponentUpdate:function(e,t){return!i()(this.state,t)||e.endpointPath!==this.props.endpointPath||e.query!==this.props.query||!i()(e.queryParams,this.props.queryParams)},componentDidUpdate:function(e){e.orgId===this.props.orgId&&e.endpointPath===this.props.endpointPath&&e.query===this.props.query&&i()(e.queryParams,this.props.queryParams)||this.fetchData()},componentWillUnmount:function(){g.a.loadInitialData([])},fetchData:function(){var e=this;g.a.loadInitialData([]);var t=this.props,r=t.api,n=t.orgId;this.setState({loading:!0,error:!1}),Object(j.a)(r,n).then((function(t){e.setState({memberList:Object(j.c)(t)})})),r.request(this.getGroupListEndpoint(),{success:function(t,r,n){e._streamManager.push(t),e.setState({error:!1,loading:!1,pageLinks:n.getResponseHeader("Link")})},error:function(){e.setState({error:!0,loading:!1})}})},getGroupListEndpoint:function(){var e=this.props,t=e.orgId,r=e.endpointPath,n=e.queryParams,a=null!=r?r:"/organizations/".concat(t,"/issues/"),o=null!=n?n:this.getQueryParams();return"".concat(a,"?").concat(O.stringify(o))},getQueryParams:function(){var e=this.props.query,t=this.context.location.query;return t.limit=50,t.sort="new",t.query=e,t},onCursorChange:function(e,t,r,n){var a=parseInt(r.page,10),o=isNaN(a)?n:a+n;o<=0&&(e=void 0,o=void 0),h.browserHistory.push({pathname:t,query:T(T({},r),{},{cursor:e})})},onGroupChange:function(){var e=this._streamManager.getAllItems();i()(e,this.state.groups)||this.setState({groups:e})},render:function(){var e=this.props,t=e.canSelectGroups,r=e.withChart,n=e.renderEmptyMessage,a=e.withPagination,o=this.state,i=o.loading,s=o.error,c=o.groups,l=o.memberList,f=o.pageLinks;return i?Object(k.f)(w.default,null):s?Object(k.f)(S.a,{onRetry:this.fetchData}):0===c.length?"function"==typeof n?n():Object(k.f)(y.a,null,Object(k.f)(y.c,null,Object(k.f)(m.a,null,Object(k.f)("p",null,Object(v.b)("There don't seem to be any events fitting the query."))))):Object(k.f)(u.a.Fragment,null,Object(k.f)(y.a,null,Object(k.f)(N,{withChart:r}),Object(k.f)(y.c,null,c.map((function(e){var n=e.id,a=e.project,o=l&&l.hasOwnProperty(a.slug)?l[a.slug]:null;return Object(k.f)(D.a,{key:n,id:n,canSelect:t,withChart:r,memberList:o})})))),a&&Object(k.f)(R.a,{pageLinks:f,onCursor:this.onCursorChange}))}});I.defaultProps={canSelectGroups:!0,withChart:!0,withPagination:!0};t.a=Object(x.a)(I)},2437:function(e,t,r){var n=r(2746);e.exports=function(e,t){var r=null==e?0:e.length;return r?n(e,t)/r:NaN}},2745:function(e,t,r){var n=r(275),a=r(2437);e.exports=function(e,t){return a(e,n(t,2))}},2746:function(e,t){e.exports=function(e,t){for(var r,n=-1,a=e.length;++n<a;){var o=t(e[n]);void 0!==o&&(r=void 0===r?o:r+o)}return r}},2747:function(e,t,r){var n=r(2437),a=r(241);e.exports=function(e){return n(e,a)}},2951:function(e,t,r){"use strict";r.r(t);var n,a=r(5),o=r.n(a),i=r(15),s=r.n(i),c=r(22),l=r.n(c),u=r(29),f=r.n(u),p=r(6),b=r.n(p),d=r(10),h=r.n(d),O=r(11),y=r.n(O),j=r(12),v=r.n(j),m=r(13),g=r.n(m),S=r(7),w=r.n(S),D=r(4),P=r(1),x=r.n(P),R=r(8),E=r(3),k=r(1966),C=r(59),N=r(305),A=r(58),T=r(54),I=r(106),L=r(1969),q=r(307),U=r(2165),F=r(185),z=r(2213),H=r(80),_=r.n(H),M=r(1990),V=r(2173),B=r(1126),W=r(0);function G(){var e=_()(["\n  @media (max-width: ",") {\n    display: grid;\n    grid-gap: ",";\n    padding-bottom: ",";\n    button {\n      font-size: ",";\n    }\n  }\n"]);return G=function(){return e},e}!function(e){e.SESSIONS="sessions",e.USERS="users",e.CRASH_FREE="crashFree",e.SESSION_DURATION="sessionDuration",e.EVENTS="events"}(n||(n={}));var Y=function(e){var t=e.summary,r=e.yAxis,a=e.onYAxisChange,o=e.hasHealthData,i=e.hasDiscover,s=o?void 0:Object(E.b)("This view is only available with release health data."),c=i?void 0:Object(E.b)("This view is only available with Discover feature."),l=[{value:n.SESSIONS,label:Object(E.b)("Session Count"),disabled:!o,tooltip:s},{value:n.SESSION_DURATION,label:Object(E.b)("Session Duration"),disabled:!o,tooltip:s},{value:n.USERS,label:Object(E.b)("User Count"),disabled:!o,tooltip:s},{value:n.CRASH_FREE,label:Object(E.b)("Crash Free Rate"),disabled:!o,tooltip:s},{value:n.EVENTS,label:Object(E.b)("Event Count"),disabled:!i,tooltip:c}];return Object(W.f)(Q,null,Object(W.f)(M.b,null,Object(W.f)(M.c,{key:"total-label"},function(){switch(r){case n.USERS:return Object(E.b)("Total Active Users");case n.CRASH_FREE:return Object(E.b)("Average Rate");case n.SESSION_DURATION:return Object(E.b)("Median Duration");case n.EVENTS:return Object(E.b)("Total Events");case n.SESSIONS:default:return Object(E.b)("Total Sessions")}}()),Object(W.f)(M.d,{key:"total-value"},t)),Object(W.f)(V.a,{title:Object(E.b)("Y-Axis"),selected:r,options:l,onChange:a,menuWidth:"150px"}))};Y.displayName="ReleaseChartControls";var Q=Object(B.default)(M.a)(G(),(function(e){return e.theme.breakpoints[0]}),Object(R.a)(1),Object(R.a)(1.5),(function(e){return e.theme.fontSizeSmall})),X=Y,K=r(2056),J=r(16),Z=r(2070),$=r(2057),ee=r(2054),te=r(63),re=r.n(te),ne=r(9),ae=r(2044),oe=r(2063),ie=r(2314),se=r(201),ce=r(487),le=r(26),ue=r(28),fe=r(1995),pe=r(79);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var Oe=function(e){v()(r,e);var t=he(r);function r(){var e;h()(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleLegendSelectChanged=function(t){var r=e.props.location,n=t.selected,a=de(de({},r),{},{query:de(de({},r.query),{},{unselectedSeries:Object.keys(n).filter((function(e){return!n[e]}))})});ne.browserHistory.replace(a)},e.formatTooltipValue=function(t){switch(e.props.yAxis){case n.SESSION_DURATION:return"number"==typeof t?Object(I.k)(t,!0):"―";case n.CRASH_FREE:return Object(ue.d)(t)?"".concat(t,"%"):"―";case n.SESSIONS:case n.USERS:default:return"number"==typeof t?t.toLocaleString():t}},e}return y()(r,[{key:"componentDidMount",value:function(){this.shouldUnselectHealthySeries()&&(this.props.onVisibleSeriesRecalculated(),this.handleLegendSelectChanged({selected:{Healthy:!1}}))}},{key:"shouldComponentUpdate",value:function(e){return!(e.reloading||!e.timeseriesData)&&(this.props.location.query.unselectedSeries!==e.location.query.unselectedSeries||!re()(this.props.timeseriesData,e.timeseriesData))}},{key:"shouldUnselectHealthySeries",value:function(){var e=this.props,t=e.timeseriesData,r=e.location,n=e.shouldRecalculateVisibleSeries,a=t.filter((function(e){return"Healthy"!==e.seriesName})).some((function(e){return e.data.some((function(e){return e.value>0}))})),o=!!Object(pe.c)(r.query.unselectedSeries);return n&&a&&!o}},{key:"configureYAxis",value:function(){switch(this.props.yAxis){case n.CRASH_FREE:return{max:100,scale:!0,axisLabel:{formatter:"{value}%",color:le.b.chartLabel}};case n.SESSION_DURATION:return{scale:!0,axisLabel:{formatter:function(e){return Object(fe.a)(1e3*e)},color:le.b.chartLabel}};case n.SESSIONS:case n.USERS:default:return}}},{key:"configureXAxis",value:function(){var e=this.props,t=e.timeseriesData,r=e.zoomRenderProps;if(t.every((function(e){return 1===e.data.length}))){if(r.period){var n=Object(ce.b)(r.period,null);return{min:n.start,max:n.end}}return{min:r.start,max:r.end}}}},{key:"getChart",value:function(){switch(this.props.yAxis){case n.SESSION_DURATION:return oe.a;case n.SESSIONS:case n.USERS:return ie.a;case n.CRASH_FREE:default:return ae.a}}},{key:"render",value:function(){var e=this.props,t=e.utc,r=e.timeseriesData,n=e.zoomRenderProps,a=e.location,i=this.getChart(),s={right:22,top:10,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",textStyle:{verticalAlign:"top",fontSize:11,fontFamily:"Rubik"},data:r.map((function(e){return e.seriesName})).reverse(),selected:Object(se.d)(a)};return Object(W.f)(i,o()({legend:s,utc:t},n,{series:r,isGroupedByDate:!0,seriesOptions:{showSymbol:!1},grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},yAxis:this.configureYAxis(),xAxis:this.configureXAxis(),tooltip:{valueFormatter:this.formatTooltipValue},onLegendSelectChanged:this.handleLegendSelectChanged,transformSinglePointToBar:!0}))}}]),r}(x.a.Component);Oe.displayName="HealthChart";var ye=Oe;function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var ve=function(e){v()(r,e);var t=je(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={shouldRecalculateVisibleSeries:!0},e.handleVisibleSeriesRecalculated=function(){e.setState({shouldRecalculateVisibleSeries:!1})},e}return y()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.loading,n=t.errored,a=t.reloading,o=t.chartData,i=t.selection,s=t.yAxis,c=t.router,l=this.state.shouldRecalculateVisibleSeries,u=i.datetime,f=u.utc,p=u.period,b=u.start,d=u.end;return Object(W.f)(x.a.Fragment,null,Object(W.f)(K.a,{router:c,period:p,utc:f,start:b,end:d},(function(t){return n?Object(W.f)(ee.a,null,Object(W.f)(J.Kb,{color:"gray300",size:"lg"})):Object(W.f)(Z.a,{loading:r,reloading:a},Object(W.f)($.a,{visible:a}),Object(W.f)(ye,{utc:f,timeseriesData:o,zoomRenderProps:t,reloading:a,yAxis:s,location:c.location,shouldRecalculateVisibleSeries:l,onVisibleSeriesRecalculated:e.handleVisibleSeriesRecalculated}))})))}}]),r}(x.a.Component);ve.displayName="ReleaseChartContainer";var me=ve,ge=r(412),Se=r(43),we=r(535);function De(e,t){var r=e.projects,n=e.environments,a=e.datetime,o=a.start,i=a.end,s=a.period,c={id:void 0,version:2,name:"".concat(Object(E.b)("Release")," ").concat(Object(I.i)(t)),fields:["title","count()","event.type","issue","last_seen()"],query:Object(we.b)(new we.a(["release:".concat(t),"!event.type:transaction"])),orderby:"-last_seen",range:s,environment:n,projects:r,start:o?Object(Se.j)(o):void 0,end:i?Object(Se.j)(i):void 0};return ge.a.fromSavedQuery(c)}var Pe=function(e){var t=e.loading,r=e.errored,a=e.reloading,o=e.chartData,i=e.chartSummary,s=e.selection,c=e.yAxis,l=e.onYAxisChange,u=e.router,f=e.organization,p=e.hasHealthData,b=e.location,d=e.api,h=e.version,O=e.hasDiscover,y=s.projects,j=s.environments,v=s.datetime,m=v.start,g=v.end,S=v.period,w=v.utc,D=De(s,h);return Object(W.f)(F.a,null,O&&c===n.EVENTS?Object(W.f)(z.a,{router:u,organization:f,showLegend:!0,yAxis:D.getYAxis(),query:D.getEventsAPIPayload(b).query,api:d,projects:y,environments:j,start:m,end:g,period:S,utc:w,disablePrevious:!0,disableReleases:!0,currentSeriesName:Object(E.b)("Events")}):Object(W.f)(me,{loading:t,errored:r,reloading:a,chartData:o,selection:s,yAxis:c,router:u}),Object(W.f)(X,{summary:i,yAxis:c,onYAxisChange:l,hasDiscover:O,hasHealthData:p}))};Pe.displayName="ReleaseChartContainer";var xe,Re=Pe,Ee=r(27),ke=r.n(Ee),Ce=r(274),Ne=r.n(Ce),Ae=r(361),Te=r(418),Ie=r(31),Le=r(2149),qe=r(2381),Ue=r(30),Fe=r(99),ze=r(85),He=r(175),_e=r(2214);function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}!function(e){e.NEW="new",e.UNHANDLED="unhandled",e.RESOLVED="resolved",e.ALL="all"}(xe||(xe={}));var We=function(e){v()(r,e);var t=Be(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={issuesType:xe.NEW},e.handleIssuesTypeSelection=function(t){e.setState({issuesType:t})},e.renderEmptyMessage=function(){var t=e.props.selection,r=e.state.issuesType,n=Ue.m[t.datetime.period],a=n?n.toLowerCase():Object(E.b)("given timeframe");return Object(W.f)(_e.a,{withIcon:!1},Object(W.f)(x.a.Fragment,null,r===xe.NEW&&Object(E.c)("No new issues in this release for the [timePeriod].",{timePeriod:a}),r===xe.UNHANDLED&&Object(E.c)("No unhandled issues in this release for the [timePeriod].",{timePeriod:a}),r===xe.RESOLVED&&Object(E.b)("No resolved issues in this release."),r===xe.ALL&&Object(E.c)("No issues in this release for the [timePeriod].",{timePeriod:a})))},e}return y()(r,[{key:"getDiscoverUrl",value:function(){var e=this.props,t=e.version,r=e.orgId;return De(e.selection,t).getResultsViewUrlTarget(r)}},{key:"getIssuesUrl",value:function(){var e=this.props,t=e.version,r=e.orgId,n=this.state.issuesType,a=this.getIssuesEndpoint().queryParams,o=new we.a([]);switch(n){case xe.NEW:o.setTagValues("firstRelease",[t]);break;case xe.UNHANDLED:o.setTagValues("release",[t]),o.setTagValues("error.handled",["0"]);break;case xe.RESOLVED:case xe.ALL:default:o.setTagValues("release",[t])}return{pathname:"/organizations/".concat(r,"/issues/"),query:Ve(Ve({},a),{},{query:Object(we.b)(o)})}}},{key:"getIssuesEndpoint",value:function(){var e=this.props,t=e.version,r=e.orgId,n=e.location,a=this.state.issuesType,o=Ve(Ve({},Ne()(n.query,[].concat(ke()(Object.values(ze.e)),["cursor"]))),{},{limit:50,sort:"new"});switch(a){case xe.ALL:return{path:"/organizations/".concat(r,"/issues/"),queryParams:Ve(Ve({},o),{},{query:Object(we.b)(new we.a(["release:".concat(t)]))})};case xe.RESOLVED:return{path:"/organizations/".concat(r,"/releases/").concat(t,"/resolved/"),queryParams:Ve(Ve({},o),{},{query:""})};case xe.UNHANDLED:return{path:"/organizations/".concat(r,"/issues/"),queryParams:Ve(Ve({},o),{},{query:Object(we.b)(new we.a(["release:".concat(t),"error.handled:0"]))})};case xe.NEW:default:return{path:"/organizations/".concat(r,"/issues/"),queryParams:Ve(Ve({},o),{},{query:Object(we.b)(new we.a(["first-release:".concat(t)]))})}}}},{key:"render",value:function(){var e=this,t=this.state.issuesType,r=this.props.orgId,n=this.getIssuesEndpoint(),a=n.path,i=n.queryParams,s=[{value:xe.NEW,label:Object(E.b)("New Issues")},{value:xe.RESOLVED,label:Object(E.b)("Resolved Issues")},{value:xe.UNHANDLED,label:Object(E.b)("Unhandled Issues")},{value:xe.ALL,label:Object(E.b)("All Issues")}];return Object(W.f)(x.a.Fragment,null,Object(W.f)(Ge,null,Object(W.f)(Ae.b,{button:function(e){var r,n=e.isOpen,a=e.getActorProps;return Object(W.f)(Qe,o()({},a(),{isOpen:n,prefix:Object(E.b)("Filter"),size:"small"}),null===(r=s.find((function(e){return e.value===t})))||void 0===r?void 0:r.label)}},s.map((function(r){var n=r.value,a=r.label;return Object(W.f)(Xe,{key:n,onSelect:e.handleIssuesTypeSelection,"data-test-id":"filter-".concat(n),eventKey:n,isActive:n===t},a)}))),Object(W.f)(Ye,{gap:1},Object(W.f)(Fe.a,{features:["discover-basic"]},Object(W.f)(Le.a,{to:this.getDiscoverUrl(),size:"small","data-test-id":"discover-button"},Object(E.b)("Open in Discover"))),Object(W.f)(Ie.a,{to:this.getIssuesUrl(),size:"small","data-test-id":"issues-button"},Object(E.b)("Open in Issues")))),Object(W.f)(Ke,{"data-test-id":"release-wrapper"},Object(W.f)(qe.a,{orgId:r,endpointPath:a,queryParams:i,query:"",canSelectGroups:!1,withChart:!1,renderEmptyMessage:this.renderEmptyMessage})))}}]),r}(x.a.Component);We.displayName="Issues";var Ge=Object(D.a)("div",{target:"eqh4a6f0",label:"ControlsWrapper"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",Object(R.a)(1),";@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){display:block;}"),Ye=Object(D.a)(He.a,{target:"eqh4a6f1",label:"OpenInButtonBar"})("@media (max-width:",(function(e){return e.theme.breakpoints[0]}),"){margin-top:",Object(R.a)(1),";}"),Qe=Object(D.a)(Te.a,{target:"eqh4a6f2",label:"StyledDropdownButton"})({name:"65q47m",styles:"min-width:145px;"}),Xe=Object(D.a)(Ae.a,{target:"eqh4a6f3",label:"StyledDropdownItem"})({name:"epvm6",styles:"white-space:nowrap;"}),Ke=Object(D.a)("div",{target:"eqh4a6f4",label:"TableWrapper"})("margin-bottom:",Object(R.a)(4),";",F.a,"{margin-bottom:-",Object(R.a)(1),";}"),Je=We,Ze=r(149),$e=r.n(Ze),et=r(177),tt=r(52),rt=r(1967),nt=Object(D.a)("div",{target:"e1cijvrg0",label:"Wrapper"})("margin-bottom:",Object(R.a)(4),";"),at=Object(D.a)(M.c,{target:"e1cijvrg1",label:"SectionHeading"})("margin:0 0 ",Object(R.a)(1.5)," 0;");function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function st(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var ct=function(e){v()(r,e);var t=st(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onCollapseToggle=function(){e.setState((function(e){return{collapsed:!e.collapsed}}))},e}return y()(r,[{key:"getDefaultState",value:function(){return it(it({},$e()(w()(r.prototype),"getDefaultState",this).call(this)),{},{collapsed:!0})}},{key:"getEndpoints",value:function(){var e=this.props,t=e.orgId,r=e.projectSlug,n=e.version;return[["commits","/projects/".concat(t,"/").concat(r,"/releases/").concat(encodeURIComponent(n),"/commits/")]]}},{key:"getDisplayPercent",value:function(e){var t=this.state.commits,r=Math.round(Object(ue.s)(e,t.length));return"".concat(r<1?"<1":r,"%")}},{key:"renderBody",value:function(){var e,t=this,n=this.state.collapsed,a=null===(e=this.state.commits)||void 0===e?void 0:e.reduce((function(e,t){var r,n,a=null!==(r=null===(n=t.author)||void 0===n?void 0:n.email)&&void 0!==r?r:"unknown";return e.hasOwnProperty(a)?e[a].commitCount+=1:e[a]={commitCount:1,author:t.author},e}),{}),o=Object.values(a).sort((function(e,t){return t.commitCount-e.commitCount}));if(!o.length)return null;var i=r.MAX_WHEN_COLLAPSED,s=o.length,c=s>i;n&&c&&(o=o.slice(0,i));var l=s-o.length;return Object(W.f)(nt,null,Object(W.f)(at,null,Object(E.b)("Commit Author Breakdown")),o.map((function(e){var r=e.commitCount,n=e.author;return Object(W.f)(lt,{key:null==n?void 0:n.email},Object(W.f)(ut,null,Object(W.f)(ft,{user:n,size:20,hasTooltip:!0}),Object(W.f)(pt,null,Object(I.l)(n||{},!1))),Object(W.f)(bt,null,Object(W.f)(dt,null,Object(E.d)("%s commit","%s commits",r)),Object(W.f)(ht,null,t.getDisplayPercent(r))))})),l>0&&Object(W.f)(Ot,{priority:"link",onClick:this.onCollapseToggle},Object(E.d)("Show %s collapsed author","Show %s collapsed authors",l)),0===l&&c&&Object(W.f)(Ot,{priority:"link",onClick:this.onCollapseToggle},Object(E.b)("Collapse")))}}]),r}(rt.a);ct.MAX_WHEN_COLLAPSED=5;var lt=Object(D.a)("div",{target:"e1trurpl0",label:"AuthorLine"})("display:flex;justify-content:space-between;margin-bottom:",Object(R.a)(.5),";font-size:",(function(e){return e.theme.fontSizeSmall}),";"),ut=Object(D.a)("div",{target:"e1trurpl1",label:"Author"})({name:"1i8k9lp",styles:"display:flex;flex:1;align-items:center;overflow:hidden;"}),ft=Object(D.a)(et.a,{target:"e1trurpl2",label:"StyledUserAvatar"})("margin-right:",Object(R.a)(1),";"),pt=Object(D.a)("div",{target:"e1trurpl3",label:"AuthorName"})("font-weight:600;color:",(function(e){return e.theme.textColor}),";padding-right:",Object(R.a)(.5),";",tt.a,";"),bt=Object(D.a)("div",{target:"e1trurpl4",label:"Stats"})({name:"zsk5ho",styles:"display:flex;align-items:center;justify-content:space-between;width:115px;"}),dt=Object(D.a)("div",{target:"e1trurpl5",label:"Commits"})("color:",(function(e){return e.theme.gray300}),";"),ht=Object(D.a)("div",{target:"e1trurpl6",label:"Percent"})("min-width:40px;text-align:right;color:",(function(e){return e.theme.subText}),";"),Ot=Object(D.a)(Ie.a,{target:"e1trurpl7",label:"StyledButton"})({name:"8atqhb",styles:"width:100%;"}),yt=ct,jt=r(415),vt=r(199),mt=r(413),gt=r(68),St=r(217),wt=function(e){var t=e.release,r=e.releaseMeta,n=e.orgSlug,a=e.projectSlug,o=t.version,i=t.dateCreated,s=t.firstEvent,c=t.lastEvent;return Object(W.f)(nt,null,Object(W.f)(at,null,Object(E.b)("Project Release Details")),Object(W.f)(Dt,null,Object(W.f)("tbody",null,Object(W.f)(Pt,null,Object(W.f)(xt,null,Object(E.b)("Created")),Object(W.f)(Rt,null,Object(W.f)(mt.a,{date:i,seconds:!1}))),Object(W.f)(Pt,null,Object(W.f)(xt,null,Object(E.b)("Version")),Object(W.f)(Rt,null,Object(W.f)(jt.a,{version:o,anchor:!1}))),Object(W.f)(Pt,null,Object(W.f)(xt,null,Object(E.b)("First Event")),Object(W.f)(Rt,null,s?Object(W.f)(vt.a,{date:s}):"-")),Object(W.f)(Pt,null,Object(W.f)(xt,null,Object(E.b)("Last Event")),Object(W.f)(Rt,null,c?Object(W.f)(vt.a,{date:c}):"-")),Object(W.f)(Pt,null,Object(W.f)(xt,null,Object(E.b)("Source Maps")),Object(W.f)(Rt,null,Object(W.f)(gt.a,{to:"/settings/".concat(n,"/projects/").concat(a,"/source-maps/").concat(encodeURIComponent(o),"/")},Object(W.f)(St.a,{value:r.releaseFileCount})," ",Object(E.d)("artifact","artifacts",r.releaseFileCount)))))))};wt.displayName="ProjectReleaseDetails";var Dt=Object(D.a)("table",{target:"e1w50bd50",label:"StyledTable"})({name:"i0dd0x",styles:"table-layout:fixed;width:100%;max-width:100%;"}),Pt=Object(D.a)("tr",{target:"e1w50bd51",label:"StyledTr"})("&:nth-child(2n + 1) td{background-color:",(function(e){return e.theme.backgroundSecondary}),";}"),xt=Object(D.a)("td",{target:"e1w50bd52",label:"TagKey"})("color:",(function(e){return e.theme.textColor}),";padding:",Object(R.a)(.5)," ",Object(R.a)(1),";font-size:",(function(e){return e.theme.fontSizeMedium}),";white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"),Rt=Object(D.a)(xt,{target:"e1w50bd53",label:"TagValue"})("text-align:right;color:",(function(e){return e.theme.subText}),";@media (min-width:",(function(e){return e.theme.breakpoints[0]}),"){width:160px;}"),Et=wt,kt=r(243);function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var Tt=function(e){v()(r,e);var t=At(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!0},e.onCollapseToggle=function(){e.setState((function(e){return{collapsed:!e.collapsed}}))},e}return y()(r,[{key:"render",value:function(){var e=this.props,t=e.projects,n=e.location,a=this.state.collapsed,o=t.length>r.MAX_WHEN_COLLAPSED,i=t;a&&o&&(i=t.slice(0,r.MAX_WHEN_COLLAPSED));var s=t.length-i.length;return Object(W.f)(nt,null,Object(W.f)(at,null,Object(E.d)("Other Project for This Release","Other Projects for This Release",t.length)),i.map((function(e){return Object(W.f)(It,{key:e.id},Object(W.f)(Lt,{to:{pathname:n.pathname,query:Nt(Nt({},n.query),{},{project:e.id,yAxis:void 0})}},Object(W.f)(kt.a,{project:e,avatarSize:16})))})),s>0&&Object(W.f)(qt,{priority:"link",onClick:this.onCollapseToggle},Object(E.d)("Show %s collapsed project","Show %s collapsed projects",s)),0===s&&o&&Object(W.f)(qt,{priority:"link",onClick:this.onCollapseToggle},Object(E.b)("Collapse")))}}]),r}(x.a.Component);Tt.displayName="OtherProjects",Tt.MAX_WHEN_COLLAPSED=5;var It=Object(D.a)("div",{target:"epdr51c0",label:"Row"})("margin-bottom:",Object(R.a)(.25),";font-size:",(function(e){return e.theme.fontSizeMedium}),";color:",(function(e){return e.theme.blue300}),";",tt.a),Lt=Object(D.a)(gt.a,{target:"epdr51c1",label:"StyledLink"})({name:"1baulvz",styles:"display:inline-block;"}),qt=Object(D.a)(Ie.a,{target:"epdr51c2",label:"CollapseToggle"})({name:"8atqhb",styles:"width:100%;"}),Ut=Tt,Ft=r(38),zt=r.n(Ft),Ht=r(2112),_t=function(e){var t=e.crashFreeTimeBreakdown;if(!(null==t?void 0:t.length))return null;var r=t.map((function(e,t,r){var n=e.date,a=e.crashFreeUsers,o=e.totalUsers,i=Math.round((null!=a?a:0)*o/100),s=0===t?Object(E.b)("Release created"):"".concat(zt()(r[0].date).from(n,!0)," ").concat(Object(E.b)("later"));return{date:zt()(n),dateLabel:s,crashFreeUsers:a,crashFreeUserCount:i}})).filter((function(e){return e.date.isBefore()})).reverse();return r.length?Object(W.f)(nt,null,Object(W.f)(at,null,Object(E.b)("Total Crash Free Users")),Object(W.f)(Mt,null,r.map((function(e){return Object(W.f)(Vt,{key:e.date.toString()},Object(W.f)(Bt,null,Object(W.f)(Wt,{bold:!0},e.date.format("MMMM D")),Object(W.f)(Wt,{bold:!0,right:!0},Object(W.f)(St.a,{value:e.crashFreeUserCount})," ",Object(E.d)("user","users",e.crashFreeUserCount))),Object(W.f)(Bt,null,Object(W.f)(Wt,null,e.dateLabel),Object(W.f)(Wt,{right:!0},Object(ue.d)(e.crashFreeUsers)?Object(Ht.b)(e.crashFreeUsers):"-")))})))):null};_t.displayName="TotalCrashFreeUsers";var Mt=Object(D.a)("div",{target:"edy17k50",label:"Timeline"})("font-size:",(function(e){return e.theme.fontSizeSmall}),";color:",(function(e){return e.theme.subText}),";line-height:1;"),Vt=Object(D.a)("div",{target:"edy17k51",label:"Row"})("border-left:1px solid ",(function(e){return e.theme.border}),";padding-left:",Object(R.a)(2),";padding-bottom:",Object(R.a)(1),";margin-left:",Object(R.a)(1),";position:relative;&:before{content:'';width:",10,"px;height:",10,"px;border-radius:100%;background-color:",(function(e){return e.theme.purple300}),";position:absolute;top:0;left:-",Math.floor(5),"px;}&:last-child{border-left:0;}"),Bt=Object(D.a)("div",{target:"edy17k52",label:"InnerRow"})("display:grid;grid-column-gap:",Object(R.a)(2),";grid-auto-flow:column;grid-auto-columns:1fr;padding-bottom:",Object(R.a)(.5),";"),Wt=Object(D.a)("div",{target:"edy17k53",label:"Text"})("font-weight:",(function(e){return e.bold?600:400}),";text-align:",(function(e){return e.right?"right":"left"}),";color:",(function(e){return e.bold?e.theme.gray400:e.theme.gray300}),";padding-bottom:",Object(R.a)(.25),";",tt.a,";"),Gt=_t,Yt=r(2250),Qt=r(273),Xt=function(e){var t=e.version,r=e.orgSlug,n=e.projectId,a=e.deploys;return Object(W.f)(nt,null,Object(W.f)(at,null,Object(E.b)("Deploys")),a.map((function(e){return Object(W.f)(Kt,{key:e.id},Object(W.f)(Jt,{deploy:e,orgSlug:r,version:t,projectId:n}),Object(W.f)(Qt.a,null,Object(W.f)(vt.a,{date:e.dateFinished})))})))};Xt.displayName="Deploys";var Kt=Object(D.a)("div",{target:"ep08he10",label:"Row"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",Object(R.a)(1),";font-size:",(function(e){return e.theme.fontSizeMedium}),";color:",(function(e){return e.theme.subText}),";"),Jt=Object(D.a)(Yt.a,{target:"ep08he11",label:"StyledDeployBadge"})("margin-right:",Object(R.a)(1),";"),Zt=Xt,$t=r(37),er=r.n($t),tr=r(2124),rr=r.n(tr),nr=r(2745),ar=r.n(nr),or=r(2747),ir=r.n(or),sr=r(32),cr=r(160),lr=r(2075),ur=r(402);function fr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var dr=function(e){return rr()(e,(function(e,t){return["api","version","orgId","projectSlug","location","children"].includes(t)}))},hr=function(e){v()(r,e);var t=br(r);function r(){var e;h()(this,r);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reloading:!1,errored:!1,data:null},e.unmounting=!1,e.fetchData=f()(l.a.mark((function t(){var r,a,o,i,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,a=e.props,o=a.yAxis,i=a.hasHealthData,s=a.hasDiscover,i||s){t.next=4;break}return t.abrupt("return");case 4:if(e.setState((function(e){return{reloading:null!==e.data,errored:!1}})),t.prev=5,o!==n.CRASH_FREE){t.next=12;break}return t.next=9,e.fetchRateData();case 9:r=t.sent,t.next=21;break;case 12:if(o!==n.EVENTS){t.next=18;break}return t.next=15,e.fetchEventData();case 15:r=t.sent,t.next=21;break;case 18:return t.next=20,e.fetchCountData(o===n.SESSION_DURATION?n.SESSIONS:o);case 20:r=t.sent;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(5),Object(sr.a)(Object(E.b)("Error loading chart data")),e.setState({errored:!0,data:null});case 27:if(!e.unmounting){t.next=29;break}return t.abrupt("return");case 29:e.setState({reloading:!1,data:r});case 30:case"end":return t.stop()}}),t,null,[[5,23]])}))),e.fetchCountData=function(){var t=f()(l.a.mark((function t(r){var a,o,i,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.api,i=a.yAxis,t.next=3,o.requestPromise(e.statsPath,{query:pr(pr({},e.baseQueryParams),{},{type:r})});case 3:return s=t.sent,c=i===n.SESSION_DURATION?e.transformSessionDurationData(s.stats):e.transformCountData(s.stats,i,s.statTotals),t.abrupt("return",pr(pr({},c),{},{crashFreeTimeBreakdown:s.usersBreakdown}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchRateData=f()(l.a.mark((function t(){var r,a,o,i,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.api,t.next=3,Promise.all([r.requestPromise(e.statsPath,{query:pr(pr({},e.baseQueryParams),{},{type:n.USERS})}),r.requestPromise(e.statsPath,{query:pr(pr({},e.baseQueryParams),{},{type:n.SESSIONS})})]);case 3:return a=t.sent,o=er()(a,2),i=o[0],s=o[1],c=e.transformRateData(i.stats,s.stats),t.abrupt("return",pr(pr({},c),{},{crashFreeTimeBreakdown:i.usersBreakdown}));case 9:case"end":return t.stop()}}),t)}))),e.fetchEventData=f()(l.a.mark((function t(){var r,a,o,i,s,c,u,f,p,b,d,h,O,y,j,v,m;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props,i=o.api,s=o.orgId,c=o.location,u=o.selection,f=o.version,p=o.hasHealthData,b=e.state.data||{},!(d=b.crashFreeTimeBreakdown)&&p){t.next=8;break}return t.next=5,Object(lr.c)(i,s,De(u,f).getEventsAPIPayload(c));case 5:O=t.sent,t.next=14;break;case 8:return t.next=10,Promise.all([i.requestPromise(e.statsPath,{query:pr(pr({},e.baseQueryParams),{},{type:n.USERS})}),Object(lr.c)(i,s,De(u,f).getEventsAPIPayload(c))]);case 10:y=t.sent,j=er()(y,2),h=j[0],O=j[1];case 14:return v=null!==(r=null===(a=h)||void 0===a?void 0:a.usersBreakdown)&&void 0!==r?r:d,m=O.toLocaleString(),t.abrupt("return",{chartData:[],crashFreeTimeBreakdown:v,chartSummary:m});case 17:case"end":return t.stop()}}),t)}))),e}return y()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){re()(dr(e),dr(this.props))||this.fetchData()}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"transformCountData",value:function(e,t,r){var n={crashed:{seriesName:Object(E.b)("Crashed"),data:[],color:ur.a[3][0],areaStyle:{color:ur.a[3][0],opacity:1},lineStyle:{opacity:0,width:.4}},abnormal:{seriesName:Object(E.b)("Abnormal"),data:[],color:ur.a[3][1],areaStyle:{color:ur.a[3][1],opacity:1},lineStyle:{opacity:0,width:.4}},errored:{seriesName:Object(E.b)("Errored"),data:[],color:ur.a[3][2],areaStyle:{color:ur.a[3][2],opacity:1},lineStyle:{opacity:0,width:.4}},healthy:{seriesName:Object(E.b)("Healthy"),data:[],color:ur.a[3][3],areaStyle:{color:ur.a[3][3],opacity:1},lineStyle:{opacity:0,width:.4}}};return e.forEach((function(e){var r=er()(e,2),a=r[0],o=r[1],i=1e3*a,s=o["".concat(t,"_crashed")],c=o["".concat(t,"_abnormal")],l=o["".concat(t,"_errored")],u=o[t]-s-c-l;n.crashed.data.push({name:i,value:s}),n.abnormal.data.push({name:i,value:c}),n.errored.data.push({name:i,value:l}),n.healthy.data.push({name:i,value:u>=0?u:0})})),{chartData:Object.values(n),chartSummary:r[t].toLocaleString()}}},{key:"transformRateData",value:function(e,t){var r={users:{seriesName:Object(E.b)("Crash Free Users"),data:[],color:ur.a[1][0]},sessions:{seriesName:Object(E.b)("Crash Free Sessions"),data:[],color:ur.a[1][1]}},a=function(e,t){var r=e.map((function(e){var r=er()(e,2),n=r[0],a=r[1];return{name:1e3*n,value:0!==a[t]?Object(Ht.c)(100-Object(ue.s)(a["".concat(t,"_crashed")],a[t])):null}}));return{averagePercent:Object(Ht.b)(ar()(r.filter((function(e){return Object(ue.d)(e.value)})),"value")),percentageData:r}},o=a(e,n.USERS);r.users.data=o.percentageData;var i=a(t,n.SESSIONS);r.sessions.data=i.percentageData;var s=Object(E.c)("[usersPercent] users, [sessionsPercent] sessions",{usersPercent:o.averagePercent,sessionsPercent:i.averagePercent});return{chartData:Object.values(r),chartSummary:s}}},{key:"transformSessionDurationData",value:function(e){var t={seriesName:Object(E.b)("Session Duration"),data:[],lineStyle:{opacity:0}},r=ir()(e.map((function(e){var r=er()(e,2),n=r[0],a=r[1];return t.data.push({name:1e3*n,value:Object(Ht.f)(a.duration_p50)}),a.duration_p50})).filter((function(e){return Object(ue.d)(e)})))||0,n=Object(I.k)(Object(Ht.f)(r));return{chartData:[t],chartSummary:n}}},{key:"render",value:function(){var e,t,r,n=this.props.children,a=this.state,o=a.data;return n({loading:null===o,reloading:a.reloading,errored:a.errored,chartData:null!==(e=null==o?void 0:o.chartData)&&void 0!==e?e:[],chartSummary:null!==(t=null==o?void 0:o.chartSummary)&&void 0!==t?t:"",crashFreeTimeBreakdown:null!==(r=null==o?void 0:o.crashFreeTimeBreakdown)&&void 0!==r?r:[]})}},{key:"statsPath",get:function(){var e=this.props,t=e.orgId,r=e.projectSlug,n=e.version;return"/projects/".concat(t,"/").concat(r,"/releases/").concat(n,"/stats/")}},{key:"baseQueryParams",get:function(){var e,t=this.props,r=t.location,n=t.selection;return pr(pr({},Object(cr.a)(Ne()(r.query,ke()(Object.values(ze.e))))),{},{interval:(e=n.datetime,Object(se.b)(e)>20160?"6h":"1h")})}}]),r}(x.a.Component);hr.displayName="ReleaseStatsRequest";var Or=hr,yr=r(2329),jr=r(2263);function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){b()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g()(this,r)}}var Sr=function(e){v()(r,e);var t=gr(r);function r(){var e;h()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleYAxisChange=function(t){var r=e.props,n=r.location;r.router.push(mr(mr({},n),{},{query:mr(mr({},n.query),{},{yAxis:t})}))},e.handleRestore=function(){var t=f()(l.a.mark((function t(r,n){var a,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.params,i=a.organization,t.prev=1,t.next=4,Object(U.d)(new A.a,{orgSlug:i.slug,projectSlug:r.slug,releaseVersion:o.release});case 4:n(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),e}return y()(r,[{key:"getTitle",value:function(){var e=this.props,t=e.params,r=e.organization;return Object(L.a)(Object(E.b)("Release %s",Object(I.i)(t.release)),r.slug,!1)}},{key:"getYAxis",value:function(e){var t=this.props.location.query.yAxis;return"string"==typeof t?t:e?n.SESSIONS:n.EVENTS}},{key:"render",value:function(){var e=this,t=this.props,r=t.organization,n=t.selection,a=t.location,i=t.api,c=t.router;return Object(W.f)(jr.ReleaseContext.Consumer,null,(function(t){var l=t.release,u=t.project,f=t.deploys,p=t.releaseMeta,b=t.refetchData,d=l.commitCount,h=l.version,O=(u.healthData||{}).hasHealthData,y=r.features.includes("discover-basic"),j=e.getYAxis(O);return Object(W.f)(Or,{api:i,orgId:r.slug,projectSlug:u.slug,version:h,selection:n,location:a,yAxis:j,hasHealthData:O,hasDiscover:y},(function(t){var v=t.crashFreeTimeBreakdown,m=s()(t,["crashFreeTimeBreakdown"]);return Object(W.f)(wr,null,Object(W.f)(q.f,null,Object(Ht.e)(l)&&Object(W.f)(yr.a,{onRestore:function(){return e.handleRestore(u,b)}}),(y||O)&&Object(W.f)(Re,o()({},m,{selection:n,yAxis:j,onYAxisChange:e.handleYAxisChange,router:c,organization:r,hasHealthData:O,location:a,api:i,version:h,hasDiscover:y})),Object(W.f)(Je,{orgId:r.slug,selection:n,version:h,location:a})),Object(W.f)(q.g,null,Object(W.f)(Et,{release:l,releaseMeta:p,orgSlug:r.slug,projectSlug:u.slug}),d>0&&Object(W.f)(yt,{version:h,orgId:r.slug,projectSlug:u.slug}),p.projects.length>1&&Object(W.f)(Ut,{projects:p.projects.filter((function(e){return e.slug!==u.slug})),location:a}),O&&Object(W.f)(Gt,{crashFreeTimeBreakdown:v}),f.length>0&&Object(W.f)(Zt,{version:h,orgSlug:r.slug,deploys:f,projectId:u.id})))}))}))}}]),r}(k.a);Sr.displayName="ReleaseOverview";t.default=Object(T.a)(Object(N.a)(Object(C.a)(Sr)));var wr=Object(D.a)(q.a,{target:"e1d2jw1q0",label:"StyledBody"})("margin:-",Object(R.a)(2)," -",Object(R.a)(4),";")}}]);
//# sourceMappingURL=ReleasesDetailOverview.js.map