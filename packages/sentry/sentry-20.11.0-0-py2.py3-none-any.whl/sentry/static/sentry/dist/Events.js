(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[84],{1966:function(e,t,r){"use strict";r.d(t,"a",(function(){return y}));var n=r(10),a=r.n(n),o=r(11),i=r.n(o),s=r(12),c=r.n(s),u=r(13),l=r.n(u),p=r(7),f=r.n(p),d=r(300),v=r.n(d),g=(r(1),r(1967)),h=r(0);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var a=f()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var y=function(e){c()(r,e);var t=b(r);function r(){return a()(this,r),t.apply(this,arguments)}return i()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(v.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(g.a);y.displayName="AsyncView"},1995:function(e,t,r){"use strict";r.d(t,"c",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return c}));var n=r(106),a=r(3),o=r(61);function i(e,t){switch(Object(o.h)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return Object(n.h)(e,2);case"duration":return Object(n.j)(e/1e3,2,!0);default:return e.toString()}}function s(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(Object(o.h)(t)){case"integer":case"number":return r?Object(n.f)(e):e.toLocaleString();case"percentage":return Object(n.h)(e,0);case"duration":return c(e);default:return e.toString()}}function c(e){if(0===e)return"0";if(e>=n.e){var t=(e/n.e).toFixed(0);return Object(a.b)("%swk",t)}if(e>=n.a){var r=(e/n.a).toFixed(0);return Object(a.b)("%sd",r)}if(e>=n.b){var o=(e/n.b).toFixed(0);return Object(a.b)("%shr",o)}if(e>=n.c){var i=(e/n.c).toFixed(0);return Object(a.b)("%smin",i)}if(e>=n.d){var s=(e/n.d).toFixed(0);return Object(a.b)("%ss",s)}var c=(e/n.d).toFixed(1);return Object(a.b)("%ss",c)}},2053:function(e,t,r){"use strict";var n=r(6),a=r.n(n),o=r(37),i=r.n(o),s=r(22),c=r.n(s),u=r(15),l=r.n(u),p=r(29),f=r.n(p),d=r(10),v=r.n(d),g=r(11),h=r.n(g),b=r(12),y=r.n(b),m=r(13),O=r.n(m),j=r(7),D=r.n(j),P=r(63),w=r.n(P),k=r(2124),S=r.n(k),R=r(1),x=r.n(R),z=r(2065),T=r(2075),E=r(201),C=r(32),N=r(3),q=r(0);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D()(e);if(t){var a=D()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O()(this,r)}}var F=["api","children","organization","loading"],M=function(e){return S()(e,(function(e,t){return F.includes(t)}))};var J=function(e){y()(r,e);var t=U(r);function r(){var e;v()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={reloading:!!e.props.loading,errored:!1,timeseriesData:null},e.unmounting=!1,e.fetchData=f()(c.a.mark((function t(){var r,n,a,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,n=r.api,a=r.confirmedQuery,o=l()(r,["api","confirmedQuery"]),i=null,!1!==a){t.next=4;break}return t.abrupt("return");case 4:return e.setState((function(e){return{reloading:null!==e.timeseriesData,errored:!1}})),t.prev=5,n.clear(),t.next=9,Object(T.a)(n,o);case 9:i=t.sent,t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),t.t0&&t.t0.responseJSON&&t.t0.responseJSON.detail?Object(C.a)(t.t0.responseJSON.detail):Object(C.a)(Object(N.b)("Error loading chart data")),e.setState({errored:!0});case 16:if(!e.unmounting){t.next=18;break}return t.abrupt("return");case 18:e.setState({reloading:!1,timeseriesData:i});case 19:case"end":return t.stop()}}),t,null,[[5,12]])}))),e.getData=function(t){var r=e.props,n=r.period,a=r.includePrevious,o=Object(E.a)(a,n),i=Math.floor(t.length/2);return{current:o?t.slice(i):t,previous:o?t.slice(0,i):null}},e}return h()(r,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){w()(M(e),M(this.props))||this.fetchData()}},{key:"componentWillUnmount",value:function(){this.unmounting=!0}},{key:"calculateTotalsPerTimestamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 1e3*e};return e.map((function(e,r){var n=i()(e,2),a=n[0],o=n[1];return{name:t(a,o,r),value:o.reduce((function(e,t){return e+t.count}),0)}}))}},{key:"transformPreviousPeriodData",value:function(e,t){var r;return t?{seriesName:null!==(r=this.props.previousSeriesName)&&void 0!==r?r:"Previous",data:this.calculateTotalsPerTimestamp(t,(function(t,r,n){return 1e3*e[n][0]}))}:null}},{key:"transformAggregatedTimeseries",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{seriesName:t,data:this.calculateTotalsPerTimestamp(e)}}},{key:"transformTimeseriesData",value:function(e,t){return[{seriesName:t||"Current",data:e.map((function(e){var t=i()(e,2);return{name:1e3*t[0],value:t[1].reduce((function(e,t){return e+t.count}),0)}}))}]}},{key:"processData",value:function(e){if(!e)return{};var t=e.data,r=e.totals,n=this.props,a=n.includeTransformedData,o=n.includeTimeAggregation,i=n.timeAggregationSeriesName,s=this.getData(t),c=s.current,u=s.previous;return{data:a?this.transformTimeseriesData(c,this.props.currentSeriesName):[],allData:t,originalData:c,totals:r,originalPreviousData:u,previousData:a?this.transformPreviousPeriodData(c,u):null,timeAggregatedData:o?this.transformAggregatedTimeseries(c,i||""):{}}}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.children,a=r.showLoading,o=l()(r,["children","showLoading"]),i=this.state,s=i.timeseriesData,c=i.reloading,u=i.errored,p=this.props.loading||null===s;if(a&&p)return Object(q.f)(z.a,{"data-test-id":"events-request-loading"});if(null!==(e=s)&&void 0===e.data&&void 0===e.totals)return n(L({loading:p,reloading:c,errored:u,results:Object.keys(s).map((function(e){var r=s[e],n=t.transformTimeseriesData(r.data,e)[0];return[r.order||0,n]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]}))},o));var f=this.processData(s);return n(L({loading:p,reloading:c,errored:u,timeseriesData:f.data,allTimeseriesData:f.allData,originalTimeseriesData:f.originalData,timeseriesTotals:f.totals,originalPreviousTimeseriesData:f.originalPreviousData,previousTimeseriesData:f.previousData,timeAggregatedData:f.timeAggregatedData},o))}}]),r}(x.a.PureComponent);J.displayName="EventsRequest",J.defaultProps={period:void 0,start:null,end:null,interval:"1d",limit:15,query:"",includePrevious:!0,includeTransformedData:!0},t.a=J},2054:function(e,t,r){"use strict";var n=r(4),a=Object(n.a)("div",{target:"esa86kh0",label:"ErrorPanel"})("display:flex;justify-content:center;align-items:center;flex:1;flex-shrink:0;overflow:hidden;height:",(function(e){return e.height||"200px"}),";position:relative;border-color:transparent;margin-bottom:0;");t.a=a},2057:function(e,t,r){"use strict";var n=r(4),a=r(2081),o=Object(n.a)(a.a,{target:"ecv1fy50",label:"TransparentLoadingMask"})((function(e){return!e.visible&&"display: none;"}),";opacity:0.4;z-index:1;");t.a=o},2065:function(e,t,r){"use strict";var n=r(15),a=r.n(n),o=r(4),i=(r(1),r(2081)),s=r(0),c=Object(o.a)((function(e){e.height;var t=a()(e,["height"]);return Object(s.f)("div",t,Object(s.f)(i.a,null))}),{target:"e1ply9d40",label:"LoadingPanel"})("flex:1;flex-shrink:0;overflow:hidden;height:",(function(e){return e.height}),";position:relative;border-color:transparent;margin-bottom:0;");c.defaultProps={height:"200px"},t.a=c},2070:function(e,t,r){"use strict";var n=r(10),a=r.n(n),o=r(11),i=r.n(o),s=r(12),c=r.n(s),u=r(13),l=r.n(u),p=r(7),f=r.n(p),d=r(1),v=r.n(d),g=r(2065),h=r(0);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var a=f()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var y=function(e){c()(r,e);var t=b(r);function r(){var e;a()(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={prevReloading:e.props.reloading,prevLoading:e.props.loading,key:1},e}return i()(r,[{key:"render",value:function(){var e=this.props,t=e.height,r=e.loading,n=e.reloading;return r&&!n?Object(h.f)(g.a,{height:t,"data-test-id":"events-request-loading"}):Object(h.f)(v.a.Fragment,{key:String(this.state.key)},this.props.children)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevReloading,n=e.reloading,a=t.prevLoading,o=e.loading;return a!==o?{prevReloading:n,prevLoading:o,key:t.key+1}:o?{prevReloading:n,prevLoading:o,key:t.key}:r&&!n?{prevReloading:n,prevLoading:o,key:t.key+1}:{prevReloading:n,prevLoading:o,key:t.key}}}]),r}(v.a.Component);y.displayName="TransitionChart",y.defaultProps={height:"200px"},t.a=y},2075:function(e,t,r){"use strict";r.d(t,"a",(function(){return y})),r.d(t,"b",(function(){return m})),r.d(t,"c",(function(){return j}));var n=r(22),a=r.n(n),o=r(29),i=r.n(o),s=r(6),c=r.n(s),u=r(37),l=r.n(u),p=r(274),f=r.n(p),d=r(85),v=r(201),g=r(2150);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e,t){var r=t.organization,n=t.project,a=t.environment,o=t.period,i=t.start,s=t.end,c=t.interval,u=t.includePrevious,p=t.query,f=t.yAxis,d=t.field,h=t.topEvents,y=t.orderby,m=Object(v.a)(u,o),O=Object.fromEntries(Object.entries({interval:c,project:n,environment:a,query:p,yAxis:f,field:d,topEvents:h,orderby:y}).filter((function(e){return void 0!==l()(e,2)[1]}))),j=Object(g.a)({period:o,start:i,end:s},{shouldDoublePeriod:m});return e.requestPromise("/organizations/".concat(r.slug,"/events-stats/"),{query:b(b({},O),j)})};function m(e,t,r){return O.apply(this,arguments)}function O(){return(O=i()(a.a.mark((function e(t,r,n){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f()(n,Object.values(d.e)),i=b(b({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-facets/"),{query:i}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t,r){return D.apply(this,arguments)}function D(){return(D=i()(a.a.mark((function e(t,r,n){var o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f()(n,Object.values(d.e)),i=b(b({},o),{},{query:n.query}),e.abrupt("return",t.requestPromise("/organizations/".concat(r,"/events-meta/"),{query:i}).then((function(e){return e.count})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2124:function(e,t,r){var n=r(275),a=r(2158),o=r(366);e.exports=function(e,t){return o(e,a(n(t)))}},2158:function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},2213:function(e,t,r){"use strict";var n=r(6),a=r.n(n),o=r(5),i=r.n(o),s=r(27),c=r.n(s),u=r(15),l=r.n(u),p=r(10),f=r.n(p),d=r(11),v=r.n(d),g=r(12),h=r.n(g),b=r(13),y=r.n(b),m=r(7),O=r.n(m),j=r(1),D=r.n(j),P=r(63),w=r.n(P),k=r(3),S=r(201),R=r(2056),x=r(2063),z=r(705),T=r(2044),E=r(2070),C=r(2082),N=r(16),q=r(26),A=r(2057),L=r(2054),U=r(1995),F=r(61),M=r(2053),J=r(0);function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O()(e);if(t){var a=O()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y()(this,r)}}var W=function(e){h()(r,e);var t=I(r);function r(){var e;f()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={seriesSelection:{},forceUpdate:!1},e.handleLegendSelectChanged=function(t){var r=t.selected,n=Object.keys(r).reduce((function(e,t){return e[t]="Releases"!==t||r[t],e}),{});e.setState({seriesSelection:n,forceUpdate:!0},(function(){return e.setState({forceUpdate:!1})}))},e}return v()(r,[{key:"shouldComponentUpdate",value:function(e,t){return!!t.forceUpdate||(!w()(this.state.seriesSelection,t.seriesSelection)||!(e.reloading||!e.timeseriesData)&&!(w()(this.props.timeseriesData,e.timeseriesData)&&w()(this.props.releaseSeries,e.releaseSeries)&&w()(this.props.previousTimeseriesData,e.previousTimeseriesData)))}},{key:"getChartComponent",value:function(){var e=this.props,t=e.showDaily,r=e.timeseriesData,n=e.yAxis;if(t)return z.a;if(r.length>1)switch(Object(F.g)(n)){case"line":return T.a;case"area":return x.a;default:throw new Error("Unknown multi plot type for ".concat(n))}return x.a}},{key:"render",value:function(){var e=this.props,t=(e.loading,e.reloading,e.yAxis),r=e.releaseSeries,n=e.zoomRenderProps,a=e.timeseriesData,o=e.previousTimeseriesData,s=e.showLegend,u=e.currentSeriesName,p=e.previousSeriesName,f=l()(e,["loading","reloading","yAxis","releaseSeries","zoomRenderProps","timeseriesData","previousTimeseriesData","showLegend","currentSeriesName","previousSeriesName"]),d=this.state.seriesSelection,v=[null!=u?u:Object(k.b)("Current"),null!=p?p:Object(k.b)("Previous")];Array.isArray(r)&&v.push(Object(k.b)("Releases"));var g=s&&{right:16,top:12,icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,align:"left",textStyle:{verticalAlign:"top",fontSize:11,fontFamily:"Rubik"},data:v,selected:d},h={colors:q.b.charts.getColorPalette(a.length-2),grid:{left:"24px",right:"24px",top:"32px",bottom:"12px"},seriesOptions:{showSymbol:!1},tooltip:{trigger:"axis",truncate:80,valueFormatter:function(e){return Object(U.c)(e,t)}},yAxis:{axisLabel:{color:q.b.gray200,formatter:function(e){return Object(U.b)(e,t)}}}},b=this.getChartComponent(),y=Array.isArray(r)?[].concat(c()(a),c()(r)):a;return Object(J.f)(b,i()({},f,n,h,{legend:g,onLegendSelectChanged:this.handleLegendSelectChanged,series:y,previousPeriod:o?[o]:null}))}}]),r}(D.a.Component);W.displayName="Chart";var Q=function(e){h()(r,e);var t=I(r);function r(){return f()(this,r),t.apply(this,arguments)}return v()(r,[{key:"render",value:function(){var e=this.props,t=e.api,r=e.period,n=e.utc,a=e.query,o=e.router,s=e.start,c=e.end,u=e.projects,p=e.environments,f=e.showLegend,d=e.yAxis,v=e.disablePrevious,g=e.disableReleases,h=e.currentSeriesName,b=e.previousSeriesName,y=e.field,m=e.interval,O=e.showDaily,j=e.topEvents,D=e.orderby,P=e.confirmedQuery,w=l()(e,["api","period","utc","query","router","start","end","projects","environments","showLegend","yAxis","disablePrevious","disableReleases","currentSeriesName","previousSeriesName","field","interval","showDaily","topEvents","orderby","confirmedQuery"]),x=!v&&!s&&!c,z=(null!=b?b:d)?Object(k.b)("previous %s",d):void 0,T=null!=h?h:d,q=O?"1d":m||Object(S.c)(this.props,!0),U=function(e){var t=e.zoomRenderProps,r=e.releaseSeries,a=e.errored,o=e.loading,s=e.reloading,c=e.results,u=e.timeseriesData,l=e.previousTimeseriesData;if(a)return Object(J.f)(L.a,null,Object(J.f)(N.Kb,{color:"gray300",size:"lg"}));var p=c||u;return Object(J.f)(E.a,{loading:o,reloading:s},Object(J.f)(A.a,{visible:s}),Object(J.f)(W,i()({},t,{loading:o,reloading:s,utc:n,showLegend:f,releaseSeries:r||[],timeseriesData:p,previousTimeseriesData:l,currentSeriesName:T,previousSeriesName:z,stacked:"number"==typeof j&&j>0,yAxis:d,showDaily:O})))};if(!g){var F=U;U=function(e){return Object(J.f)(C.a,{utc:n,period:r,start:s,end:c,projects:u,environments:p},(function(t){var r=t.releaseSeries;return F(H(H({},e),{},{releaseSeries:r}))}))}}return Object(J.f)(R.a,i()({router:o,period:r,utc:n,projects:u,environments:p},w),(function(e){return Object(J.f)(M.a,i()({},w,{api:t,period:r,project:u,environment:p,start:s,end:c,interval:q,query:a,includePrevious:x,currentSeriesName:T,previousSeriesName:z,yAxis:d,field:y,orderby:D,topEvents:j,confirmedQuery:P}),(function(t){return U(H(H({},t),{},{zoomRenderProps:e}))}))}))}}]),r}(D.a.Component);Q.displayName="EventsChart",t.a=Q},2986:function(e,t,r){"use strict";r.r(t),r.d(t,"Events",(function(){return ye})),r.d(t,"parseRowFromLinks",(function(){return he}));var n=r(22),a=r.n(n),o=r(29),i=r.n(o),s=r(149),c=r.n(s),u=r(6),l=r.n(u),p=r(15),f=r.n(p),d=r(10),v=r.n(d),g=r(11),h=r.n(g),b=r(12),y=r.n(b),m=r(13),O=r.n(m),j=r(7),D=r.n(j),P=r(4),w=r(9),k=r(63),S=r.n(k),R=r(1),x=r.n(R),z=r(47),T=r(185),E=r(32),C=r(3),N=r(1967),q=r(1966),A=r(99),L=r(681),U=r(212),F=r(59),M=r(160),J=r(413),B=r(303),H=r(306),I=r(49),W=r(687),Q=r(52),K=r(8),X=r(216),Z=r(0);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D()(e);if(t){var a=D()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O()(this,r)}}var V=function(e){y()(r,e);var t=G(r);function r(){return v()(this,r),t.apply(this,arguments)}return h()(r,[{key:"render",value:function(){var e=this.props,t=e.events,r=e.organization,n=e.utc,a=e.projectsMap;return t.map((function(e,t){var o=a.get(e.projectID),i=e.title||e.message.split("\n")[0].substr(0,100),s=o?"/organizations/".concat(r.slug,"/projects/").concat(null==o?void 0:o.slug,"/events/").concat(e.eventID,"/"):"";return Object(Z.f)(re,{key:"".concat(null==o?void 0:o.slug,"-").concat(e.eventID),first:0===t},Object(Z.f)(ne,null,Object(Z.f)(ae,null,o?Object(Z.f)(w.Link,{to:s},i):i)),Object(Z.f)(ne,null,e["event.type"]),Object(Z.f)(ne,null,o?Object(Z.f)(H.a,{project:o,avatarSize:16,displayName:Object(Z.f)("span",null,null==o?void 0:o.slug),avatarProps:{consistentWidth:!0}}):Object(Z.f)(W.a,{height:"16px",width:"50px"})),Object(Z.f)(ne,null,e&&e.user&&Object(Z.f)(H.a,{user:e.user,hideEmail:!0,avatarSize:16})),Object(Z.f)(ne,null,Object(Z.f)(oe,{utc:n,date:new Date(e.dateCreated)})))}))}}]),r}(x.a.PureComponent);V.displayName="EventsTableBody";var Y=function(e){y()(r,e);var t=G(r);function r(){return v()(this,r),t.apply(this,arguments)}return h()(r,[{key:"shouldComponentUpdate",value:function(e){return this.props.reloading!==e.reloading||this.props.zoomChanged!==e.zoomChanged||this.props.loading!==e.loading||this.props.loadingProjects!==e.loadingProjects||(this.props.organization!==e.organization||this.props.events!==e.events)}},{key:"componentDidUpdate",value:function(e){this.props.onUpdateComplete&&e.zoomChanged&&this.props.reloading&&this.props.onUpdateComplete()}},{key:"render",value:function(){var e=this.props,t=e.events,r=e.organization,n=e.loading,a=e.reloading,o=e.zoomChanged,i=e.utc,s=t&&!!t.length;return Object(Z.f)(T.a,null,Object(Z.f)(T.e,null,Object(Z.f)(ee,null,Object(Z.f)("div",null,Object(C.b)("Event")),Object(Z.f)("div",null,Object(C.b)("Event Type")),Object(Z.f)("div",null,Object(C.b)("Project")),Object(Z.f)("div",null,Object(C.b)("User")),Object(Z.f)("div",null,Object(C.b)("Time")))),n&&Object(Z.f)(I.default,null),!n&&!s&&Object(Z.f)(B.a,null,Object(Z.f)("p",null,Object(C.b)("No events"))),s&&Object(Z.f)(_,null,(a||o)&&Object(Z.f)(te,{overlay:!0}),Object(Z.f)(V,{projectsMap:this.projectsMap,events:t,organization:r,utc:i})))}},{key:"projectsMap",get:function(){var e=this.props,t=e.organization,r=e.loadingProjects,n=e.projects,a=!r&&n||t.projects||[];return new Map(a.map((function(e){return[e.id,e]})))}}]),r}(x.a.Component);Y.displayName="EventsTable";var $=Object(X.a)(Object(w.withRouter)(Y)),_=Object(P.a)(T.c,{target:"e1n2302f0",label:"StyledPanelBody"})({name:"1npn4o",styles:"overflow-x:auto;padding:0;"}),ee=Object(P.a)("div",{target:"e1n2302f1",label:"TableLayout"})("display:grid;grid-template-columns:0.8fr 0.15fr 0.15fr 0.25fr 200px;grid-column-gap:",Object(K.a)(1.5),";width:100%;"),te=Object(P.a)(I.default,{target:"e1n2302f2",label:"StyledLoadingIndicator"})({name:"mycoky",styles:"padding-top:10vh;z-index:1;&.loading.overlay{align-items:flex-start;}"}),re=Object(P.a)(ee,{target:"e1n2302f3",label:"TableRow"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";border-top:1px solid ",(function(e){return e.first?"transparent":e.theme.innerBorder}),";align-items:center;padding:",Object(K.a)(1)," ",Object(K.a)(2),";"),ne=Object(P.a)("div",{target:"e1n2302f4",label:"TableData"})({name:"i6bazn",styles:"overflow:hidden;"}),ae=Object(P.a)(ne,{target:"e1n2302f5",label:"EventTitle"})("padding-right:",Object(K.a)(2),";",Q.a,";"),oe=Object(P.a)(J.a,{target:"e1n2302f6",label:"StyledDateTime"})("color:",(function(e){return e.theme.gray300}),";",Q.a,";"),ie=r(5),se=r.n(ie),ce=r(2213),ue=r(54),le=r(305);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D()(e);if(t){var a=D()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O()(this,r)}}var fe=Object(le.a)(Object(ue.a)(function(e){y()(r,e);var t=pe(r);function r(){return v()(this,r),t.apply(this,arguments)}return h()(r,[{key:"render",value:function(){var e=this.props,t=e.selection,r=f()(e,["selection"]),n=t.datetime,a=t.projects,o=t.environments;return Object(Z.f)(ce.a,se()({},n,{projects:a||[],environments:o||[]},r))}}]),r}(x.a.Component)));function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){l()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D()(e);if(t){var a=D()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O()(this,r)}}var he=function(e,t){if(!(e=Object(U.a)(e)).previous.results)return"1-".concat(t);var r=(Number(e.previous.cursor.split(":")[1])+Number(e.next.cursor.split(":")[1]))/2+1;return"".concat(r,"-").concat(r+t-1)},be=function(e){y()(r,e);var t=ge(r);function r(){return v()(this,r),t.apply(this,arguments)}return h()(r,[{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.location.query,n=r.statsPeriod,a=f()(r,["statsPeriod"]);return[["eventsMeta","/organizations/".concat(t.slug,"/events-meta/"),{query:Object(M.a)(ve({statsPeriod:n},a))}]]}},{key:"onRequestError",value:function(){z.c(new Error('Unable to fetch "total event count"'))}},{key:"renderError",value:function(){return null}},{key:"renderBody",value:function(){var e=this.state.eventsMeta,t=this.props,r=t.isAllResults,n=t.numRows,a=r?n:e.count;return Object(C.b)(" of ".concat(a.toLocaleString()).concat(r?"":" (estimated)"))}}]),r}(N.a),ye=function(e){y()(n,e);var t,r=ge(n);function n(){var e;v()(this,n);for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=r.call.apply(r,[this].concat(a))).shouldReload=!0,e.handleZoom=function(){return e.setState({zoomed:!0})},e.handleTableUpdateComplete=function(){return e.setState({zoomed:!1})},e}return h()(n,[{key:"shouldComponentUpdate",value:function(e,t){var r=this;return this.state!==t||!!["path","search"].find((function(t){return!S()(r.props.location[t],e.location[t])}))}},{key:"getEndpoints",value:function(){var e=this.props,t=e.organization,r=e.location.query,n=r.statsPeriod,a=f()(r,["statsPeriod"]);return[["events","/organizations/".concat(t.slug,"/events/"),{query:Object(M.a)(ve({statsPeriod:n},a))}]]}},{key:"getTitle",value:function(){return"Events - ".concat(this.props.organization.slug)}},{key:"handleRequestSuccess",value:(t=i()(a.a.mark((function e(t){var r,o,i,s,u,l,p,f,d,v,g,h=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.stateKey,i=t.data,"1"!==(s=t.jqXHR).getResponseHeader("X-Sentry-Direct-Hit")){e.next=11;break}return u=this.props.organization,l=i[0],e.next=6,this.api.requestPromise("/organizations/".concat(u.slug,"/projects/"),{query:{query:"id:".concat(l.projectID)}});case 6:if(!((p=e.sent)&&p.length>0)){e.next=11;break}return f=p[0],w.browserHistory.replace("/organizations/".concat(u.slug,"/projects/").concat(f.slug,"/events/").concat(l.eventID,"/")),e.abrupt("return");case 11:for(d=h.length,v=new Array(d>1?d-1:0),g=1;g<d;g++)v[g-1]=h[g];(r=c()(D()(n.prototype),"handleRequestSuccess",this)).call.apply(r,[this,{stateKey:o,data:i,jqXHR:s}].concat(v));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onRequestError",value:function(e){e&&e.responseJSON&&e.responseJSON.detail&&Object(E.a)(e.responseJSON.detail)}},{key:"renderRowCounts",value:function(){var e=this.state,t=e.events,r=e.eventsPageLinks;return r?he(r,t.length):null}},{key:"renderError",value:function(){return this.renderBody()}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderBody",value:function(){var e=this.props,t=e.organization,r=e.location,a=e.router,o=this.state,i=o.error,s=o.loading,u=o.reloading,l=o.events,p=o.eventsPageLinks,f=s||i||!p?{}:Object(U.a)(p);return Object(Z.f)(x.a.Fragment,null,i&&c()(D()(n.prototype),"renderError",this).call(this,new Error("Unable to load all required endpoints"),!1,!0),Object(Z.f)(T.a,null,Object(Z.f)(fe,{router:a,query:r.query.query,organization:t,onZoom:this.handleZoom})),Object(Z.f)($,{loading:!u&&s,reloading:u,zoomChanged:this.state.zoomed,events:l,organization:t,onUpdateComplete:this.handleTableUpdateComplete}),!s&&!u&&!i&&Object(Z.f)(Oe,null,Object(Z.f)(je,null,l.length?Object(C.b)("Results ".concat(this.renderRowCounts())):Object(C.b)("No Results"),!!l.length&&p&&Object(Z.f)(A.a,{features:["internal-catchall"]},Object(Z.f)(be,{organization:t,location:r,isAllResults:!f.previous.results&&!f.next.results,numRows:l.length}))),Object(Z.f)(me,{pageLinks:p})))}}]),n}(q.a),me=Object(P.a)(L.a,{target:"e1nvp54h0",label:"PaginationNoMargin"})({name:"1uk1gs8",styles:"margin:0;"}),Oe=Object(P.a)("div",{target:"e1nvp54h1",label:"PaginationWrapper"})({name:"1lekzkb",styles:"display:flex;align-items:center;justify-content:space-between;"}),je=Object(P.a)("div",{target:"e1nvp54h2",label:"RowDisplay"})("color:",(function(e){return e.theme.gray200}),";");t.default=Object(F.a)(ye)}}]);
//# sourceMappingURL=Events.js.map