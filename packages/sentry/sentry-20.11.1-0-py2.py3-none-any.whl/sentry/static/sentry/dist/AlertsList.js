(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[59],{2011:function(t,e,n){"use strict";n(1);var r=n(249),a=n.n(r),i=n(0),o=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(i.f)(a.a,{title:e},t.children)};o.displayName="SentryDocumentTitle",e.a=o},2023:function(t,e,n){"use strict";function r(t){var e=t.orgSlug,n=t.transaction,r=t.projectID,a=t.query,i=t.unselectedSeries,o=void 0===i?"p100()":i,c=t.display,s=t.trendDisplay;return{pathname:function(t){var e=t.orgSlug;return"/organizations/".concat(e,"/performance/summary/")}({orgSlug:e}),query:{transaction:n,project:r,environment:a.environment,statsPeriod:a.statsPeriod,start:a.start,end:a.end,query:a.query,unselectedSeries:o,display:c,trendDisplay:s}}}n.d(e,"a",(function(){return r}))},2024:function(t,e,n){"use strict";var r,a,i,o,c,s,u,l,d;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"g",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return l})),n.d(e,"f",(function(){return d})),function(t){t[t.INCIDENT=0]="INCIDENT",t[t.RESOLUTION=1]="RESOLUTION"}(r||(r={})),function(t){t[t.ABOVE=0]="ABOVE",t[t.BELOW=1]="BELOW"}(a||(a={})),function(t){t.ERRORS="events",t.TRANSACTIONS="transactions"}(i||(i={})),function(t){t.DEFAULT="default",t.ERROR="error",t.TRANSACTION="transaction"}(o||(o={})),function(t){t.ERROR_DEFAULT="error_default",t.DEFAULT="default",t.ERROR="error",t.TRANSACTION="transaction"}(c||(c={})),function(t){t.SIX_HOURS="6h",t.ONE_DAY="1d",t.THREE_DAYS="3d",t.SEVEN_DAYS="10000m",t.FOURTEEN_DAYS="14d",t.THIRTY_DAYS="30d"}(s||(s={})),function(t){t[t.ONE_MINUTE=1]="ONE_MINUTE",t[t.FIVE_MINUTES=5]="FIVE_MINUTES",t[t.TEN_MINUTES=10]="TEN_MINUTES",t[t.FIFTEEN_MINUTES=15]="FIFTEEN_MINUTES",t[t.THIRTY_MINUTES=30]="THIRTY_MINUTES",t[t.ONE_HOUR=60]="ONE_HOUR",t[t.TWO_HOURS=120]="TWO_HOURS",t[t.FOUR_HOURS=240]="FOUR_HOURS",t[t.ONE_DAY=1440]="ONE_DAY"}(u||(u={})),function(t){t.EMAIL="email",t.SLACK="slack",t.PAGERDUTY="pagerduty",t.MSTEAMS="msteams",t.SENTRY_APP="sentry_app"}(l||(l={})),function(t){t.SPECIFIC="specific",t.USER="user",t.TEAM="team",t.SENTRY_APP="sentry_app"}(d||(d={}))},2086:function(t,e,n){"use strict";n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return v})),n.d(e,"l",(function(){return y})),n.d(e,"k",(function(){return h})),n.d(e,"j",(function(){return R})),n.d(e,"g",(function(){return E})),n.d(e,"h",(function(){return S})),n.d(e,"f",(function(){return T})),n.d(e,"i",(function(){return A})),n.d(e,"a",(function(){return N})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return P}));var r,a,i=n(16),o=n.n(i),c=n(6),s=n.n(c),u=n(4),l=n(63),d=n(45),f=n(429),b=n(2024),O=n(2168),p=n(2105);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/"))}function v(t,e,n){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/stats/"))}function y(t,e,n,r){var a=r?"POST":"DELETE";return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/subscriptions/"),{method:a})}function h(t,e,n,r){return t.requestPromise("/organizations/".concat(e,"/incidents/").concat(n,"/"),{method:"PUT",data:{status:r}})}function R(t){switch(t.status){case p.c.CLOSED:return!1;default:return!0}}function E(t){var e,n,r=null==t?void 0:t.alertRule,a=null!==(e=null==r?void 0:r.aggregate)&&void 0!==e?e:"",i=null!==(n=null==r?void 0:r.dataset)&&void 0!==n?n:b.c.ERRORS;return O.a.find((function(t){return t.validDataset.includes(i)&&t.match.test(a)}))}function S(t){return{start:Object(d.j)(1e3*t.eventStats.data[0][0]),end:Object(d.j)(1e3*t.eventStats.data[t.eventStats.data.length-1][0])}}function T(t){var e,n=t.orgSlug,r=t.projects,a=t.incident,i=t.stats,c=t.extraQueryParams;if(!(r&&r.length&&a&&i))return"";var s="".concat(a.alertRule.timeWindow,"m"),u=S(i),d=u.start,O=u.end,p=g({id:void 0,name:a&&a.title||"",orderby:"-".concat(Object(l.l)(a.alertRule.aggregate)),yAxis:a.alertRule.aggregate,query:null!==(e=null==a?void 0:a.discoverQuery)&&void 0!==e?e:"",projects:r.filter((function(t){var e=t.slug;return a.projects.includes(e)})).map((function(t){var e=t.id;return Number(e)})),version:2,fields:a.alertRule.dataset===b.c.ERRORS?["issue","count()","count_unique(user)"]:["transaction",a.alertRule.aggregate],start:d,end:O},c),j=f.a.fromSavedQuery(p).getResultsViewUrlTarget(n),m=j.query,v=o()(j,["query"]);return g({query:g(g({},m),{},{interval:s})},v)}function A(t){return!t.hasOwnProperty("triggers")}var N=(r={},s()(r,b.c.ERRORS,Object(u.b)("Errors")),s()(r,b.c.TRANSACTIONS,Object(u.b)("Transactions")),s()(r,b.d.ERROR_DEFAULT,Object(u.b)("event.type:error OR event.type:default")),s()(r,b.d.ERROR,Object(u.b)("event.type:error")),s()(r,b.d.DEFAULT,Object(u.b)("event.type:default")),s()(r,b.d.TRANSACTION,Object(u.b)("event.type:transaction")),r),D=(a={},s()(a,b.d.ERROR_DEFAULT,{dataset:b.c.ERRORS,eventTypes:[b.e.ERROR,b.e.DEFAULT]}),s()(a,b.d.ERROR,{dataset:b.c.ERRORS,eventTypes:[b.e.ERROR]}),s()(a,b.d.DEFAULT,{dataset:b.c.ERRORS,eventTypes:[b.e.DEFAULT]}),s()(a,b.d.TRANSACTION,{dataset:b.c.TRANSACTIONS,eventTypes:[b.e.TRANSACTION]}),a);function P(t,e){return t===b.c.TRANSACTIONS?b.d.TRANSACTION:e?e.includes(b.e.DEFAULT)&&e.includes(b.e.ERROR)?b.d.ERROR_DEFAULT:e.includes(b.e.DEFAULT)?b.d.DEFAULT:b.d.ERROR:b.d.ERROR}},2105:function(t,e,n){"use strict";var r,a,i,o,c;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return c})),function(t){t[t.DETECTED=0]="DETECTED",t[t.CREATED=1]="CREATED",t[t.TRIGGERED=2]="TRIGGERED"}(r||(r={})),function(t){t[t.CREATED=0]="CREATED",t[t.DETECTED=1]="DETECTED",t[t.STATUS_CHANGE=2]="STATUS_CHANGE",t[t.COMMENT=3]="COMMENT",t[t.STARTED=4]="STARTED"}(a||(a={})),function(t){t[t.OPENED=1]="OPENED",t[t.CLOSED=2]="CLOSED",t[t.WARNING=10]="WARNING",t[t.CRITICAL=20]="CRITICAL"}(i||(i={})),function(t){t[t.MANUAL=1]="MANUAL",t[t.RULE_UPDATED=2]="RULE_UPDATED",t[t.RULE_TRIGGERED=3]="RULE_TRIGGERED"}(o||(o={})),function(t){t[t.PENDING=0]="PENDING",t[t.SNAPSHOT=4]="SNAPSHOT",t[t.DISABLED=5]="DISABLED"}(c||(c={}))},2168:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return g}));var r=n(28),a=n.n(r),i=n(6),o=n.n(i),c=n(4),s=n(176),u=n(559),l=n(2023),d=n(2086),f=n(2024);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p=[{name:Object(c.b)("Error count"),match:/^count\(\)/,validDataset:[f.c.ERRORS],default:"count()",makeCtaParams:g},{name:Object(c.b)("Users affected"),match:/^count_unique\(tags\[sentry:user\]\)/,validDataset:[f.c.ERRORS],default:"count_unique(tags[sentry:user])",makeCtaParams:g},{name:Object(c.b)("Latency"),match:/^(p[0-9]{2,3}|percentile\(transaction\.duration,[^)]+\)|avg\([^)]+\))/,validDataset:[f.c.TRANSACTIONS],default:"percentile(transaction.duration, 0.95)",makeCtaParams:function(t){return j({opts:t,tooltip:Object(c.b)("Latency by Transaction")})}},{name:Object(c.b)("Apdex"),match:/^apdex\([0-9.]+\)/,validDataset:[f.c.TRANSACTIONS],default:"apdex(300)",makeCtaParams:function(t){return j({opts:t,tooltip:Object(c.b)("Apdex by Transaction")})}},{name:Object(c.b)("Transaction Count"),match:/^count\(\)/,validDataset:[f.c.TRANSACTIONS],default:"count()",makeCtaParams:function(t){return j({opts:t})}},{name:Object(c.b)("Failure rate"),match:/^failure_rate\(\)/,validDataset:[f.c.TRANSACTIONS],default:"failure_rate()",makeCtaParams:function(t){var e,n,r=t.orgSlug,a=t.incident,i=t.projects,o=t.stats;if(!a||!o)return{to:"",buttonText:Object(c.b)("Incident details")};var l=Object(u.c)(null!==(e=a.discoverQuery)&&void 0!==e?e:""),f=null===(n=l.getTagValues("transaction"))||void 0===n?void 0:n.find((function(t){return!t.includes("*")})),b=void 0!==f?{fields:["transaction.status","count()"],orderby:"-count",display:s.d.TOP5}:{fields:["transaction","failure_rate()"],orderby:"-failure_rate",display:s.d.TOP5};return{to:Object(d.f)({orgSlug:r,projects:i,incident:a,stats:o,extraQueryParams:b}),buttonText:Object(c.b)("Open in Discover"),title:void 0===f?Object(c.b)("Failure rate by transaction"):void 0}}}];function j(t){var e,n,r=t.opts,i=r.orgSlug,o=r.projects,f=r.incident,b=r.stats,p=t.tooltip;if(!f||!b)return{to:"",buttonText:Object(c.b)("Incident details")};var j=null===(n=Object(u.c)(null!==(e=f.discoverQuery)&&void 0!==e?e:"").getTagValues("transaction"))||void 0===n?void 0:n.find((function(t){return!t.includes("*")}));if(void 0!==j){var g=Object(d.h)(b);return{to:Object(l.a)({orgSlug:i,transaction:j,projectID:o.filter((function(t){var e=t.slug;return f.projects.includes(e)})).map((function(t){return t.id})),query:O({},g)}),buttonText:Object(c.b)("View Transaction Summary"),title:j}}var m={fields:a()(new Set(["transaction","count()",f.alertRule.aggregate])),orderby:"-count",display:s.d.TOP5};return{to:Object(d.f)({orgSlug:i,projects:o,incident:f,stats:b,extraQueryParams:m}),buttonText:Object(c.b)("Open in Discover"),title:p}}function g(t){var e=t.orgSlug,n=t.projects,r=t.incident,a=t.stats;if(!r)return{buttonText:Object(c.b)("Open in Discover"),to:""};var i={display:s.d.TOP5};return{buttonText:Object(c.b)("Open in Discover"),to:Object(d.f)({orgSlug:e,projects:n,incident:r,stats:a,extraQueryParams:i})}}},2169:function(t,e,n){"use strict";var r=n(3),a=(n(1),n(165)),i=n(8),o=n(0);function c(t){var e=t.className,n=t.image,r=t.children;return Object(o.f)(a.a,{className:e},Object(o.f)(s,null,Object(o.f)(l,null,n),Object(o.f)(u,null,r)))}c.displayName="OnboardingPanel";var s=Object(r.a)("div",{target:"eipqko00",label:"Container"})("padding:",Object(i.a)(3),";position:relative;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){display:flex;align-items:center;flex-direction:row;justify-content:center;flex-wrap:wrap;min-height:300px;max-width:1000px;margin:0 auto;}@media (min-width:",(function(t){return t.theme.breakpoints[1]}),"){min-height:350px;}"),u=Object(r.a)("div",{target:"eipqko01",label:"StyledBox"})("z-index:1;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:2;}"),l=Object(r.a)(u,{target:"eipqko02",label:"IlloBox"})("position:relative;min-height:100px;max-width:300px;margin:",Object(i.a)(2)," auto;@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){flex:1;margin:",Object(i.a)(3),";max-width:auto;}");e.a=c},2214:function(t,e,n){"use strict";function r(t,e){return t.requestPromise("/promptsactivity/",{method:"PUT",data:{organization_id:e.organizationId,project_id:e.projectId,feature:e.feature,status:e.status}})}n.d(e,"a",(function(){return r}))},2257:function(t,e,n){"use strict";var r=n(7),a=n.n(r),i=(n(1),n(4)),o=n(15),c=n(31),s=n(428),u=n(452),l=n(0),d=function(t){var e=t.router,n=t.organization,r=t.buttonProps,d=t.iconProps;return Object(l.f)(s.a,{organization:n,access:["project:write"]},(function(t){var s=t.hasAccess;return Object(l.f)(c.a,a()({disabled:!s,title:s?void 0:Object(i.b)("Users with admin permission or higher can create alert rules."),onClick:function(t){t.preventDefault(),Object(u.a)("/organizations/".concat(n.slug,"/alerts/:projectId/new/?referrer=alert_stream"),e)},priority:"primary",href:"#",icon:Object(l.f)(o.qb,d)},r),Object(i.b)("Create Alert Rule"))}))};d.displayName="CreateRuleButton",e.a=d},2337:function(t,e,n){"use strict";var r=n(3),a=(n(1),n(15)),i=n(452),o=n(4),c=n(101),s=n(31),u=n(121),l=n(431),d=n(319),f=n(8),b=n(70),O=n(2257),p=n(0),j=function(t){var e=t.router,n=t.organization,r=t.activeTab;return Object(p.f)(d.b,null,Object(p.f)(g,null,Object(p.f)(m,null,Object(o.b)("Alerts")),Object(p.f)(v,{underlined:!0},Object(p.f)(c.a,{features:["incidents"],organization:n},Object(p.f)("li",{className:"stream"===r?"active":""},Object(p.f)(b.a,{to:"/organizations/".concat(n.slug,"/alerts/")},Object(o.b)("Metric Alerts")))),Object(p.f)("li",{className:"rules"===r?"active":""},Object(p.f)(b.a,{to:"/organizations/".concat(n.slug,"/alerts/rules/")},Object(o.b)("Alert Rules"))))),Object(p.f)(d.c,null,Object(p.f)(y,{gap:1},Object(p.f)(s.a,{size:"small",onClick:function(t){t.preventDefault(),Object(i.a)("/settings/".concat(n.slug,"/projects/:projectId/alerts/"),e)},href:"#",icon:Object(p.f)(a.ob,{size:"xs"})},Object(o.b)("Settings")),Object(p.f)(O.a,{organization:n,router:e,iconProps:{size:"xs"},buttonProps:{size:"small"}}))))};j.displayName="AlertHeader",e.a=j;var g=Object(r.a)(d.d,{target:"eorj8dc0",label:"StyledLayoutHeaderContent"})({name:"gx0lhm",styles:"margin-bottom:0;"}),m=Object(r.a)(d.h,{target:"eorj8dc1",label:"StyledLayoutTitle"})({name:"8kn4zf",styles:"margin-top:0;"}),v=Object(r.a)(l.a,{target:"eorj8dc2",label:"StyledNavTabs"})("margin-top:15px;margin-bottom:0;border-bottom:0 !important;li{margin-right:",Object(f.a)(.5),";}li > a{padding:",Object(f.a)(1)," ",Object(f.a)(2),";}"),y=Object(r.a)(u.a,{target:"eorj8dc3",label:"Actions"})({name:"xgff9b",styles:"height:32px;"})},2747:function(t,e,n){t.exports=n.p+"alerts-empty-state.9078ef.svg"},2976:function(t,e,n){"use strict";n.r(e);var r=n(7),a=n.n(r),i=n(22),o=n.n(i),c=n(30),s=n.n(c),u=n(6),l=n.n(u),d=n(9),f=n.n(d),b=n(10),O=n.n(b),p=n(12),j=n.n(p),g=n(13),m=n.n(g),v=n(5),y=n.n(v),h=n(3),R=n(1),E=n.n(R),S=n(1138),T=n.n(S),A=n(131),N=n.n(A),D=n(15),P=n(165),I=n(4),w=n(37),k=n(703),x=n(101),L=n(31),C=n(121),_=n(427),U=n(58),z=n(44),q=n(706),F=n(319),M=n(2011),B=n(251),G=n(8),H=n(56),V=n(713),W=n(2214),Y=n(73),Q=n(2337),X=Object(h.a)("div",{target:"e1k7qk1w0",label:"TableLayout"})("display:grid;grid-template-columns:",(function(t){return"open"===t.status?"4fr 1fr 2fr":"3fr 2fr 2fr 1fr 2fr"}),";grid-column-gap:",Object(G.a)(1.5),";width:100%;align-items:center;"),K=Object(h.a)("div",{target:"e1k7qk1w1",label:"TitleAndSparkLine"})("display:",(function(t){return"open"===t.status?"grid":"flex"}),";grid-gap:",Object(G.a)(1),";grid-template-columns:auto 120px;align-items:center;padding-right:",Object(G.a)(2),";overflow:hidden;"),J=n(375),Z=n.n(J),$=n(39),tt=n.n($),et=n(446),nt=n(143),rt=n(318),at=n(70),it=n(25),ot=n(207),ct=n(29),st=n(194),ut=n(48),lt=n(2105),dt=n(2086),ft=n(33),bt=n.n(ft),Ot=n(710),pt=n(0);function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var gt=E.a.lazy((function(){return Promise.all([n.e(26),n.e(191)]).then(n.bind(null,2953))})),mt=E.a.lazy((function(){return Promise.all([n.e(26),n.e(192)]).then(n.bind(null,2954))})),vt=function(t){j()(n,t);var e=jt(n);function n(){return f()(this,n),e.apply(this,arguments)}return O()(n,[{key:"render",value:function(){var t=this.props,e=t.className,n=t.error,r=t.eventStats;if(n)return Object(pt.f)(Rt,{error:n});if(!r)return Object(pt.f)(ht,null);var a=r.data.map((function(t){var e=bt()(t,2)[1];return e&&Array.isArray(e)&&e.length&&e[0].count||0}));return Object(pt.f)(E.a.Suspense,{fallback:Object(pt.f)(ht,null)},Object(pt.f)("div",{"data-test-id":"incident-sparkline",className:e},Object(pt.f)(gt,{data:a,width:100,height:32},Object(pt.f)(mt,{style:{stroke:it.b.gray300,fill:"none",strokeWidth:2}}))))}}]),n}(E.a.Component);vt.displayName="SparkLine";var yt=Object(h.a)(vt,{target:"e1ut8dj0",label:"StyledSparkLine"})("flex-shrink:0;width:100%;height:",38,"px;"),ht=Object(h.a)(Ot.a,{target:"e1ut8dj1",label:"SparkLinePlaceholder"})("height:",38,"px;"),Rt=Object(h.a)(ht,{target:"e1ut8dj2",label:"SparklineError"})({name:"mp4ek8",styles:"align-items:center;line-height:1;"}),Et=yt;function St(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var Tt=function(t){j()(n,t);var e=St(n);function n(){var t;f()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).getProject=Z()((function(t,e){return e.find((function(e){return e.slug===t}))})),t}return O()(n,[{key:"getEndpoints",value:function(){var t=this.props,e=t.orgId,n=t.incident;return"open"===t.filteredStatus?[["stats","/organizations/".concat(e,"/incidents/").concat(n.identifier,"/stats/")]]:[]}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderError",value:function(){return this.renderBody()}},{key:"renderTimeSince",value:function(t){return Object(pt.f)(Nt,null,Object(pt.f)(ot.a,{date:t}))}},{key:"renderStatusIndicator",value:function(){var t=this.props.incident.status,e=t===lt.c.CLOSED,n=t===lt.c.WARNING,r=e?it.b.gray200:n?it.b.orange300:it.b.red200,a=e?Object(I.b)("Resolved"):n?Object(I.b)("Warning"):Object(I.b)("Critical");return Object(pt.f)(ct.a,{title:Object(I.c)("Status: [text]",{text:a})},Object(pt.f)(Pt,{color:r}))}},{key:"renderBody",value:function(){var t=this.props,e=t.incident,n=t.orgId,r=t.projectsLoaded,a=t.projects,i=t.filteredStatus,o=this.state,c=o.error,s=o.stats,u=tt()(e.dateStarted),l=tt.a.duration(tt()(e.dateClosed||new Date).diff(u)).as("seconds"),d=e.projects[0];return Object(pt.f)(nt.a,null,Object(pt.f)(kt,null,Object(pt.f)(X,{status:i},Object(pt.f)(K,{status:i},Object(pt.f)(It,null,this.renderStatusIndicator(),Object(pt.f)(wt,{to:"/organizations/".concat(n,"/alerts/").concat(e.identifier,"/")},"Alert #",e.id),e.title),"open"===i&&Object(pt.f)(Et,{error:c&&Object(pt.f)(At,null),eventStats:null==s?void 0:s.eventStats})),Object(pt.f)(Dt,{avatarSize:18,project:r?this.getProject(d,a):{slug:d}}),this.renderTimeSince(e.dateStarted),"closed"===i&&Object(pt.f)(et.a,{seconds:Object(st.a)({value:l,fixed:1200})}),"closed"===i&&e.dateClosed&&this.renderTimeSince(e.dateClosed))))}},{key:"metricPreset",get:function(){var t=this.props.incident;return t?Object(dt.g)(t):void 0}}]),n}(k.a);function At(){return Object(pt.f)(ct.a,{title:Object(I.b)("Error loading alert stats")},Object(pt.f)(D.Kb,null))}At.displayName="ErrorLoadingStatsIcon";var Nt=Object(h.a)("div",{target:"e12tl7g20",label:"CreatedResolvedTime"})(ut.a," line-height:1.4;display:flex;align-items:center;"),Dt=Object(h.a)(rt.a,{target:"e12tl7g21",label:"ProjectBadge"})({name:"6su6fj",styles:"flex-shrink:0;"}),Pt=Object(h.a)("div",{target:"e12tl7g22",label:"StatusIndicator"})("width:10px;height:12px;background:",(function(t){return t.color}),";display:inline-block;border-top-right-radius:40%;border-bottom-right-radius:40%;margin-bottom:-1px;"),It=Object(h.a)("span",{target:"e12tl7g23",label:"Title"})(ut.a),wt=Object(h.a)(at.a,{target:"e12tl7g24",label:"IncidentLink"})("padding:0 ",Object(G.a)(1),";"),kt=Object(h.a)(P.f,{target:"e12tl7g25",label:"IncidentPanelItem"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";padding:",Object(G.a)(1.5)," ",Object(G.a)(2)," ",Object(G.a)(1.5)," 0;"),xt=Tt,Lt=n(2257),Ct=n(2169),_t=n(2747),Ut=n.n(_t);function zt(t){var e=t.actions;return Object(pt.f)(Ct.a,{image:Object(pt.f)(qt,{src:Ut.a})},Object(pt.f)("h3",null,Object(I.b)("More signal, less noise")),Object(pt.f)("p",null,Object(I.b)("Not every error is worth an email. Set your own rules for alerts you need, with information that helps.")),Object(pt.f)(Ft,{gap:1},e))}zt.displayName="Onboarding";var qt=Object(h.a)("img",{target:"e1ljbtxe0",label:"AlertsImage"})("@media (min-width:",(function(t){return t.theme.breakpoints[0]}),"){user-select:none;position:absolute;top:0;bottom:0;width:220px;margin-top:auto;margin-bottom:auto;transform:translateX(-50%);left:50%;}@media (min-width:",(function(t){return t.theme.breakpoints[2]}),"){transform:translateX(-60%);width:280px;}@media (min-width:",(function(t){return t.theme.breakpoints[3]}),"){transform:translateX(-75%);width:320px;}"),Ft=Object(h.a)(C.a,{target:"e1ljbtxe1",label:"ButtonList"})({name:"1tuvsuv",styles:"grid-template-columns:repeat(auto-fit,minmax(130px,max-content));"}),Mt=zt;function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ht(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=y()(t);if(e){var a=y()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m()(this,n)}}var Vt="https://docs.sentry.io/workflow/alerts-notifications/alerts/?_ga=2.21848383.580096147.1592364314-1444595810.1582160976";function Wt(t){return["open","closed"].includes(t)?t:"open"}var Yt=function(t){j()(r,t);var e,n=Ht(r);function r(){return f()(this,r),n.apply(this,arguments)}return O()(r,[{key:"getEndpoints",value:function(){var t=this.props,e=t.params,n=t.location.query,r=Wt(n.status);return[["incidentList","/organizations/".concat(e&&e.orgId,"/incidents/"),{query:Gt(Gt({},n),{},{status:r})}]]}},{key:"onLoadAllEndpointsSuccess",value:(e=s()(o.a.mark((function t(){var e,n,r,a,i,c,s,u,l,d;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.state.incidentList)&&0===n.length){t.next=4;break}return this.setState({hasAlertRule:!0,firstVisitShown:!1}),t.abrupt("return");case 4:return this.setState({loading:!0}),r=this.props,a=r.params,i=r.location,c=r.organization,t.next=8,this.api.requestPromise("/organizations/".concat(null==a?void 0:a.orgId,"/alert-rules/"),{method:"GET",query:i.query});case 8:if(s=t.sent,!(u=s.length>0)){t.next=13;break}return this.setState({hasAlertRule:u,firstVisitShown:!1,loading:!1}),t.abrupt("return");case 13:return t.next=15,this.api.requestPromise("/promptsactivity/",{query:{organization_id:c.id,feature:"alert_stream"}});case 15:l=t.sent,(d=!(null==l?void 0:null===(e=l.data)||void 0===e?void 0:e.dismissed_ts))&&Object(W.a)(this.api,{feature:"alert_stream",organizationId:c.id,status:"dismissed"}),this.setState({hasAlertRule:u,firstVisitShown:d,loading:!1});case 19:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"tryRenderOnboarding",value:function(){if(!this.state.firstVisitShown)return null;var t=Object(pt.f)(E.a.Fragment,null,Object(pt.f)(L.a,{size:"small",external:!0,href:Vt},Object(I.b)("View Features")),Object(pt.f)(Lt.a,a()({},this.props,{iconProps:{size:"xs"},buttonProps:{size:"small"}})));return Object(pt.f)(Mt,{actions:t})}},{key:"tryRenderEmpty",value:function(){var t=this.state,e=t.hasAlertRule,n=t.incidentList,r=Wt(this.props.location.query.status);return!n||n.length>0?null:Object(pt.f)(_.a,{size:"medium",icon:Object(pt.f)(D.i,{isCircled:!0,size:"48"}),title:e?"open"===r?Object(I.b)("No unresolved metric alerts in these projects."):Object(I.b)("No resolved metric alerts in these projects."):Object(I.b)("No metric alert rules exist for these projects."),description:Object(I.c)("Learn more about [link:Metric Alerts]",{link:Object(pt.f)(U.a,{href:Vt})})})}},{key:"renderLoading",value:function(){return this.renderBody()}},{key:"renderList",value:function(){var t,e,n=this.state,r=n.loading,a=n.incidentList,i=n.incidentListPageLinks,o=n.hasAlertRule,c=this.props.params.orgId,s=new Set(T()(null==a?void 0:a.map((function(t){return t.projects})))),u=!(!a||0!==a.length||void 0!==o),l=r||u,d=Wt(this.props.location.query.status);return Object(pt.f)(E.a.Fragment,null,null!==(t=this.tryRenderOnboarding())&&void 0!==t?t:Object(pt.f)(P.a,null,!r&&Object(pt.f)(Jt,null,Object(pt.f)(X,{status:d},Object(pt.f)(Kt,{status:d},Object(pt.f)("div",null,Object(I.b)("Alert")),"open"===d&&Object(pt.f)("div",null,Object(I.b)("Graph"))),Object(pt.f)("div",null,Object(I.b)("Project")),Object(pt.f)("div",null,Object(I.b)("Triggered")),"closed"===d&&Object(pt.f)("div",null,Object(I.b)("Duration")),"closed"===d&&Object(pt.f)("div",null,Object(I.b)("Resolved")))),l?Object(pt.f)(z.default,null):null!==(e=this.tryRenderEmpty())&&void 0!==e?e:Object(pt.f)(P.c,null,Object(pt.f)(B.a,{orgId:c,slugs:Array.from(s)},(function(t){var e=t.initiallyLoaded,n=t.projects;return a.map((function(t){return Object(pt.f)(xt,{key:t.id,projectsLoaded:e,projects:n,incident:t,orgId:c,filteredStatus:d})}))})))),Object(pt.f)(q.a,{pageLinks:i}))}},{key:"renderBody",value:function(){var t=this.props,e=t.params,n=t.location,r=t.organization,a=t.router,i=n.pathname,o=n.query,c=e.orgId,s=N()(Gt(Gt({},o),{},{status:"open"}),"cursor"),u=N()(Gt(Gt({},o),{},{status:"closed"}),"cursor"),l=Wt(o.status);return Object(pt.f)(M.a,{title:Object(I.b)("Alerts"),objSlug:c},Object(pt.f)(V.a,{organization:r,showDateSelector:!1},Object(pt.f)(Q.a,{organization:r,router:a,activeTab:"stream"}),Object(pt.f)(F.a,null,Object(pt.f)(F.f,{fullWidth:!0},!this.tryRenderOnboarding()&&Object(pt.f)(Xt,{merged:!0,active:l},Object(pt.f)(L.a,{to:{pathname:i,query:s},barId:"open",size:"small"},Object(I.b)("Unresolved")),Object(pt.f)(L.a,{to:{pathname:i,query:u},barId:"closed",size:"small"},Object(I.b)("Resolved"))),this.renderList()))))}}]),r}(k.a),Qt=function(t){j()(n,t);var e=Ht(n);function n(){return f()(this,n),e.apply(this,arguments)}return O()(n,[{key:"componentDidMount",value:function(){this.trackView()}},{key:"componentDidUpdate",value:function(t){var e,n;(null===(e=t.location.query)||void 0===e?void 0:e.status)!==(null===(n=this.props.location.query)||void 0===n?void 0:n.status)&&this.trackView()}},{key:"trackView",value:function(){var t=this.props,e=t.location,n=t.organization,r=Wt(e.query.status);Object(w.d)({eventKey:"alert_stream.viewed",eventName:"Alert Stream: Viewed",organization_id:n.id,status:r})}},{key:"renderNoAccess",value:function(){return Object(pt.f)(F.a,null,Object(pt.f)(F.f,{fullWidth:!0},Object(pt.f)(Y.b,{type:"warning"},Object(I.b)("You don't have access to this feature"))))}},{key:"render",value:function(){var t=this.props.organization;return Object(pt.f)(x.a,{features:["organizations:incidents"],organization:t,hookName:"feature-disabled:alerts-page",renderDisabled:this.renderNoAccess},Object(pt.f)(Yt,this.props))}}]),n}(E.a.Component);Qt.displayName="IncidentsListContainer";var Xt=Object(h.a)(C.a,{target:"ebw9n8a0",label:"StyledButtonBar"})("width:100px;margin-bottom:",Object(G.a)(1),";"),Kt=Object(h.a)(K,{target:"ebw9n8a1",label:"PaddedTitleAndSparkLine"})("padding-left:",Object(G.a)(2),";"),Jt=Object(h.a)(P.e,{target:"ebw9n8a2",label:"StyledPanelHeader"})("padding:",Object(G.a)(1.5)," ",Object(G.a)(2)," ",Object(G.a)(1.5)," 0;");e.default=Object(H.a)(Qt)}}]);
//# sourceMappingURL=AlertsList.js.map