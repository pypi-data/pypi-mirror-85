(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[94],{2085:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w})),n.d(e,"a",(function(){return S}));var r=n(22),a=n.n(r),i=n(9),o=n.n(i),c=n(10),s=n.n(c),u=n(12),l=n.n(u),f=n(13),p=n.n(f),d=n(5),b=n.n(d),y=n(30),h=n.n(y),O=n(1),v=n.n(O),g=n(0);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}function m(t,e){var n=t.split(" ")[0],r=t.split(" ").splice(1).join(" "),a=e.generationByIdentifier(n);return void 0===a?t:a+" "+r}function w(){return x.apply(this,arguments)}function x(){return(x=h()(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.e(204).then(n.t.bind(null,2237,7)));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S=function(t){l()(n,t);var e=j(n);function n(t){var r;return o()(this,n),(r=e.call(this,t))._isMounted=void 0,r.state={iOSDeviceList:null},r}return s()(n,[{key:"componentDidMount",value:function(){var t=this;this._isMounted=!0,w().then((function(e){t._isMounted&&t.setState({iOSDeviceList:e})}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var t=this.props,e=t.value,n=t.children,r=this.state.iOSDeviceList;if(!e)return null;if(!r)return e;var a=m(e,r);return Object(g.f)("span",{"data-test-id":"loaded-device-name"},n?n(a):a)}}]),n}(v.a.Component);S.displayName="DeviceName"},2218:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r,a=n(7),i=n.n(a),o=n(33),c=n.n(o),s=n(9),u=n.n(s),l=n(10),f=n.n(l),p=n(12),d=n.n(p),b=n(13),y=n.n(b),h=n(5),O=n.n(h),v=n(144),g=n.n(v),j=n(61),m=n.n(j),w=n(1),x=n.n(w),S=n(34),k=n(101),D=n(31),P=n(4),R=n(51),q=n(56),E=n(0);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}
//! Coordinate with other ExportQueryType (src/sentry/data_export/base.py)
();return function(){var n,r=O()(t);if(e){var a=O()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}!function(t){t.IssuesByTag="Issues-by-Tag",t.Discover="Discover"}(r||(r={}));var L=function(t){d()(n,t);var e=z(n);function n(){var t;u()(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))).state=t.initialState,t.resetState=function(){t.setState(t.initialState)},t.startDataExport=function(){var e=t.props,n=e.api,r=e.organization.slug,a=e.payload,i=a.queryType,o=a.queryInfo;t.setState({inProgress:!0}),n.requestPromise("/organizations/".concat(r,"/data-export/"),{includeAllArgs:!0,method:"POST",data:{query_type:i,query_info:o}}).then((function(t){var e=c()(t,3),n=(e[0],e[1],e[2]);Object(S.d)(201===(null==n?void 0:n.status)?Object(P.b)("Sit tight. We'll shoot you an email when your data is ready for download."):Object(P.b)("It looks like we're already working on it. Sit tight, we'll email you."))})).catch((function(e){var n,r,a=null!==(n=null==e?void 0:null===(r=e.responseJSON)||void 0===r?void 0:r.detail)&&void 0!==n?n:"We tried our hardest, but we couldn't export your data. Give it another go.";Object(S.a)(Object(P.b)(a)),t.setState({inProgress:!1})}))},t}return f()(n,[{key:"componentDidUpdate",value:function(t){var e=t.payload,n=this.props.payload;m()(e,n)||this.resetState()}},{key:"render",value:function(){var t=this.state.inProgress,e=this.props,n=e.children,r=e.disabled,a=e.icon;return Object(E.f)(k.a,{features:["organizations:discover-query"]},t?Object(E.f)(D.a,i()({size:"small",priority:"default",title:"You can get on with your life. We'll email you when your data's ready."},this.props,{disabled:!0,icon:a}),Object(P.b)("We're working on it...")):Object(E.f)(D.a,i()({onClick:g()(this.startDataExport,500),disabled:r||!1,size:"small",priority:"default",title:"Put your data to work. Start your export and we'll email you when it's finished.",icon:a},this.props),n||Object(P.b)("Export All to CSV")))}},{key:"initialState",get:function(){return{inProgress:!1}}}]),n}(x.a.Component);L.displayName="DataExport",e.b=Object(R.a)(Object(q.a)(L))},2918:function(t,e,n){"use strict";n.r(e),n.d(e,"GroupTagValues",(function(){return C}));var r=n(6),a=n.n(r),i=n(9),o=n.n(i),c=n(10),s=n.n(c),u=n(12),l=n.n(u),f=n(13),p=n.n(f),d=n(5),b=n.n(d),y=n(3),h=n(387),O=n.n(h),v=n(1163),g=n.n(v),j=n(1),m=n.n(j),w=n(21),x=n(4),S=n(703),k=n(420),D=n(31),P=n(121),R=n(2085),q=n(58),E=n(443),z=n(15),L=n(494),T=n(706),I=n(207),N=n(2218),V=n(8),W=n(0);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var C=function(t){l()(n,t);var e=A(n);function n(){return o()(this,n),e.apply(this,arguments)}return s()(n,[{key:"getEndpoints",value:function(){var t=this.props.environments,e=this.props.params,n=e.groupId,r=e.tagKey;return[["tag","/issues/".concat(n,"/tags/").concat(r,"/")],["tagValueList","/issues/".concat(n,"/tags/").concat(r,"/values/"),{query:{environment:t}}]]}},{key:"renderBody",value:function(){var t=this.props,e=t.group,n=t.params,r=n.orgId,a=n.tagKey,i=t.environments,o=this.state,c=o.tag,s=o.tagValueList,u=o.tagValueListPageLinks,l=O()(s,g()("count")).reverse();if(0===l.length&&i.length>0)return Object(W.f)(L.a,{heading:Object(x.b)("Sorry, the tags for this issue could not be found."),message:Object(x.b)("No tags were found for the currently selected environments")});var f="/organizations/".concat(r,"/issues/"),p=l.map((function(t,e){var n,r=c.totalValues?"".concat(Object(w.s)(t.count,c.totalValues).toFixed(2),"%"):"--",a=t.query||"".concat(c.key,':"').concat(t.value,'"');return Object(W.f)("tr",{key:e},Object(W.f)("td",{className:"bar-cell"},Object(W.f)("span",{className:"label"},r)),Object(W.f)("td",null,Object(W.f)(G,null,Object(W.f)(E.a,{to:{pathname:f,query:{query:a}}},"user"===c.key?Object(W.f)(k.a,{user:_(_({},t),{},{id:null!==(n=t.identifier)&&void 0!==n?n:""}),avatarSize:20,hideEmail:!0}):Object(W.f)(R.a,{value:t.name})),t.email&&Object(W.f)(K,{href:"mailto:".concat(t.email)},Object(W.f)(z.T,{size:"xs",color:"gray300"})),Object(w.n)(t.value)&&Object(W.f)(K,{href:t.value},Object(W.f)(z.bb,{size:"xs",color:"gray300"})))),Object(W.f)("td",null,Object(W.f)(I.a,{date:t.lastSeen})))}));return Object(W.f)(m.a.Fragment,null,Object(W.f)(M,null,Object(W.f)(H,null,"user"===c.key?Object(x.b)("Affected Users"):c.name),Object(W.f)(J,{gap:1},Object(W.f)(U,{size:"small",priority:"default",href:"/".concat(r,"/").concat(e.project.slug,"/issues/").concat(e.id,"/tags/").concat(a,"/export/")},Object(x.b)("Export Page to CSV")),Object(W.f)(N.b,{payload:{queryType:N.a.IssuesByTag,queryInfo:{project:e.project.id,group:e.id,key:a}}}))),Object(W.f)("table",{className:"table table-striped"},Object(W.f)("thead",null,Object(W.f)("tr",null,Object(W.f)(F,{width:20},"%"),Object(W.f)("th",null),Object(W.f)(F,{width:300},Object(x.b)("Last Seen")))),Object(W.f)("tbody",null,p)),Object(W.f)(T.a,{pageLinks:u}),Object(W.f)("p",null,Object(W.f)("small",null,Object(x.b)("Note: Percentage of issue is based on events seen in the last 7 days."))))}}]),n}(S.a),M=Object(y.a)("div",{target:"ewx0sc40",label:"Header"})({name:"txxdff",styles:"display:flex;align-items:center;margin:0 0 20px;"}),H=Object(y.a)("h3",{target:"ewx0sc41",label:"HeaderTitle"})({name:"1uk1gs8",styles:"margin:0;"}),J=Object(y.a)(P.a,{target:"ewx0sc42",label:"HeaderButtons"})("align-items:stretch;margin:0px ",Object(V.a)(1.5),";"),U=Object(y.a)(D.a,{target:"ewx0sc43",label:"BrowserExportButton"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),F=Object(y.a)("th",{target:"ewx0sc44",label:"TableHeader"})("width:",(function(t){return t.width}),"px;"),G=Object(y.a)("div",{target:"ewx0sc45",label:"ValueWrapper"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),K=Object(y.a)(q.a,{target:"ewx0sc46",label:"StyledExternalLink"})("margin-left:",Object(V.a)(.5),";");e.default=C}}]);
//# sourceMappingURL=GroupTagsValues.js.map