(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[156],{2008:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(9),i=n.n(r),a=n(10),o=n.n(a),c=n(12),s=n.n(c),u=n(13),l=n.n(u),f=n(5),p=n.n(f),g=n(249),d=n.n(g),b=(n(1),n(703)),h=n(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p()(e);if(t){var i=p()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var j=function(e){s()(n,e);var t=v(n);function n(){return i()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(d.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);j.displayName="AsyncView"},2009:function(e,t,n){"use strict";var r=n(16),i=n.n(r),a=n(9),o=n.n(a),c=n(10),s=n.n(c),u=n(12),l=n.n(u),f=n(13),p=n.n(f),g=n(5),d=n.n(g),b=n(3),h=n(1),v=n.n(h),j=n(8),O=n(205),y=n(0);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p()(this,n)}}var w=function(e){l()(n,e);var t=m(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,r=e.action,a=e.tabs,o=e.noTitleStyles,c=i()(e,["icon","title","action","tabs","noTitleStyles"]);return Object(y.f)("div",c,Object(y.f)(k,null,t&&Object(y.f)(R,null,t),n&&Object(y.f)(P,{tabs:a,styled:o},Object(y.f)(O.a,null,n)),r&&Object(y.f)(S,{tabs:a},r)),a&&Object(y.f)("div",null,a))}}]),n}(v.a.Component);w.displayName="SettingsPageHeading",w.defaultProps={noTitleStyles:!1};var k=Object(b.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),P=Object(b.a)("div",{target:"e1uay4fd1",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(2)," 0"):"".concat(Object(j.a)(4)," ").concat(Object(j.a)(2)," ").concat(Object(j.a)(4)," 0")}),";flex:1;"),R=Object(b.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(j.a)(1),";"),S=Object(b.a)("div",{target:"e1uay4fd3",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(j.a)(2)):null}),";"),F=Object(b.a)(w,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(j.a)(4),";");t.a=F},2010:function(e,t,n){"use strict";t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="".concat(e," - ").concat(t);return n?"".concat(r," - Sentry"):r}},2012:function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(6),o=n.n(a),c=n(16),s=n.n(c),u=n(9),l=n.n(u),f=n(10),p=n.n(f),g=n(12),d=n.n(g),b=n(13),h=n.n(b),v=n(5),j=n.n(v),O=n(166),y=n(2),m=n.n(y),w=n(1),k=n.n(w),P=n(709),R=n.n(P),S=n(46),F=n(21),T=n(704),x=n(165),C=n(2019),E=n(0);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var i=j()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var B=function(e){d()(n,e);var t=D(n);function n(){return l()(this,n),t.apply(this,arguments)}return p()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.fields,a=t.access,o=t.disabled,c=t.additionalFieldProps,u=t.renderFooter,l=t.renderHeader,f=s()(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(E.f)(x.a,{id:"string"==typeof n?Object(T.a)(n):void 0},n&&Object(E.f)(x.e,null,n),Object(E.f)(x.c,null,"function"==typeof l&&l({title:n,fields:r}),r.map((function(t){if("function"==typeof t)return t();t.defaultValue;var n=s()(t,["defaultValue"]);return!0===o&&(n.disabled=!0,n.disabledReason=void 0),Object(E.f)(C.a,i()({access:a,disabled:o,key:t.name},f,c,{field:n,highlighted:e.props.highlighted==="#".concat(t.name)}))})),"function"==typeof u&&u({title:n,fields:r})))}}]),n}(k.a.Component);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var i=j()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}B.displayName="FormPanel";var H=function(e){d()(n,e);var t=N(n);function n(){var e;l()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={highlighted:U(e.props,e.context).hash},e}return p()(n,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(U(this.props,this.context).hash!==U(e,this.context).hash){var t=U(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}}},{key:"scrollToHash",value:function(e){var t=e||U(this.props,this.context).hash;if(t)try{R()(Object(T.a)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){S.c(e)}}},{key:"shouldDisplayForm",value:function(e){var t=e.filter((function(e){return"function"!=typeof e&&Object(F.d)(null==e?void 0:e.visible)}));if(e.length===t.length){var n=this.props,r=n.additionalFieldProps,i=s()(n,["additionalFieldProps"]);return!t.every((function(e){return"function"==typeof e.visible?!e.visible(I(I({},i),r)):!e.visible}))}return!0}},{key:"renderForm",value:function(e){var t=e.fields,n=e.formPanelProps,r=e.title;return this.shouldDisplayForm(t)||(null==n?void 0:n.renderFooter)||(null==n?void 0:n.renderHeader)?Object(E.f)(B,i()({title:r,fields:t},n)):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.access,r=t.fields,i=t.title,a=t.forms,o=t.disabled,c=t.features,u=t.additionalFieldProps,l=t.renderFooter,f=t.renderHeader,p=(t.location,s()(t,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),g={access:n,disabled:o,features:c,additionalFieldProps:u,renderFooter:l,renderHeader:f,highlighted:this.state.highlighted};return Object(E.f)(O.Box,p,void 0!==a&&a.map((function(t,n){return Object(E.f)(k.a.Fragment,{key:n},e.renderForm(I({formPanelProps:g},t)))})),void 0===a&&void 0!==r&&this.renderForm({fields:r,formPanelProps:g,title:i}))}}]),n}(k.a.Component);H.displayName="JsonForm",H.contextTypes={location:m.a.object},H.defaultProps={additionalFieldProps:{}};t.a=H;function U(e,t){return e.location||t.location||{}}},2288:function(e,t,n){"use strict";n.r(t),n.d(t,"route",(function(){return p})),n.d(t,"fields",(function(){return g}));var r=n(3),i=n(1),a=n.n(i),o=n(8),c=n(4),s=n(2100),u=n(58),l=n(2269),f=n(0),p="/settings/:orgId/projects/:projectId/issue-grouping/",g={fingerprintingRules:{name:"fingerprintingRules",type:"string",label:Object(c.b)("Fingerprint Rules"),hideLabel:!0,placeholder:Object(c.b)("error.type:MyException -> fingerprint-value\nstack.function:some_panic_function -> fingerprint-value"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(c.b)("Changing fingerprint rules will apply to future events only."),formatMessageValue:!1,help:function(){return Object(f.f)(a.a.Fragment,null,Object(f.f)(d,null,Object(c.c)("This can be used to modify the fingerprint rules on the server with custom rules.\n        Rules follow the pattern [pattern]. To learn more about fingerprint rules, [docs:read the docs].",{pattern:Object(f.f)("code",null,"matcher:glob -> fingerprint, values"),docs:Object(f.f)(u.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2Fserver-side-fingerprinting%2F"})})),Object(f.f)(b,null,"# force all errors of the same type to have the same fingerprint\nerror.type:DatabaseUnavailable -> system-down\n# force all memory allocation errors to be grouped together\nstack.function:malloc -> memory-allocation-error"))},visible:!0},groupingEnhancements:{name:"groupingEnhancements",type:"string",label:Object(c.b)("Stack Trace Rules"),hideLabel:!0,placeholder:Object(c.b)("stack.function:raise_an_exception ^-group\nstack.function:namespace::* +app"),multiline:!0,monospace:!0,autosize:!0,inline:!1,maxRows:20,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(c.b)("Changing stack trace rules will apply to future events only."),formatMessageValue:!1,help:function(){return Object(f.f)(a.a.Fragment,null,Object(f.f)(d,null,Object(c.c)("This can be used to enhance the grouping algorithm with custom rules.\n        Rules follow the pattern [pattern]. To learn more about stack trace rules, [docs:read the docs].",{pattern:Object(f.f)("code",null,"matcher:glob [^v]?[+-]flag"),docs:Object(f.f)(u.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2Fgrouping-enhancements%2F"})})),Object(f.f)(b,null,"# remove all frames above a certain function from grouping\nstack.function:panic_handler ^-group\n# mark all functions following a prefix in-app\nstack.function:mylibrary_* +app"))},validate:function(){return[]},visible:!0},groupingConfig:{name:"groupingConfig",type:"array",label:Object(c.b)("Grouping Config"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(c.b)("Changing grouping config will apply to future events only."),selectionInfoFunction:function(e){var t=e.groupingConfigs,n=e.value,r=t.find((function(e){return e.id===n})),i=(null==r?void 0:r.changelog)||"";return i?Object(f.f)(h,null,Object(f.f)(v,null,Object(c.c)("New in version [version]",{version:r.id}),":"),Object(f.f)("div",{dangerouslySetInnerHTML:{__html:Object(s.a)(i)}})):null},choices:function(e){return e.groupingConfigs.map((function(e){var t=e.id,n=e.hidden;return[t.toString(),Object(f.f)(l.a,{key:t,isHidden:n},t)]}))},help:Object(c.b)("Sets the grouping algorithm to be used for new events."),visible:function(e){return e.features.has("set-grouping-config")}},groupingEnhancementsBase:{name:"groupingEnhancementsBase",type:"array",label:Object(c.b)("Stack Trace Rules Base"),saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:Object(c.b)("Changing base will apply to future events only."),selectionInfoFunction:function(e){var t=e.groupingEnhancementBases,n=e.value,r=t.find((function(e){return e.id===n})),i=(null==r?void 0:r.changelog)||"";return i?Object(f.f)(h,null,Object(f.f)(v,null,Object(c.c)("New in version [version]",{version:r.id}),":"),Object(f.f)("div",{dangerouslySetInnerHTML:{__html:Object(s.a)(i)}})):null},choices:function(e){return e.groupingEnhancementBases.map((function(e){var t=e.id;return[t.toString(),Object(f.f)(l.a,{key:t},t)]}))},help:Object(c.b)("The built-in base version of stack trace rules."),visible:function(e){return e.features.has("set-grouping-config")}}},d=Object(r.a)("div",{target:"e11tperv0",label:"RuleDescription"})("margin-bottom:",Object(o.a)(1),";margin-top:-",Object(o.a)(1),";margin-right:36px;"),b=Object(r.a)("pre",{target:"e11tperv1",label:"RuleExample"})("margin-bottom:",Object(o.a)(1),";margin-right:36px;"),h=Object(r.a)("div",{target:"e11tperv2",label:"Changelog"})("position:relative;top:-1px;margin-bottom:-1px;padding:",Object(o.a)(2),";border-bottom:1px solid ",(function(e){return e.theme.innerBorder}),";background:",(function(e){return e.theme.backgroundSecondary}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";&:last-child{border:0;border-bottom-left-radius:",(function(e){return e.theme.borderRadius}),";border-bottom-right-radius:",(function(e){return e.theme.borderRadius}),";}"),v=Object(r.a)("h3",{target:"e11tperv3",label:"ChangelogTitle"})("font-size:",(function(e){return e.theme.fontSizeMedium}),";margin-bottom:",Object(o.a)(.75)," !important;")},2989:function(e,t,n){"use strict";n.r(t);var r=n(7),i=n.n(r),a=n(6),o=n.n(a),c=n(9),s=n.n(c),u=n(10),l=n.n(u),f=n(156),p=n.n(f),g=n(12),d=n.n(g),b=n(13),h=n.n(b),v=n(5),j=n.n(v),O=n(1),y=n.n(O),m=n(2288),w=n(4),k=n(2008),P=n(2013),R=n(2012),S=n(2009),F=n(705),T=n(2010),x=n(43),C=n(101),E=n(58),D=n(22),B=n.n(D),M=n(30),I=n.n(M),N=n(73),H=n(34),U=n(2100),z=n(31),_=n(206),A=n(708),G=n(165),L=n(278),V=n(0);function J(e){var t=e.groupingConfigs,n=e.groupingEnhancementBases,r=e.organization,i=e.projectId,a=e.project,o=e.onUpgrade,c=e.api,s=r.access.includes("project:write"),u=function(e,t,n){var r={},i="",a=0,o=null,c=null;if(t.forEach((function(t){r[t.id]=t,t.latest&&e.groupingConfig!==t.id&&(i=t.changelog,o=t,a=t.risk)})),o)for(var s,u=null!==(s=o.base)&&void 0!==s?s:"";u!==e.groupingConfig;){var l,f=r[u];if(!f)break;a=Math.max(a,f.risk),i=f.changelog+"\n"+i,u=null!==(l=f.base)&&void 0!==l?l:""}return n.forEach((function(t){t.latest&&e.groupingEnhancementsBase!==t.id&&(i+="\n\n"+t.changelog,c=t)})),{updateNotes:i,riskLevel:a,latestGroupingConfig:o,latestEnhancementsBase:c}}(a,t,n),l=u.updateNotes,f=u.riskLevel,p=u.latestGroupingConfig,g=u.latestEnhancementsBase,d=function(e){switch(e){case 0:return{riskNote:Object(w.b)("This upgrade has the chance to create some new issues."),alertType:"info"};case 1:return{riskNote:Object(w.b)("This upgrade will create some new issues."),alertType:"warning"};case 2:return{riskNote:Object(V.f)("strong",null,Object(w.b)("The new grouping strategy is incompatible with the current and will create entirely new issues.")),alertType:"error"};default:return{riskNote:void 0,alertType:void 0}}}(f),b=d.riskNote,h=d.alertType,v=!p&&!g,j={};p&&(j.groupingConfig=p.id),g&&(j.groupingEnhancementsBase=g.id);var O=function(){var e=I()(B.a.mark((function e(){var t;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(H.b)(Object(w.b)("Changing grouping…")),e.prev=1,e.next=4,c.requestPromise("/projects/".concat(r.slug,"/").concat(i,"/"),{method:"PUT",data:j});case 4:t=e.sent,Object(H.e)(),x.a.updateSuccess(t),o(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),Object(L.a)(Object(w.b)("Unable to upgrade config"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();if(!t||!n)return null;return Object(V.f)(G.a,{id:"upgrade-grouping"},Object(V.f)(G.e,null,Object(w.b)("Upgrade Grouping")),Object(V.f)(G.c,null,Object(V.f)(A.a,{label:Object(w.b)("Upgrade Grouping Strategy"),help:Object(w.c)("If the project uses an old grouping strategy an update is possible.[linebreak]Doing so will cause new events to group differently.",{linebreak:Object(V.f)("br",null)}),disabled:!0},Object(V.f)(_.a,{disabled:v,onConfirm:O,priority:f>=2?"danger":"primary",confirmText:Object(w.b)("Upgrade"),message:Object(V.f)(y.a.Fragment,null,Object(V.f)(F.a,null,Object(V.f)("strong",null,Object(w.b)("Upgrade Grouping Strategy"))),Object(V.f)(F.a,null,Object(w.b)("You can upgrade the grouping strategy to the latest but this is an irreversible operation.")),Object(V.f)(F.a,null,Object(V.f)("strong",null,Object(w.b)("New Behavior")),Object(V.f)("div",{dangerouslySetInnerHTML:{__html:Object(U.a)(l)}})),Object(V.f)(F.a,null,Object(V.f)(N.b,{type:h},b)))},Object(V.f)("div",null,Object(V.f)(z.a,{disabled:!s||v,title:s?v?Object(w.b)("You are already on the latest version"):void 0:Object(w.b)("You do not have sufficient permissions to do this"),type:"button",priority:f>=2?"danger":"primary"},Object(w.b)("Upgrade Grouping Strategy")))))))}J.displayName="UpgradeGrouping";var W=J;function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j()(e);if(t){var i=j()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var Q=function(e){d()(n,e);var t=K(n);function n(){var e;s()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).handleSubmit=function(e){x.a.updateSuccess(e)},e}return l()(n,[{key:"getTitle",value:function(){var e=this.props.params.projectId;return Object(T.a)(Object(w.b)("Issue Grouping"),e,!1)}},{key:"getDefaultState",value:function(){return q(q({},p()(j()(n.prototype),"getDefaultState",this).call(this)),{},{groupingConfigs:[],groupingEnhancementBases:[]})}},{key:"getEndpoints",value:function(){return[["groupingConfigs","/grouping-configs/"],["groupingEnhancementBases","/grouping-enhancements/"]]}},{key:"renderBody",value:function(){var e=this.state,t=e.groupingConfigs,n=e.groupingEnhancementBases,r=this.props,a=r.organization,o=r.project,c=r.params,s=c.orgId,u=c.projectId,l="/projects/".concat(s,"/").concat(u,"/"),f=new Set(a.access),p={additionalFieldProps:{organization:a,groupingConfigs:t,groupingEnhancementBases:n},features:new Set(a.features),access:f,disabled:!f.has("project:write")};return Object(V.f)(y.a.Fragment,null,Object(V.f)(S.a,{title:Object(w.b)("Issue Grouping")}),Object(V.f)(F.a,null,Object(w.c)("All events have a fingerprint. Events with the same fingerprint are grouped together into an issue. To learn more about issue grouping, [link: read the docs].",{link:Object(V.f)(E.a,{href:"https://docs.sentry.io/platform-redirect/?next=%2Fdata-management%2Fevent-grouping%2F"})})),Object(V.f)(P.a,{saveOnBlur:!0,allowUndo:!0,initialData:o,apiMethod:"PUT",apiEndpoint:l,onSubmitSuccess:this.handleSubmit},Object(V.f)(R.a,i()({},p,{title:Object(w.b)("Fingerprint Rules"),fields:[m.fields.fingerprintingRules]})),Object(V.f)(R.a,i()({},p,{title:Object(w.b)("Stack Trace Rules"),fields:[m.fields.groupingEnhancements]})),Object(V.f)(C.a,{features:["set-grouping-config"],organization:a},Object(V.f)(R.a,i()({},p,{title:Object(w.b)("Change defaults"),fields:[m.fields.groupingConfig,m.fields.groupingEnhancementsBase]}))),Object(V.f)(W,{groupingConfigs:null!=t?t:[],groupingEnhancementBases:null!=n?n:[],organization:a,projectId:c.projectId,project:o,api:this.api,onUpgrade:this.fetchData})))}}]),n}(k.a);t.default=Q}}]);
//# sourceMappingURL=ProjectIssueGrouping.js.map