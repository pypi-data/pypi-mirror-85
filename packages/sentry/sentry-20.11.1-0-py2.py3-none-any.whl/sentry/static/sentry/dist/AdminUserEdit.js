(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[54],{2008:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(9),i=r.n(n),o=r(10),a=r.n(o),s=r(12),c=r.n(s),u=r(13),l=r.n(u),f=r(5),d=r.n(f),p=r(249),h=r.n(p),b=(r(1),r(703)),y=r(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d()(e);if(t){var i=d()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return l()(this,r)}}var m=function(e){c()(r,e);var t=v(r);function r(){return i()(this,r),t.apply(this,arguments)}return a()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(y.f)(h.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(b.a);m.displayName="AsyncView"},2012:function(e,t,r){"use strict";var n=r(7),i=r.n(n),o=r(6),a=r.n(o),s=r(16),c=r.n(s),u=r(9),l=r.n(u),f=r(10),d=r.n(f),p=r(12),h=r.n(p),b=r(13),y=r.n(b),v=r(5),m=r.n(v),O=r(166),j=r(2),g=r.n(j),P=r(1),R=r.n(P),F=r(709),w=r.n(F),D=r(46),x=r(21),k=r(704),U=r(165),S=r(2019),E=r(0);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var q=function(e){h()(r,e);var t=T(r);function r(){return l()(this,r),t.apply(this,arguments)}return d()(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.title,n=t.fields,o=t.access,a=t.disabled,s=t.additionalFieldProps,u=t.renderFooter,l=t.renderHeader,f=c()(t,["title","fields","access","disabled","additionalFieldProps","renderFooter","renderHeader"]);return Object(E.f)(U.a,{id:"string"==typeof r?Object(k.a)(r):void 0},r&&Object(E.f)(U.e,null,r),Object(E.f)(U.c,null,"function"==typeof l&&l({title:r,fields:n}),n.map((function(t){if("function"==typeof t)return t();t.defaultValue;var r=c()(t,["defaultValue"]);return!0===a&&(r.disabled=!0,r.disabledReason=void 0),Object(E.f)(S.a,i()({access:o,disabled:a,key:t.name},f,s,{field:r,highlighted:e.props.highlighted==="#".concat(t.name)}))})),"function"==typeof u&&u({title:r,fields:n})))}}]),r}(R.a.Component);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}q.displayName="FormPanel";var M=function(e){h()(r,e);var t=A(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={highlighted:N(e.props,e.context).hash},e}return d()(r,[{key:"componentDidMount",value:function(){this.scrollToHash()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(N(this.props,this.context).hash!==N(e,this.context).hash){var t=N(e,this.context).hash;this.scrollToHash(t),this.setState({highlighted:t})}}},{key:"scrollToHash",value:function(e){var t=e||N(this.props,this.context).hash;if(t)try{w()(Object(k.a)(decodeURIComponent(t)),{align:"middle",offset:-100})}catch(e){D.c(e)}}},{key:"shouldDisplayForm",value:function(e){var t=e.filter((function(e){return"function"!=typeof e&&Object(x.d)(null==e?void 0:e.visible)}));if(e.length===t.length){var r=this.props,n=r.additionalFieldProps,i=c()(r,["additionalFieldProps"]);return!t.every((function(e){return"function"==typeof e.visible?!e.visible(H(H({},i),n)):!e.visible}))}return!0}},{key:"renderForm",value:function(e){var t=e.fields,r=e.formPanelProps,n=e.title;return this.shouldDisplayForm(t)||(null==r?void 0:r.renderFooter)||(null==r?void 0:r.renderHeader)?Object(E.f)(q,i()({title:n,fields:t},r)):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.access,n=t.fields,i=t.title,o=t.forms,a=t.disabled,s=t.features,u=t.additionalFieldProps,l=t.renderFooter,f=t.renderHeader,d=(t.location,c()(t,["access","fields","title","forms","disabled","features","additionalFieldProps","renderFooter","renderHeader","location"])),p={access:r,disabled:a,features:s,additionalFieldProps:u,renderFooter:l,renderHeader:f,highlighted:this.state.highlighted};return Object(E.f)(O.Box,d,void 0!==o&&o.map((function(t,r){return Object(E.f)(R.a.Fragment,{key:r},e.renderForm(H({formPanelProps:p},t)))})),void 0===o&&void 0!==n&&this.renderForm({fields:n,formPanelProps:p,title:i}))}}]),r}(R.a.Component);M.displayName="JsonForm",M.contextTypes={location:g.a.object},M.defaultProps={additionalFieldProps:{}};t.a=M;function N(e,t){return e.location||t.location||{}}},2941:function(e,t,r){"use strict";r.r(t);var n=r(7),i=r.n(n),o=r(22),a=r.n(o),s=r(30),c=r.n(s),u=r(9),l=r.n(u),f=r(10),d=r.n(f),p=r(12),h=r.n(p),b=r(13),y=r.n(b),v=r(5),m=r.n(v),O=r(3),j=r(11),g=r(1),P=r.n(g),R=r(34),F=r(102),w=r(4),D=r(2008),x=r(31),k=r(2013),U=r(2132),S=r(2012),E=r(2110),T=r(8),q=r(0);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=m()(e);if(t){var i=m()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return y()(this,r)}}var H={title:"User details",fields:[{name:"name",type:"string",required:!0,label:Object(w.b)("Name")},{name:"username",type:"string",required:!0,label:Object(w.b)("Username"),help:Object(w.b)("The username is the unique id of the user in the system")},{name:"email",type:"string",required:!0,label:Object(w.b)("Email"),help:Object(w.b)("The users primary email address")},{name:"isActive",type:"boolean",required:!0,label:Object(w.b)("Active"),help:Object(w.b)("Designates whether this user should be treated as active. Unselect this instead of deleting accounts.")},{name:"isStaff",type:"boolean",required:!0,label:Object(w.b)("Admin"),help:Object(w.b)("Designates whether this user can perform administrative functions.")},{name:"isSuperuser",type:"boolean",required:!0,label:Object(w.b)("Superuser"),help:Object(w.b)("Designates whether this user has all permissions without explicitly assigning them.")}]},A={disable:Object(w.b)("Disable User"),delete:Object(w.b)("Permanently Delete User")},M=function(e){h()(r,e);var t=C(r);function r(){var e;l()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={deleteType:"disable"},e.onRemove=function(){e.props.onRemove(e.state.deleteType),e.props.closeModal()},e}return d()(r,[{key:"render",value:function(){var e=this,t=this.props.user,r=this.state.deleteType;return Object(q.f)(P.a.Fragment,null,Object(q.f)("p",null,Object(w.c)("Removing user [user]",{user:Object(q.f)("strong",null,t.email)})),Object(q.f)(E.b,{value:r,onChange:function(t){return e.setState({deleteType:t})},choices:[["disable",Object(w.b)("Disable the account.")],["delete",Object(w.b)("Permanently remove the user and their data.")]]}),Object(q.f)(B,null,Object(q.f)(x.a,{priority:"danger",onClick:this.onRemove},A[r]),Object(q.f)(x.a,{onClick:this.props.closeModal},Object(w.b)("Nevermind"))))}}]),r}(P.a.Component);M.displayName="RemoveUserModal";var N=function(e){h()(o,e);var t,r,n=C(o);function o(){var e;l()(this,o);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).removeUser=function(t){return"delete"===t?e.deleteUser():e.deactivateUser()},e.formModel=new U.a,e}return d()(o,[{key:"getEndpoints",value:function(){return[["user",this.userEndpoint]]}},{key:"deleteUser",value:(r=c()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"DELETE",data:{hardDelete:!0,organizations:[]}});case 2:Object(R.d)(Object(w.b)("%s's account has been deleted.",this.state.user.email)),j.browserHistory.replace("/manage/users/");case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"deactivateUser",value:(t=c()(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.api.requestPromise(this.userEndpoint,{method:"PUT",data:{isActive:!1}});case 2:t=e.sent,this.setState({user:t}),this.formModel.setInitialData(t),Object(R.d)(Object(w.b)("%s's account has been deactivated.",t.email));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"renderBody",value:function(){var e=this,t=this.state.user;return Object(q.f)(P.a.Fragment,null,Object(q.f)("h3",null,Object(w.b)("Users")),Object(q.f)("p",null,Object(w.b)("Editing user: %s",t.email)),Object(q.f)(k.a,{model:this.formModel,initialData:t,apiMethod:"PUT",apiEndpoint:this.userEndpoint,requireChanges:!0,onSubmitError:R.a,onSubmitSuccess:function(t){e.setState({user:t}),Object(R.d)("User account updated.")},extraButton:Object(q.f)(x.a,{type:"button",onClick:function(){return Object(F.i)((function(r){return Object(q.f)(M,i()({user:t,onRemove:e.removeUser},r))}))},style:{marginLeft:Object(T.a)(1)},priority:"danger"},Object(w.b)("Remove User"))},Object(q.f)(S.a,{forms:[H]})))}},{key:"userEndpoint",get:function(){var e=this.props.params;return"/users/".concat(e.id,"/")}}]),o}(D.a),B=Object(O.a)("div",{target:"e1fsmxla0",label:"ModalFooter"})("display:grid;grid-auto-flow:column;grid-gap:",Object(T.a)(1),";justify-content:end;padding:20px 30px;margin:20px -30px -30px;border-top:1px solid ",(function(e){return e.theme.border}),";");t.default=N}}]);
//# sourceMappingURL=AdminUserEdit.js.map