(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[174],{2008:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(9),r=n.n(a),c=n(10),o=n.n(c),i=n(12),s=n.n(i),u=n(13),l=n.n(u),f=n(5),d=n.n(f),p=n(249),m=n.n(p),b=(n(1),n(703)),h=n(0);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return l()(this,n)}}var v=function(e){s()(n,e);var t=g(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(h.f)(m.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),n}(b.a);v.displayName="AsyncView"},2009:function(e,t,n){"use strict";var a=n(16),r=n.n(a),c=n(9),o=n.n(c),i=n(10),s=n.n(i),u=n(12),l=n.n(u),f=n(13),d=n.n(f),p=n(5),m=n.n(p),b=n(3),h=n(1),g=n.n(h),v=n(8),j=n(205),y=n(0);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var T=function(e){l()(n,e);var t=O(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.title,a=e.action,c=e.tabs,o=e.noTitleStyles,i=r()(e,["icon","title","action","tabs","noTitleStyles"]);return Object(y.f)("div",i,Object(y.f)(R,null,t&&Object(y.f)(S,null,t),n&&Object(y.f)(w,{tabs:c,styled:o},Object(y.f)(j.a,null,n)),a&&Object(y.f)(x,{tabs:c},a)),c&&Object(y.f)("div",null,c))}}]),n}(g.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var R=Object(b.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),w=Object(b.a)("div",{target:"e1uay4fd1",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(v.a)(4)," ").concat(Object(v.a)(2)," ").concat(Object(v.a)(2)," 0"):"".concat(Object(v.a)(4)," ").concat(Object(v.a)(2)," ").concat(Object(v.a)(4)," 0")}),";flex:1;"),S=Object(b.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(v.a)(1),";"),x=Object(b.a)("div",{target:"e1uay4fd3",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(v.a)(2)):null}),";"),k=Object(b.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(v.a)(4),";");t.a=k},2010:function(e,t,n){"use strict";t.a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a="".concat(e," - ").concat(t);return n?"".concat(a," - Sentry"):a}},2197:function(e,t,n){"use strict";var a=n(22),r=n.n(a),c=n(30),o=n.n(c),i=n(9),s=n.n(i),u=n(10),l=n.n(u),f=n(12),d=n.n(f),p=n(13),m=n.n(p),b=n(5),h=n.n(b),g=n(3),v=n(1),j=n.n(v),y=n(144),O=n.n(y),T=n(32),R=n(165),w=n(15),S=n(4),x=n(31),k=n(206),A=n(320),C=n(435),z=n(427),D=n(70),I=n(8),P=n(51),M=n(0);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var N=function(e){d()(n,e);var t=L(n);function n(){var e;s()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={loading:!0,teams:null},e.fetchTeams=O()(function(){var t=o()(r.a.mark((function t(n){var a,c,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,c=a.api,o=a.organization,t.next=3,c.requestPromise("/organizations/".concat(o.slug,"/teams/"),{query:{query:n,per_page:T.G}});case 3:i=t.sent,e.setState({teams:i,loading:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),T.h),e.handleQueryUpdate=function(t){e.setState({loading:!0}),e.fetchTeams(t.target.value)},e.handleAddTeam=function(t){var n=e.state.teams.find((function(e){return e.slug===t.value}));e.props.onAddTeam(n)},e.handleRemove=function(t){e.props.onRemoveTeam(t)},e}return l()(n,[{key:"componentDidMount",value:function(){this.fetchTeams()}},{key:"renderTeamAddDropDown",value:function(){var e,t=this.props,n=t.disabled,a=t.selectedTeams,r=t.menuHeader,c=this.state.teams,o=null===c||0===c.length,i=n;return e=o?[]:c.filter((function(e){return!a.includes(e.slug)})).map((function(e){return{value:e.slug,searchKey:e.slug,label:Object(M.f)(q,null,"#",e.slug)}})),Object(M.f)(A.a,{items:e,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:Object(S.b)("No teams"),menuHeader:r,disabled:i,alignMenu:"right"},(function(e){var t=e.isOpen;return Object(M.f)(C.a,{"aria-label":Object(S.b)("Add Team"),isOpen:t,size:"xsmall",disabled:i},Object(S.b)("Add Team"))}))}},{key:"renderBody",value:function(){var e=this,t=this.props,n=t.organization,a=t.selectedTeams,r=t.disabled,c=t.confirmLastTeamRemoveMessage;if(0===a.length)return Object(M.f)(z.a,null,Object(S.b)("No Teams assigned"));var o=1===a.length&&c?c:null;return a.map((function(t){return Object(M.f)(H,{key:t,orgId:n.slug,team:t,onRemove:e.handleRemove,disabled:r,confirmMessage:o})}))}},{key:"render",value:function(){return Object(M.f)(R.a,null,Object(M.f)(R.e,{hasButtons:!0},Object(S.b)("Team"),this.renderTeamAddDropDown()),Object(M.f)(R.c,null,this.renderBody()))}}]),n}(j.a.Component);N.displayName="TeamSelect";var H=function(e){var t=e.orgId,n=e.team,a=e.onRemove,r=e.disabled,c=e.confirmMessage;return Object(M.f)(B,null,Object(M.f)(E,{to:"/settings/".concat(t,"/teams/").concat(n,"/")},"#".concat(n)),Object(M.f)(k.a,{message:c,bypass:!c,onConfirm:function(){return a(n)},disabled:r},Object(M.f)(x.a,{size:"xsmall",icon:Object(M.f)(w.xb,{isCircled:!0,size:"xs"}),disabled:r},Object(S.b)("Remove"))))};H.displayName="TeamRow";var q=Object(g.a)("div",{target:"e2fk6ws0",label:"TeamDropdownElement"})("padding:",Object(I.a)(.5)," 0px;text-transform:none;"),B=Object(g.a)(R.f,{target:"e2fk6ws1",label:"TeamPanelItem"})("padding:",Object(I.a)(2),";align-items:center;"),E=Object(g.a)(D.a,{target:"e2fk6ws2",label:"StyledLink"})("flex:1;margin-right:",Object(I.a)(1),";");t.a=Object(P.a)(N)},2874:function(e,t,n){"use strict";n.r(t);var a=n(28),r=n.n(a),c=n(9),o=n.n(c),i=n(10),s=n.n(i),u=n(12),l=n.n(u),f=n(13),d=n.n(f),p=n(5),m=n.n(p),b=n(3),h=(n(1),n(0)),g=n(34),v=n(439),j=n(102),y=n(4),O=n(2008),T=n(70),R=n(2009),w=n(2197),S=n(29),x=n(8),k=n(2010);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=m()(e);if(t){var r=m()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return d()(this,n)}}var C=function(e){l()(n,e);var t=A(n);function n(){var e;o()(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).canCreateTeam=function(){var t=e.props.organization,n=new Set(t.access);return n.has("org:write")&&n.has("team:write")&&n.has("project:write")},e.handleRemove=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(v.i)(e.api,a,r,t).then((function(){return e.handleRemovedTeam(t)})).catch((function(){Object(g.a)(Object(y.b)("Could not remove the %s team",t)),e.setState({loading:!1})}))}},e.handleRemovedTeam=function(t){e.setState((function(e){return{projectTeams:r()((e.projectTeams||[]).filter((function(e){return e.slug!==t})))}}))},e.handleAddedTeam=function(t){e.setState((function(e){return{projectTeams:[].concat(r()(e.projectTeams),[t])}}))},e.handleAdd=function(t){if(!e.state.loading){var n=e.props.params,a=n.orgId,r=n.projectId;Object(v.a)(e.api,a,r,t).then((function(){e.handleAddedTeam(t)}),(function(){e.setState({error:!0,loading:!1})}))}},e.handleCreateTeam=function(t){var n=e.props,a=n.project,r=n.organization;e.canCreateTeam()&&(t.stopPropagation(),t.preventDefault(),Object(j.d)({project:a,organization:r,onClose:function(t){Object(v.a)(e.api,r.slug,a.slug,t).then(e.remountComponent,e.remountComponent)}}))},e}return s()(n,[{key:"getEndpoints",value:function(){var e=this.props.params,t=e.orgId,n=e.projectId;return[["projectTeams","/projects/".concat(t,"/").concat(n,"/teams/")]]}},{key:"getTitle",value:function(){var e=this.props.params.projectId;return Object(k.a)(Object(y.b)("Project Teams"),e,!1)}},{key:"renderBody",value:function(){var e,t=this.props,n=t.params,a=t.organization,r=this.canCreateTeam(),c=a.access.includes("project:write"),o=Object(y.b)("This is the last team with access to this project. Removing it will mean only organization owners and managers will be able to access the project pages. Are you sure you want to remove this team from the project %s?",n.projectId),i=this.state.projectTeams,s=null!==(e=null==i?void 0:i.map((function(e){return e.slug})))&&void 0!==e?e:[],u=Object(h.f)(z,null,Object(y.b)("Teams"),Object(h.f)(S.a,{disabled:r,title:Object(y.b)("You must be a project admin to create teams"),position:"top"},Object(h.f)(D,{to:"",disabled:!r,onClick:this.handleCreateTeam},Object(y.b)("Create Team"))));return Object(h.f)("div",null,Object(h.f)(R.a,{title:Object(y.b)("%s Teams",n.projectId)}),Object(h.f)(w.a,{organization:a,selectedTeams:s,onAddTeam:this.handleAdd,onRemoveTeam:this.handleRemove,menuHeader:u,confirmLastTeamRemoveMessage:o,disabled:!c}))}}]),n}(O.a),z=Object(b.a)("div",{target:"e1902wmv0",label:"StyledTeamsLabel"})("font-size:0.875em;padding:",Object(x.a)(.5)," 0px;text-transform:uppercase;"),D=Object(b.a)(T.a,{target:"e1902wmv1",label:"StyledCreateTeamLink"})("float:right;text-transform:none;",(function(e){return e.disabled&&Object(h.e)("cursor:not-allowed;color:",e.theme.gray300,";opacity:0.6;;label:StyledCreateTeamLink;")}),";");t.default=C}}]);
//# sourceMappingURL=ProjectTeams.js.map