(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[121],{2008:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var n=r(9),a=r.n(n),o=r(10),i=r.n(o),c=r(12),s=r.n(c),u=r(13),l=r.n(u),b=r(5),f=r.n(b),d=r(249),m=r.n(d),p=(r(1),r(703)),g=r(0);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var a=f()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return l()(this,r)}}var O=function(e){s()(r,e);var t=v(r);function r(){return a()(this,r),t.apply(this,arguments)}return i()(r,[{key:"getTitle",value:function(){return""}},{key:"render",value:function(){var e=this.getTitle();return Object(g.f)(m.a,{title:"".concat(e?"".concat(e," - "):"","Sentry")},this.renderComponent())}}]),r}(p.a);O.displayName="AsyncView"},2010:function(e,t,r){"use strict";t.a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n="".concat(e," - ").concat(t);return r?"".concat(n," - Sentry"):n}},2014:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(711),a=r.n(n),o=r(560);function i(e,t){var r,n,i,c,s=t.routes,u=t.params,l=t.location,b=t.stepBack,f=s.map((function(e){return e.path||""}));"string"!=typeof e?(c=s.indexOf(e)+1,i=a()(f.slice(0,c),(function(e){return"/"===e[0]}))):i=a()(f,(function(e){return"/"===e[0]}));var d=f.slice(i,c);void 0!==b&&(d=d.slice(0,b));var m=null!==(r=null==l?void 0:l.search)&&void 0!==r?r:"",p=null!==(n=null==l?void 0:l.hash)&&void 0!==n?n:"",g="".concat(d.join("")).concat("string"!=typeof e?"":e).concat(m).concat(p);return Object(o.a)(g,u)}},2992:function(e,t,r){"use strict";r.r(t);var n=r(82),a=r.n(n),o=r(7),i=r.n(o),c=r(6),s=r.n(c),u=r(22),l=r.n(u),b=r(30),f=r.n(b),d=r(9),m=r.n(d),p=r(10),g=r.n(p),v=r(156),O=r.n(v),j=r(12),h=r.n(j),y=r(13),x=r.n(y),S=r(5),w=r.n(S),z=r(3),k=r(0),N=r(1),R=r.n(N),L=r(165),I=r(34),C=r(15),E=r(4),P=r(2008),M=r(427),A=r(36),D=r(706),F=r(2010),T=r(445),V=r(377),B=r(56),q=r(31),U=r(126),W=r(8),Y=r(32),H=r(25),J=r(185),_=r(206),G=r(70),K=r(44),Q=r(2014);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var Z=function(e){h()(r,e);var t=X(r);function r(){var e;m()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={busy:!1},e.handleRemove=function(t){var r=e.props.onRemove;"function"==typeof r&&(e.setState({busy:!0}),r(e.props.member,t))},e.handleLeave=function(t){var r=e.props.onLeave;"function"==typeof r&&(e.setState({busy:!0}),r(e.props.member,t))},e.handleSendInvite=function(t){var r=e.props,n=r.onSendInvite,a=r.member;"function"==typeof n&&n(a,t)},e}return g()(r,[{key:"render",value:function(){var e=this.props,t=e.params,r=e.routes,n=e.member,a=e.orgName,o=e.status,i=e.requireLink,c=e.memberCanLeave,s=e.currentUser,u=e.canRemoveMembers,l=e.canAddMembers,b=n.id,f=n.flags,d=n.email,m=n.name,p=n.roleName,g=n.pending,v=n.expired,O=n.user,j=!f["sso:linked"]&&i,h=s.email===d,y=!h,x=h,S=u&&!h,w=O&&O.has2fa,z=Object(Q.a)(b,{routes:r,params:t}),N="success"===o,L="loading"===o,I=g||j;return Object(k.f)($,{"data-test-id":d},Object(k.f)(te,null,Object(k.f)(J.a,{size:32,user:O||{id:d,email:d}}),Object(k.f)(re,{to:z},Object(k.f)("h5",{style:{margin:"0 0 3px"}},Object(k.f)(ne,null,m)),Object(k.f)(ae,null,d))),Object(k.f)("div",{"data-test-id":"member-role"},g?Object(k.f)(oe,null,Object(k.f)(C.T,{size:"md"}),v?Object(E.b)("Expired Invite"):Object(E.c)("Invited [roleName]",{roleName:p})):p),Object(k.f)("div",{"data-test-id":"member-status"},I?Object(k.f)(R.a.Fragment,null,L&&Object(k.f)(ie,null,Object(k.f)(K.default,{mini:!0})),N&&Object(k.f)("span",null,"Sent!"),!L&&!N&&Object(k.f)(q.a,{disabled:!l,priority:"primary",size:"small",onClick:this.handleSendInvite},g?Object(E.b)("Resend invite"):Object(E.b)("Resend SSO link"))):Object(k.f)(ce,null,w?Object(k.f)(C.i,{isCircled:!0,color:"success"}):Object(k.f)(C.B,{color:"error"}),w?Object(E.b)("2FA Enabled"):Object(E.b)("2FA Not Enabled"))),y||x?Object(k.f)("div",null,y&&S&&Object(k.f)(_.a,{message:Object(E.c)("Are you sure you want to remove [name] from [orgName]?",{name:m,orgName:a}),onConfirm:this.handleRemove,onSuccess:Object(E.c)("Removed [name] from [orgName]",{name:m,orgName:a}),onError:Object(E.c)("Error removing [name] from [orgName]",{name:m,orgName:a})},Object(k.f)(q.a,{"data-test-id":"remove",icon:Object(k.f)(C.xb,{isCircled:!0,size:"xs"}),size:"small",busy:this.state.busy},Object(E.b)("Remove"))),y&&!S&&Object(k.f)(q.a,{disabled:!0,size:"small",title:Object(E.b)("You do not have access to remove members"),icon:Object(k.f)(C.xb,{isCircled:!0,size:"xs"})},Object(E.b)("Remove")),x&&c&&Object(k.f)(_.a,{message:Object(E.c)("Are you sure you want to leave [orgName]?",{orgName:a}),onConfirm:this.handleLeave,onSuccess:Object(E.c)("Left [orgName]",{orgName:a}),onError:Object(E.c)("Error leaving [orgName]",{orgName:a})},Object(k.f)(q.a,{priority:"danger",size:"small",icon:Object(k.f)(C.n,{size:"xs"})},Object(E.b)("Leave"))),x&&!c&&Object(k.f)(q.a,{size:"small",icon:Object(k.f)(C.n,{size:"xs"}),disabled:!0,title:Object(E.b)("You cannot leave this organization as you are the only organization owner.")},Object(E.b)("Leave"))):null)}}]),r}(R.a.PureComponent);Z.displayName="OrganizationMemberRow";var $=Object(z.a)(L.f,{target:"e10yeuzg0",label:"StyledPanelItem"})("display:grid;grid-template-columns:minmax(150px,2fr) minmax(90px,1fr) minmax(120px,1fr) 90px;grid-gap:",Object(W.a)(2),";align-items:center;"),ee=Object(z.a)("div",{target:"e10yeuzg1",label:"Section"})("display:inline-grid;grid-template-columns:max-content auto;grid-gap:",Object(W.a)(1),";align-items:center;"),te=Object(z.a)(ee,{target:"e10yeuzg2",label:"MemberHeading"})(),re=Object(z.a)(G.a,{target:"e10yeuzg3",label:"MemberDescription"})({name:"i6bazn",styles:"overflow:hidden;"}),ne=Object(z.a)("div",{target:"e10yeuzg4",label:"UserName"})("display:block;font-size:",(function(e){return e.theme.fontSizeLarge}),";overflow:hidden;text-overflow:ellipsis;"),ae=Object(z.a)("div",{target:"e10yeuzg5",label:"Email"})("color:",(function(e){return e.theme.textColor}),";font-size:",(function(e){return e.theme.fontSizeMedium}),";overflow:hidden;text-overflow:ellipsis;"),oe=Object(z.a)(ee,{target:"e10yeuzg6",label:"InvitedRole"})(),ie=Object(z.a)("div",{target:"e10yeuzg7",label:"LoadingContainer"})("margin-top:0;margin-bottom:",Object(W.a)(1.5),";"),ce=Object(z.a)(ee,{target:"e10yeuzg8",label:"AuthStatus"})(),se=r(28),ue=r.n(se),le=r(322),be=r(720),fe=r(559),de=function(e){return Array.isArray(e)?e&&e.map((function(e){return e.toLowerCase()})).includes("true"):null},me=function(e){var t=e.className,r=e.roles,n=e.query,a=e.onChange,o=Object(fe.c)(n),i={roles:o.getTagValues("role")||[],isInvited:de(o.getTagValues("isInvited")),ssoLinked:de(o.getTagValues("ssoLinked")),has2fa:de(o.getTagValues("has2fa"))},c=function(e){return function(){var t=new Set(o.getTagValues("role")?ue()(o.getTagValues("role")):[]);t.has(e)?t.delete(e):t.add(e);var r=o.copy();r.setTagValues("role",ue()(t)),a(Object(fe.b)(r))}},s=function(e){return function(t){var r=o.copy();r.removeTag(e),null!==t&&r.setTagValues(e,[Boolean(t).toString()]),a(Object(fe.b)(r))}};return Object(k.f)(ge,{className:t},Object(k.f)(ve,null,Object(E.b)("Filter By")),Object(k.f)(Oe,null,Object(k.f)(je,null,Object(k.f)("h3",null,Object(E.b)("User Role")),r.map((function(e){var t=e.id,r=e.name;return Object(k.f)("label",{key:t},Object(k.f)(le.a,{"data-test-id":"filter-role-".concat(t),checked:i.roles.includes(t),onChange:c(t)}),r)}))),Object(k.f)(je,null,Object(k.f)("h3",null,Object(E.b)("Status")),Object(k.f)(pe,{"data-test-id":"filter-isInvited",onChange:s("isInvited"),value:i.isInvited},Object(E.b)("Invited")),Object(k.f)(pe,{"data-test-id":"filter-has2fa",onChange:s("has2fa"),value:i.has2fa},Object(E.b)("2FA")),Object(k.f)(pe,{"data-test-id":"filter-ssoLinked",onChange:s("ssoLinked"),value:i.ssoLinked},Object(E.b)("SSO Linked")))))};me.displayName="MembersFilter";var pe=function(e){var t=e.onChange,r=e.value,n=e.children;return Object(k.f)("label",null,Object(k.f)(le.a,{checked:null!==r,onChange:function(){return t(null===r||null)}}),n,Object(k.f)(be.a,{isDisabled:null===r,isActive:!0===r,toggle:function(){return t(!r)}}))};pe.displayName="BooleanFilter";var ge=Object(z.a)("div",{target:"ehjw1av0",label:"FilterContainer"})("border-radius:4px;background:",(function(e){return e.theme.background}),";box-shadow:",(function(e){return e.theme.dropShadowLight}),";border:1px solid ",(function(e){return e.theme.border}),";"),ve=Object(z.a)("h2",{target:"ehjw1av1",label:"FilterHeader"})("border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid ",(function(e){return e.theme.border}),";background:",(function(e){return e.theme.backgroundSecondary}),";color:",(function(e){return e.theme.subText}),";text-transform:uppercase;font-size:",(function(e){return e.theme.fontSizeExtraSmall}),";padding:",Object(W.a)(1),";margin:0;"),Oe=Object(z.a)("div",{target:"ehjw1av2",label:"FilterLists"})("display:grid;grid-template-columns:100px max-content;grid-gap:",Object(W.a)(3),";margin:",Object(W.a)(1.5),";margin-top:",Object(W.a)(.75),";"),je=Object(z.a)("div",{target:"ehjw1av3",label:"Filters"})("display:grid;grid-template-rows:repeat(auto-fit,minmax(0,max-content));grid-gap:",Object(W.a)(1),";font-size:",(function(e){return e.theme.fontSizeMedium}),";h3{color:#000;font-size:",(function(e){return e.theme.fontSizeSmall}),";text-transform:uppercase;margin:",Object(W.a)(1)," 0;}label{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:",Object(W.a)(.75),";align-items:center;font-weight:normal;white-space:nowrap;height:",Object(W.a)(2),";}input,label{margin:0;}"),he=me;function ye(){var e=a()(["\n                font-size: ",";\n                padding: ",";\n              "]);return ye=function(){return e},e}function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w()(e);if(t){var a=w()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return x()(this,r)}}var ze=function(e){h()(r,e);var t=we(r);function r(){var e;m()(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeMember=function(){var t=f()(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.params.orgId,t.next=3,e.api.requestPromise("/organizations/".concat(n,"/members/").concat(r,"/"),{method:"DELETE",data:{}});case 3:e.setState((function(e){return{members:e.members.filter((function(e){return e.id!==r}))}}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleRemove=function(){var t=f()(l.a.mark((function t(r){var n,a,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,a=r.name,o=e.props.organization,i=o.slug,t.prev=3,t.next=6,e.removeMember(n);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),Object(I.a)(Object(E.c)("Error removing [name] from [orgName]",{name:a,orgName:i})),t.abrupt("return");case 12:Object(I.d)(Object(E.c)("Removed [name] from [orgName]",{name:a,orgName:i}));case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLeave=function(){var t=f()(l.a.mark((function t(r){var n,a,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,a=e.props.organization,o=a.slug,t.prev=3,t.next=6,e.removeMember(n);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(3),Object(I.a)(Object(E.c)("Error leaving [orgName]",{orgName:o})),t.abrupt("return");case 12:Object(T.d)({orgId:o,removeOrg:!0}),Object(I.d)(Object(E.c)("You left [orgName]",{orgName:o}));case 14:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSendInvite=function(){var t=f()(l.a.mark((function t(r){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.id,a=r.expired,e.setState((function(e){return{invited:Se(Se({},e.invited),{},s()({},n,"loading"))}})),t.prev=2,t.next=5,Object(V.d)(e.api,{orgId:e.props.params.orgId,memberId:n,regenerate:a});case 5:t.next=12;break;case 7:return t.prev=7,t.t0=t.catch(2),e.setState((function(e){return{invited:Se(Se({},e.invited),{},s()({},n,null))}})),Object(I.a)(Object(E.b)("Error sending invite")),t.abrupt("return");case 12:e.setState((function(e){return{invited:Se(Se({},e.invited),{},s()({},n,"success"))}}));case 13:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return g()(r,[{key:"getDefaultState",value:function(){return Se(Se({},O()(w()(r.prototype),"getDefaultState",this).call(this)),{},{members:[],invited:{}})}},{key:"getEndpoints",value:function(){var e=this.props.params.orgId;return[["members","/organizations/".concat(e,"/members/"),{},{paginate:!0}],["member","/organizations/".concat(e,"/members/me/"),{},{allowError:function(e){return 404===e.status}}],["authProvider","/organizations/".concat(e,"/auth-provider/"),{},{allowError:function(e){return 403===e.status}}]]}},{key:"getTitle",value:function(){var e=this.props.organization.slug;return Object(F.a)(Object(E.b)("Members"),e,!1)}},{key:"renderBody",value:function(){var e=this,t=this.props,r=t.params,n=t.organization,a=t.routes,o=this.state,c=o.membersPageLinks,s=o.members,u=o.member,l=n.name,b=n.access,f=b.includes("member:write"),d=b.includes("member:admin"),m=A.default.get("user"),p=!s.find((function(e){var t=e.role,r=e.email,n=e.pending;return"owner"===t&&r!==m.email&&!n})),g=!!this.state.authProvider&&this.state.authProvider.require_link,v=function(e){var t=e.defaultSearchBar,r=e.value,n=e.handleChange;return Object(k.f)(ke,null,t,Object(k.f)(U.a,{closeOnEscape:!0},(function(e){var t,a=e.getActorProps,o=e.isOpen;return Object(k.f)(Ne,null,Object(k.f)(q.a,i()({size:"small",icon:Object(k.f)(C.rb,{size:"xs"})},a({})),Object(E.b)("Search Filters")),o&&Object(k.f)(Re,{roles:null!==(t=null==u?void 0:u.roles)&&void 0!==t?t:Y.y,query:r,onChange:function(e){return n(e)}}))})))};return Object(k.f)(R.a.Fragment,null,Object(k.f)(k.b,null,(function(t){var r=t.css;return e.renderSearchInput({updateRoute:!0,placeholder:Object(E.b)("Search Members"),children:v,className:r(ye(),H.b.fontSizeMedium,Object(W.a)(.75))})})),Object(k.f)(L.a,{"data-test-id":"org-member-list"},Object(k.f)(L.e,null,Object(E.b)("Members")),Object(k.f)(L.c,null,s.map((function(t){return Object(k.f)(Z,{routes:a,params:r,key:t.id,member:t,status:e.state.invited[t.id],orgId:r.orgId,orgName:l,memberCanLeave:!p,currentUser:m,canRemoveMembers:d,canAddMembers:f,requireLink:g,onSendInvite:e.handleSendInvite,onRemove:e.handleRemove,onLeave:e.handleLeave})})),0===s.length&&Object(k.f)(M.a,null,Object(E.b)("No members found.")))),Object(k.f)(D.a,{pageLinks:c}))}}]),r}(P.a),ke=Object(z.a)("div",{target:"e1aebs7b0",label:"SearchWrapper"})("display:grid;grid-template-columns:1fr max-content;grid-gap:",Object(W.a)(1.5),";margin-bottom:",Object(W.a)(3),";position:relative;"),Ne=Object(z.a)("div",{target:"e1aebs7b1",label:"FilterWrapper"})({name:"79elbk",styles:"position:relative;"}),Re=Object(z.a)(he,{target:"e1aebs7b2",label:"StyledMembersFilter"})("position:absolute;right:0;top:42px;z-index:",(function(e){return e.theme.zIndex.dropdown}),";&:before,&:after{position:absolute;top:-16px;right:32px;content:'';height:16px;width:16px;border:8px solid transparent;border-bottom-color:",(function(e){return e.theme.backgroundSecondary}),";}&:before{margin-top:-1px;border-bottom-color:",(function(e){return e.theme.border}),";}");t.default=Object(B.a)(ze)}}]);
//# sourceMappingURL=OrganizationMembersList.js.map