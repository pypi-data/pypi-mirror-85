(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[87],{2014:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r(711),o=r.n(n),a=r(560);function i(t,e){var r,n,i,s,c=e.routes,u=e.params,p=e.location,l=e.stepBack,f=c.map((function(t){return t.path||""}));"string"!=typeof t?(s=c.indexOf(t)+1,i=o()(f.slice(0,s),(function(t){return"/"===t[0]}))):i=o()(f,(function(t){return"/"===t[0]}));var d=f.slice(i,s);void 0!==l&&(d=d.slice(0,l));var h=null!==(r=null==p?void 0:p.search)&&void 0!==r?r:"",v=null!==(n=null==p?void 0:p.hash)&&void 0!==n?n:"",g="".concat(d.join("")).concat("string"!=typeof t?"":t).concat(h).concat(v);return Object(a.a)(g,u)}},2995:function(t,e,r){"use strict";r.r(e);var n=r(7),o=r.n(n),a=r(16),i=r.n(a),s=r(9),c=r.n(s),u=r(10),p=r.n(u),l=r(12),f=r.n(l),d=r(13),h=r.n(d),v=r(5),g=r.n(v),y=r(1),b=r.n(y),j=r(37),m=r(315),O=r(56),k=r(6),w=r.n(k),D=r(22),S=r.n(D),P=r(30),R=r.n(P),E=r(249),I=r.n(E),x=r(2),T=r.n(x),C=r(11),G=r(46),z=r(419),_=r(205),U=r(52),q=r(4),L=r(713),M=r(66),N=r(122),A=r(44),F=r(251),W=r(158),H=r(2014),J=r(51),B=r(199),V="GROUP_NOT_FOUND",K=r(780),Q=r(113),X=r(0);function Y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(r),!0).forEach((function(e){w()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h()(this,r)}}var tt=function(t){f()(o,t);var e,r,n=$(o);function o(){var t;c()(this,o);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return(t=n.call.apply(n,[this].concat(r))).state=t.initialState,t.remountComponent=function(){t.setState(t.initialState),t.fetchData()},t.listener=M.a.listen((function(e){return t.onGroupChange(e)}),void 0),t}return p()(o,[{key:"getChildContext",value:function(){return{group:this.state.group,location:this.props.location}}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(t,e){var r,n;t.isGlobalSelectionReady!==this.props.isGlobalSelectionReady&&this.fetchData(),(!(null==e?void 0:e.group)&&this.state.group||(null===(r=t.params)||void 0===r?void 0:r.eventId)!==(null===(n=this.props.params)||void 0===n?void 0:n.eventId)&&this.state.group)&&this.getEvent(this.state.group)}},{key:"componentWillUnmount",value:function(){M.a.reset(),Object(U.a)(this.listener)}},{key:"getEvent",value:(r=R()(S.a.mark((function t(e){var r,n,o,a,i,s,c,u,p,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.props,n=r.params,o=r.environments,a=r.api,i=r.organization,s=i.slug,c=e.id,u=e.project.slug,p=(null==n?void 0:n.eventId)||"latest",t.prev=5,t.next=8,Object(K.a)(a,s,u,c,p,o);case 8:l=t.sent,this.setState({event:l,loading:!1,error:!1,errorType:null}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(5),G.c(t.t0),this.setState({error:!0,errorType:null,loading:!1});case 16:case"end":return t.stop()}}),t,this,[[5,12]])}))),function(t){return r.apply(this,arguments)})},{key:"fetchData",value:(e=R()(S.a.mark((function t(){var e,r,n,o,a,i,s,c,u,p,l;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,r=e.environments,n=e.api,e.isGlobalSelectionReady){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,n.requestPromise(this.groupDetailsEndpoint,{query:Z({},r?{environment:r}:{})});case 6:if(o=t.sent,this.props.params.groupId===o.id){t.next=11;break}return a=this.props,i=a.routes,s=a.params,c=a.location,C.browserHistory.push(Object(H.a)("",{routes:i,location:c,params:Z(Z({},s),{},{groupId:o.id})})),t.abrupt("return");case 11:(u=o.project)?(void 0===(p=Z({},this.props.location)).query.project&&void 0===p.query._allp&&(p.query.project=u.id),delete p.query._allp,C.browserHistory.replace(p)):G.m((function(){G.c(new Error("Project not found"))})),this.setState({project:u}),M.a.loadInitialData([o]),t.next=26;break;case 17:t.prev=17,t.t0=t.catch(3),l=null,t.t1=null===t.t0||void 0===t.t0?void 0:t.t0.status,t.next=404===t.t1?23:25;break;case 23:return l=V,t.abrupt("break",25);case 25:this.setState({error:!0,errorType:l,loading:!1});case 26:case"end":return t.stop()}}),t,this,[[3,17]])}))),function(){return e.apply(this,arguments)})},{key:"onGroupChange",value:function(t){var e=this.props.params.groupId;if(t.has(e)){var r=M.a.get(e);if(r){if(r.stale)return void this.fetchData();this.setState({group:r})}}}},{key:"getTitle",value:function(){var t=this.props.organization,e=this.state.group;if(!e)return"Sentry";var r=Object(B.d)(e,t).title,n=Object(B.b)(e);return r&&n?"".concat(r,": ").concat(n):r||n||"Sentry"}},{key:"renderError",value:function(){if(!this.state.error)return null;switch(this.state.errorType){case V:return Object(X.f)(N.a,{message:Object(q.b)("The issue you were looking for was not found.")});default:return Object(X.f)(N.a,{onRetry:this.remountComponent})}}},{key:"renderContent",value:function(t){var e=this.props,r=e.children,n=e.environments,o=e.organization,a=e.routes,i=a[a.length-1].props,s=i.currentTab,c=i.isEventRoute,u=this.state.group,p=this.state.event,l=c?"/organizations/".concat(o.slug,"/issues/").concat(u.id,"/events/").concat(p.id,"/"):"/organizations/".concat(o.slug,"/issues/").concat(u.id,"/"),f={environments:n,group:u,project:t};return s===Q.a.DETAILS&&(f=Z(Z({},f),{},{event:p})),s===Q.a.TAGS&&(f=Z(Z({},f),{},{event:p,baseUrl:l})),Object(X.f)(b.a.Fragment,null,Object(X.f)(Q.b,{project:t,group:u,currentTab:s,baseUrl:l}),b.a.isValidElement(r)?b.a.cloneElement(r,f):r)}},{key:"render",value:function(){var t=this,e=this.props.organization,r=this.state,n=r.error,o=r.group,a=r.project,i=n,s=r.loading||!o&&!i;return Object(X.f)(I.a,{title:this.getTitle()},Object(X.f)(L.a,{skipLoadLastUsed:!0,forceProject:a,showDateSelector:!1,shouldForceProject:!0,lockedMessageSubject:Object(q.b)("issue"),showIssueStreamLink:!0,showProjectSettingsLink:!0},Object(X.f)(_.b,null,s?Object(X.f)(A.default,null):i?this.renderError():Object(X.f)(F.a,{orgId:e.slug,slugs:[a.slug],"data-test-id":"group-projects-container"},(function(e){var r=e.projects,n=e.initiallyLoaded,o=e.fetchError;return n?o?Object(X.f)(N.a,{message:Object(q.b)("Error loading the specified project")}):t.renderContent(r[0]):Object(X.f)(A.default,null)})))))}},{key:"initialState",get:function(){return{group:null,loading:!0,error:!1,errorType:null,project:null}}},{key:"groupDetailsEndpoint",get:function(){return"/issues/".concat(this.props.params.groupId,"/")}}]),o}(b.a.Component);tt.displayName="GroupDetails",tt.childContextTypes={group:W.a.Group,location:T.a.object};var et=Object(J.a)(z.c(tt));function rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g()(t);if(e){var o=g()(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return h()(this,r)}}var nt=function(t){f()(r,t);var e=rt(r);function r(t){var n;return c()(this,r),(n=e.call(this,t)).startMetricCollection(),n}return p()(r,[{key:"componentDidMount",value:function(){Object(j.a)("issue_page.viewed",{group_id:parseInt(this.props.params.groupId,10),org_id:parseInt(this.props.organization.id,10)})}},{key:"startMetricCollection",value:function(){var t=Object(O.b)(this.props.organization)?"cold-start":"warm-start";j.b.mark({name:"page-issue-details-start",data:{start_type:t}})}},{key:"render",value:function(){var t=this.props,e=t.selection,r=i()(t,["selection"]);return Object(X.f)(et,o()({key:"".concat(this.props.params.groupId,"-envs:").concat(e.environments.join(",")),environments:e.environments},r))}}]),r}(b.a.Component);nt.displayName="OrganizationGroupDetails";e.default=Object(O.a)(Object(m.a)(nt))}}]);
//# sourceMappingURL=GroupDetails.js.map