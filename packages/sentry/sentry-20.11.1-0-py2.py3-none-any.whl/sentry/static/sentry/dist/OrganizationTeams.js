(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[131],{2009:function(e,t,a){"use strict";var n=a(16),r=a.n(n),c=a(9),o=a.n(c),i=a(10),s=a.n(i),u=a(12),l=a.n(u),f=a(13),m=a.n(f),d=a(5),b=a.n(d),g=a(3),p=a(1),j=a.n(p),O=a(8),h=a(205),v=a(0);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var T=function(e){l()(a,e);var t=y(a);function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.icon,a=e.title,n=e.action,c=e.tabs,o=e.noTitleStyles,i=r()(e,["icon","title","action","tabs","noTitleStyles"]);return Object(v.f)("div",i,Object(v.f)(I,null,t&&Object(v.f)(S,null,t),a&&Object(v.f)(z,{tabs:c,styled:o},Object(v.f)(h.a,null,a)),n&&Object(v.f)(k,{tabs:c},n)),c&&Object(v.f)("div",null,c))}}]),a}(j.a.Component);T.displayName="SettingsPageHeading",T.defaultProps={noTitleStyles:!1};var I=Object(g.a)("div",{target:"e1uay4fd0",label:"TitleAndActions"})({name:"70qvj9",styles:"display:flex;align-items:center;"}),z=Object(g.a)("div",{target:"e1uay4fd1",label:"Title"})((function(e){return!e.styled&&"\n    font-size: 20px;\n    font-weight: bold;"}),";margin:",(function(e){return e.tabs?"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(2)," 0"):"".concat(Object(O.a)(4)," ").concat(Object(O.a)(2)," ").concat(Object(O.a)(4)," 0")}),";flex:1;"),S=Object(g.a)("div",{target:"e1uay4fd2",label:"Icon"})("margin-right:",Object(O.a)(1),";"),k=Object(g.a)("div",{target:"e1uay4fd3",label:"Action"})((function(e){return e.tabs?"margin-top: ".concat(Object(O.a)(2)):null}),";"),w=Object(g.a)(T,{target:"e1uay4fd4",label:"StyledSettingsPageHeading"})("font-size:14px;margin-top:-",Object(O.a)(4),";");t.a=w},2011:function(e,t,a){"use strict";a(1);var n=a(249),r=a.n(n),c=a(0),o=function(e){var t="".concat(e.title," - ").concat(e.objSlug," - Sentry");return Object(c.f)(r.a,{title:t},e.children)};o.displayName="SentryDocumentTitle",t.a=o},2014:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(711),r=a.n(n),c=a(560);function o(e,t){var a,n,o,i,s=t.routes,u=t.params,l=t.location,f=t.stepBack,m=s.map((function(e){return e.path||""}));"string"!=typeof e?(i=s.indexOf(e)+1,o=r()(m.slice(0,i),(function(e){return"/"===e[0]}))):o=r()(m,(function(e){return"/"===e[0]}));var d=m.slice(o,i);void 0!==f&&(d=d.slice(0,f));var b=null!==(a=null==l?void 0:l.search)&&void 0!==a?a:"",g=null!==(n=null==l?void 0:l.hash)&&void 0!==n?n:"",p="".concat(d.join("")).concat("string"!=typeof e?"":e).concat(b).concat(g);return Object(c.a)(p,u)}},2103:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"g",(function(){return l})),a.d(t,"f",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return b})),a.d(t,"e",(function(){return g}));var n=a(151),r=a(4),c=a(34),o=a(168),i=a(52),s=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=arguments.length,n=new Array(a>2?a-2:0),r=2;r<a;r++)n[r-2]=arguments[r];i.a.apply(void 0,[e[t]].concat(n))};function u(e,t,a){return n.a.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:function(e){n.a.fetchDetailsSuccess(t.teamId,e),s(a,"success",e)},error:function(e){n.a.fetchDetailsError(t.teamId,e),s(a,"error",e)}})}function l(e,t){n.a.updateSuccess(e,t)}function f(e,t,a){var r="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return n.a.update(t.teamId,t.data),e.request(r,{method:"PUT",data:t.data,success:function(e){l(t.teamId,e),s(a,"success",e)},error:function(e){n.a.updateError(t.teamId,e),s(a,"error",e)}})}function m(e,t,a){var r,c="/organizations/".concat(t.orgId,"/members/").concat(null!==(r=t.memberId)&&void 0!==r?r:"me","/teams/").concat(t.teamId,"/"),i=Object(o.a)();return n.a.update(i,t.teamId),e.request(c,{method:"POST",success:function(e){n.a.updateSuccess(t.teamId,e),s(a,"success",e)},error:function(e){n.a.updateError(i,t.teamId,e),s(a,"error",e)}})}function d(e,t,a){var r="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),c=Object(o.a)();return n.a.update(c,t.teamId),e.request(r,{method:"DELETE",success:function(e){n.a.updateSuccess(t.teamId,e),s(a,"success",e)},error:function(e){n.a.updateError(c,t.teamId,e),s(a,"error",e)}})}function b(e,t,a){return n.a.createTeam(t),e.requestPromise("/organizations/".concat(a.orgId,"/teams/"),{method:"POST",data:t}).then((function(e){return n.a.createTeamSuccess(e),Object(c.d)(Object(r.c)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:a.orgId})),e}),(function(e){throw n.a.createTeamError(t.slug,e),Object(c.a)(Object(r.c)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:a.orgId})),e}))}function g(e,t){return n.a.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((function(e){return n.a.removeTeamSuccess(t.teamId,e),Object(c.d)(Object(r.c)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}),(function(e){throw n.a.removeTeamError(t.teamId,e),Object(c.a)(Object(r.c)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},2118:function(e,t,a){"use strict";var n=a(7),r=a.n(n),c=(a(1),a(24)),o=a.n(c),i=a(35),s=a.n(i),u=a(92),l=a(321),f=a(0);t.a=function(e){return s()({displayName:"withTeams(".concat(Object(u.a)(e),")"),mixins:[o.a.listenTo(l.a,"onTeamUpdate")],getInitialState:function(){return{teams:l.a.getAll()}},onTeamUpdate:function(){this.setState({teams:l.a.getAll()})},render:function(){return Object(f.f)(e,r()({},this.props,{teams:this.state.teams}))}})}},2980:function(e,t,a){"use strict";a.r(t),a.d(t,"OrganizationTeamsContainer",(function(){return ae}));var n=a(7),r=a.n(n),c=a(9),o=a.n(c),i=a(10),s=a.n(i),u=a(12),l=a.n(u),f=a(13),m=a.n(f),d=a(5),b=a.n(d),g=a(1),p=a.n(g),j=a(439),O=a(21),h=a(51),v=a(56),y=a(2118),T=a(102),I=a(2011),z=a(4),S=a(31),k=a(165),w=a(2009),P=a(2014),R=a(15),x=a(3),q=a(705),M=a(427),C=a(22),D=a.n(C),A=a(30),E=a.n(A),L=a(11),N=a(34),U=a(2103),Y=a(318),J=a(8),B=a(0);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var H=function(e){l()(a,e);var t=W(a);function a(){var e;o()(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,error:!1},e.handleRequestAccess=E()(D.a.mark((function t(){var a;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.team;try{e.joinTeam({successMessage:Object(z.c)("You have requested access to [team]",{team:"#".concat(a.slug)}),errorMessage:Object(z.c)("Unable to request access to [team]",{team:"#".concat(a.slug)})})}catch(e){}case 2:case"end":return t.stop()}}),t)}))),e.handleJoinTeam=function(){var t=e.props.team;e.joinTeam({successMessage:Object(z.c)("You have joined [team]",{team:"#".concat(t.slug)}),errorMessage:Object(z.c)("Unable to join [team]",{team:"#".concat(t.slug)})})},e.joinTeam=function(t){var a=t.successMessage,n=t.errorMessage,r=e.props,c=r.api,o=r.organization,i=r.team;return e.setState({loading:!0}),new Promise((function(t,r){return Object(U.c)(c,{orgId:o.slug,teamId:i.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(N.d)(a),t()},error:function(){e.setState({loading:!1,error:!0}),Object(N.a)(n),r(new Error("Unable to join team"))}})}))},e.handleLeaveTeam=function(){var t=e.props,a=t.api,n=t.organization,r=t.team;e.setState({loading:!0}),Object(U.d)(a,{orgId:n.slug,teamId:r.slug},{success:function(){e.setState({loading:!1,error:!1}),Object(N.d)(Object(z.c)("You have left [team]",{team:"#".concat(r.slug)}))},error:function(){e.setState({loading:!1,error:!0}),Object(N.a)(Object(z.c)("Unable to leave [team]",{team:"#".concat(r.slug)}))}})},e}return s()(a,[{key:"render",value:function(){var e=this.props,t=e.team,a=e.urlPrefix,n=e.openMembership,r=Object(B.f)(Y.a,{team:t,avatarSize:36,description:Object(z.d)("%s Member","%s Members",t.memberCount)}),c=t.hasAccess;return Object(B.f)(K,null,Object(B.f)(V,null,c?Object(B.f)(F,{to:"".concat(a,"teams/").concat(t.slug,"/")},r):r),Object(B.f)(Q,null,this.state.loading?Object(B.f)(S.a,{size:"small",disabled:!0},"..."):t.isMember?Object(B.f)(S.a,{size:"small",onClick:this.handleLeaveTeam},Object(z.b)("Leave Team")):t.isPending?Object(B.f)(S.a,{size:"small",disabled:!0},Object(z.b)("Request Pending")):n?Object(B.f)(S.a,{size:"small",onClick:this.handleJoinTeam},Object(z.b)("Join Team")):Object(B.f)(S.a,{size:"small",onClick:this.handleRequestAccess},Object(z.b)("Request Access"))))}}]),a}(p.a.Component);H.displayName="AllTeamsRow";var F=Object(x.a)(L.Link,{target:"ekr4bwh0",label:"TeamLink"})("display:inline-block;&.focus-visible{margin:-",Object(J.a)(1),";padding:",Object(J.a)(1),";background:#f2eff5;border-radius:3px;outline:none;}"),G=Object(h.a)(H),K=Object(x.a)(k.f,{target:"ekr4bwh1",label:"TeamPanelItem"})({name:"chq20z",styles:"padding:0;align-items:center;"}),Q=Object(x.a)("div",{target:"ekr4bwh2",label:"Spacer"})("padding:",Object(J.a)(2),";"),V=Object(x.a)(Q,{target:"ekr4bwh3",label:"TeamNameWrapper"})({name:"1rr4qq7",styles:"flex:1;"});function X(e){var t=e.organization,a=e.urlPrefix,n=e.openMembership,r=e.teamList,c=e.access,o=r.map((function(e){return Object(B.f)(G,{urlPrefix:a,access:c,team:e,organization:t,openMembership:n,key:e.slug})}));if(!o.length){var i=c.has("project:admin");return Object(B.f)(M.a,null,Object(z.c)("No teams here. [teamCreate]",{root:Object(B.f)(q.a,{noMargin:!0}),teamCreate:i?Object(z.c)("You can always [link:create one].",{link:Object(B.f)($,{priority:"link",onClick:function(){return Object(T.d)({organization:t})}})}):null}))}return Object(B.f)(p.a.Fragment,null,o)}X.displayName="AllTeamsList";var Z=X,$=Object(x.a)(S.a,{target:"e3ug7hf0",label:"StyledButton"})("font-size:",(function(e){return e.theme.fontSizeLarge}),";");function _(e){var t=e.allTeams,a=e.activeTeams,n=e.organization,r=e.access,c=e.features,o=e.routes,i=e.params;if(!n)return null;var s=r.has("project:admin"),u=Object(B.f)(S.a,{priority:"primary",size:"small",disabled:!s,title:s?void 0:Object(z.b)("You do not have permission to create teams"),onClick:function(){return Object(T.d)({organization:n})},icon:Object(B.f)(R.b,{size:"xs",isCircled:!0})},Object(z.b)("Create Team")),l=o.find((function(e){return"teams/"===e.path})),f=l?Object(P.a)(l,{routes:o,params:i,stepBack:-2}):"",m=new Set(a.map((function(e){return e.id}))),d=t.filter((function(e){return!m.has(e.id)})),b=Object(z.b)("Teams");return Object(B.f)("div",{"data-test-id":"team-list"},Object(B.f)(I.a,{title:b,objSlug:n.slug}),Object(B.f)(w.a,{title:b,action:u}),Object(B.f)(k.a,null,Object(B.f)(k.e,null,Object(z.b)("Your Teams")),Object(B.f)(k.c,null,Object(B.f)(Z,{urlPrefix:f,organization:n,teamList:a,access:r,openMembership:!1}))),Object(B.f)(k.a,null,Object(B.f)(k.e,null,Object(z.b)("Other Teams")),Object(B.f)(k.c,null,Object(B.f)(Z,{urlPrefix:f,organization:n,teamList:d,access:r,openMembership:!(!c.has("open-membership")&&!r.has("org:write"))}))))}_.displayName="OrganizationTeams";var ee=_;function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=b()(e);if(t){var r=b()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return m()(this,a)}}var ae=function(e){l()(a,e);var t=te(a);function a(){return o()(this,a),t.apply(this,arguments)}return s()(a,[{key:"componentDidMount",value:function(){this.fetchStats()}},{key:"fetchStats",value:function(){Object(j.f)(this.props.api,{orgId:this.props.params.orgId,query:{since:((new Date).getTime()/1e3-86400).toString(),stat:"generated",group:"project"}})}},{key:"render",value:function(){var e=this.props,t=e.organization,a=e.teams;if(!t)return null;var n=Object(O.t)(a,(function(e){return e.name})),c=n.filter((function(e){return e.isMember}));return Object(B.f)(ee,r()({},this.props,{access:new Set(t.access),features:new Set(t.features),organization:t,allTeams:n,activeTeams:c}))}}]),a}(p.a.Component);ae.displayName="OrganizationTeamsContainer";t.default=Object(h.a)(Object(v.a)(Object(y.a)(ae)))}}]);
//# sourceMappingURL=OrganizationTeams.js.map