(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[138],{2011:function(t,e,n){"use strict";n(1);var r=n(249),a=n.n(r),o=n(0),i=function(t){var e="".concat(t.title," - ").concat(t.objSlug," - Sentry");return Object(o.f)(a.a,{title:e},t.children)};i.displayName="SentryDocumentTitle",e.a=i},2018:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return l}));var r=n(3),a=n(8),o=Object(r.a)("div",{target:"e1fmhx4f0",label:"ChartControls"})("display:flex;justify-content:space-between;padding:",Object(a.a)(1)," ",Object(a.a)(3),";border-top:1px solid ",(function(t){return t.theme.border}),";"),i=Object(r.a)("h4",{target:"e1fmhx4f2",label:"SectionHeading"})("display:inline-grid;grid-auto-flow:column;grid-gap:",Object(a.a)(1),";align-items:center;color:",(function(t){return t.theme.subText}),";font-size:",(function(t){return t.theme.fontSizeMedium}),";margin:",Object(a.a)(1)," 0;line-height:1.3;"),c=Object(r.a)("span",{target:"e1fmhx4f3",label:"SectionValue"})("color:",(function(t){return t.theme.subText}),";font-size:",(function(t){return t.theme.fontSizeMedium}),";margin-right:",Object(a.a)(1),";"),l=Object(r.a)("div",{target:"e1fmhx4f4",label:"InlineContainer"})("display:flex;align-items:center;margin-right:",Object(a.a)(2),";> h4{margin-right:",Object(a.a)(1),";}&:last-child{margin-right:0;}")},2081:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return v})),n.d(e,"e",(function(){return h}));var r=n(6),a=n.n(r),o=n(74),i=n(67),c=n(80);var l=n(45);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t){return"/organizations/".concat(t.slug,"/performance/")}function p(t){return String(Object(o.d)(t.query.query)||"").trim()}function d(t,e,n,r){return{pathname:"/organizations/".concat(t.slug,"/performance/").concat(e,"/"),query:s(s({},r),{},{transaction:n})}}function b(t){var e=t.organization,n=t.baselineEventSlug,r=t.regressionEventSlug,a=t.transaction,o=t.query;return{pathname:"/organizations/".concat(e.slug,"/performance/compare/").concat(n,"/").concat(r,"/"),query:s(s({},o),{},{transaction:a})}}function v(t){var e,n,r=null==i?void 0:null===(e=c.c())||void 0===e?void 0:null===(n=e.getScope())||void 0===n?void 0:n.getTransaction(),a=Object(l.p)(t.datetime.period,t.datetime.start,t.datetime.end),o=Math.floor(86400*a);null==r||r.setTag("statsPeriod",o.toString())}function h(t){var e=t.query.transaction;return Object(o.d)(e)}},2096:function(t,e,n){"use strict";var r=n(7),a=n.n(r),o=n(82),i=n.n(o),c=n(9),l=n.n(c),u=n(10),s=n.n(u),f=n(12),p=n.n(f),d=n(13),b=n.n(d),v=n(5),h=n.n(v),g=n(0),m=n(576),y=n.n(m),O=n(1138),j=n.n(O),w=n(61),x=n.n(w),S=n(375),P=n.n(S),D=n(131),k=n.n(D),R=n(1),V=n.n(R),z=n(32),C=n(21),E=n(564),T=n(49),F=n(762),N=n(63),q=n(51),A=n(2139),L=n(2140);function M(){var t=i()(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "]);return M=function(){return t},t}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var I=new RegExp("^".concat(z.A,"|\\").concat(z.D),"g"),W=function(t){p()(n,t);var e=_(n);function n(){var t;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).getEventFieldValues=P()((function(e,n,r){var a=t.props,o=a.api,i=a.organization,c=a.projectIds,l=null==c?void 0:c.map(String);return Object(N.o)(e.key)||Object(N.p)(e.key)?Promise.resolve([]):Object(E.b)(o,i.slug,e.key,n,l,r,!0).then((function(t){return j()(t.filter((function(t){var e=t.name;return Object(C.d)(e)})).map((function(t){return t.name})))}),(function(){throw new Error("Unable to fetch event field values")}))}),(function(t,e){var n=t.key;return"".concat(n,"-").concat(e)})),t.prepareQuery=function(t){return t.replace(I,"")},t}return s()(n,[{key:"componentDidMount",value:function(){var t,e;null===(t=(e=this.getEventFieldValues.cache).clear)||void 0===t||t.call(e)}},{key:"componentDidUpdate",value:function(t){var e,n;x()(this.props.projectIds,t.projectIds)||(null===(e=(n=this.getEventFieldValues.cache).clear)||void 0===e||e.call(n))}},{key:"getTagList",value:function(t){var e=this.props,n=e.fields,r=e.organization,a=e.tags,o=e.omitTags,i=n?Object.fromEntries(n.filter((function(t){return!Object.keys(N.c).includes(t.field)})).map((function(t){return[t.field,{key:t.field,name:t.field}]}))):{},c=r.features.includes("performance-view")?Object.assign({},t,N.c,i):k()(N.c,N.d),l=y()({},a,c);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},k()(l,null!=o?o:[])}},{key:"render",value:function(){var t=this;return Object(g.f)(L.a,null,(function(e){var n=e.measurements,r=t.getTagList(n);return Object(g.f)(g.b,null,(function(e){var n=e.css;return Object(g.f)(F.a,a()({},t.props,{hasRecentSearches:!0,savedSearchType:T.f.EVENT,onGetTagValues:t.getEventFieldValues,supportedTags:r,prepareQuery:t.prepareQuery,excludeEnvironment:!0,dropdownClassName:n(M())}))}))}))}}]),n}(V.a.PureComponent);W.displayName="SearchBar",e.a=Object(q.a)(Object(A.a)(W))},2097:function(t,e,n){"use strict";var r=n(3),a=n(2104),o=Object(r.a)(a.a,{target:"ecv1fy50",label:"TransparentLoadingMask"})((function(t){return!t.visible&&"display: none;"}),";opacity:0.4;z-index:1;");e.a=o},2139:function(t,e,n){"use strict";var r=n(6),a=n.n(r),o=n(16),i=n.n(o),c=(n(1),n(24)),l=n.n(c),u=n(35),s=n.n(u),f=n(92),p=n(223),d=n(0);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}e.a=function(t){return s()({displayName:"withTags(".concat(Object(f.a)(t),")"),mixins:[l.a.listenTo(p.a,"onTagsUpdate")],getInitialState:function(){return{tags:p.a.getAllTags()}},onTagsUpdate:function(t){this.setState({tags:t})},render:function(){var e=this.props,n=e.tags,r=i()(e,["tags"]);return Object(d.f)(t,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({tags:null!=n?n:this.state.tags},r))}})}},2140:function(t,e,n){"use strict";var r=n(33),a=n.n(r),o=n(1),i=n.n(o),c=n(2022),l=n(0),u=Object.fromEntries(Object.entries(c.g).map((function(t){var e=a()(t,2),n=e[0];return[n,{name:e[1].name,key:n}]})));function s(t){return Object(l.f)(i.a.Fragment,null,t.children({measurements:u}))}s.displayName="Measurements",e.a=s},2188:function(t,e,n){var r=n(144),a=n(114);t.exports=function(t,e,n){var o=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return a(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),r(t,e,{leading:o,maxWait:e,trailing:i})}},2353:function(t,e,n){"use strict";var r=n(6),a=n.n(r),o=n(9),i=n.n(o),c=n(10),l=n.n(c),u=n(12),s=n.n(u),f=n(13),p=n.n(f),d=n(5),b=n.n(d),v=n(1),h=n.n(v),g=n(11),m=n(2313),y=n(2319),O=n(52);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b()(t);if(e){var a=b()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p()(this,n)}}var S=function(t){s()(n,t);var e=x(n);function n(){var t;i()(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).handleChartReady=function(e){e.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}),Object(O.a)(t.props.onChartReady,e)},t.handleDataZoom=function(e,n){var r=n.getModel().option.xAxis[0];if(null!==r.rangeStart&&null!==r.rangeEnd){var o=t.props,i=o.buckets,c=o.location,l=o.paramStart,u=o.paramEnd,s=o.minZoomWidth,f=i[r.rangeStart].start,p=i[r.rangeEnd].end;if(void 0===s||p-f>s){var d,b={pathname:c.pathname,query:w(w({},c.query),{},(d={},a()(d,l,f),a()(d,u,p),d))};g.browserHistory.push(b)}else n.dispatchAction({type:"restore"}),Object(O.a)(t.props.onDataZoomCancelled)}else n.dispatchAction({type:"restore"}),Object(O.a)(t.props.onDataZoomCancelled);Object(O.a)(t.props.onDataZoom,e,n)},t}return l()(n,[{key:"render",value:function(){var t=this.props,e=t.children,n=t.xAxisIndex;return e({onChartReady:this.handleChartReady,dataZoom:Object(m.a)({xAxisIndex:n}),toolBox:Object(y.a)({},{dataZoom:{title:{zoom:"",back:""},iconStyle:{borderWidth:0,color:"transparent",opacity:0}}}),onDataZoom:this.handleDataZoom})}}]),n}(h.a.Component);S.displayName="BarChartZoom",e.a=S},2974:function(t,e,n){"use strict";n.r(e);var r=n(28),a=n.n(r),o=n(6),i=n.n(o),c=n(9),l=n.n(c),u=n(10),s=n.n(u),f=n(12),p=n.n(f),d=n(13),b=n.n(d),v=n(5),h=n.n(v),g=n(3),m=n(1),y=n.n(m),O=n(11),j=n(73),w=n(101),x=n(714),S=n(713),P=n(2011),D=n(4),k=n(205),R=n(429),V=n(63),z=n(74),C=n(559),E=n(315),T=n(56),F=n(195),N=n(2022),q=n(31),A=n(319),L=n(167),M=n(8),_=n(37),I=n(2096),W=n(374),Z=n(165),B=n(2084),H=n(7),Q=n.n(H),U=n(2188),K=n.n(U),G=n(61),J=n.n(G),Y=n(729),X=n(2353),$=n(2321),tt=n(1153),et=n(2097),nt=n(437),rt=n(2161),at=n(782),ot=n(108),it=n(25),ct=n(2018),lt=Object(g.a)(Z.f,{target:"e8bgzy60",label:"Card"})({name:"1lczy7e",styles:"display:grid;grid-template-columns:325px minmax(100px,auto);padding:0;"}),ut=Object(g.a)("div",{target:"e8bgzy61",label:"CardSection"})("padding:",Object(M.a)(3),";"),st=Object(g.a)(ut,{target:"e8bgzy62",label:"CardSummary"})("position:relative;border-right:1px solid ",(function(t){return t.theme.border}),";grid-column:1/1;display:flex;flex-direction:column;justify-content:space-between;"),ft=Object(g.a)(ct.c,{target:"e8bgzy63",label:"CardSectionHeading"})({name:"dpoqzr",styles:"margin:0px;"}),pt=Object(g.a)("div",{target:"e8bgzy64",label:"Description"})("font-size:",(function(t){return t.theme.fontSizeMedium}),";color:",(function(t){return t.theme.subText}),";"),dt=Object(g.a)("div",{target:"e8bgzy65",label:"StatNumber"})({name:"idm3bz",styles:"font-size:32px;"}),bt=n(2141),vt=n(0);function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var yt=function(t){p()(n,t);var e=mt(n);function n(){var t;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={refDataRect:null,refPixelRect:null},t.trackOpenInDiscoverClicked=function(){var e=t.props.organization,n=t.props.vital;Object(_.d)({eventKey:"performance_views.vitals.open_in_discover",eventName:"Performance Views: Open vitals in discover",organization_id:e.id,vital:n.slug})},t.handleRendered=K()((function(e,n){var r=t.props.chartData,a=t.state.refDataRect;if(!(null===a||r.length<1)){var o=null===a?null:Object(bt.a)(n,a);null===o||J()(o,t.state.refPixelRect)||t.setState({refPixelRect:o})}}),200,{leading:!0}),t.handleDataZoomCancelled=function(){},t}return s()(n,[{key:"getFormattedStatNumber",value:function(){var t=this.props,e=t.summary,n=t.vital.type;return null===e?"—":"duration"===n?Object(ot.j)(e/1e3,2,!0):Object(ot.g)(e,2)}},{key:"renderSummary",value:function(){var t,e=this.props,n=e.summary,r=e.vital,a=e.colors,o=e.eventView,i=e.organization,c=e.min,l=e.max,u=r.slug,s=r.name,f=r.description,p=r.failureThreshold,d="measurements.".concat(u),b=o.withColumns([{kind:"field",field:"transaction"},{kind:"function",function:["percentile",d,N.d.toString()]},{kind:"function",function:["count","",""]}]).withSorts([{kind:"desc",field:Object(V.l)("percentile(".concat(d,",").concat(N.d.toString(),")"))}]),v=Object(C.c)(null!==(t=b.query)&&void 0!==t?t:"");return v.addTagValues("has",[d]),void 0===c&&void 0===l||(void 0!==c&&v.addTagValues(d,[">=".concat(c)]),void 0!==l&&v.addTagValues(d,["<=".concat(l)])),b.query=Object(C.b)(v),Object(vt.f)(st,null,Object(vt.f)(Ot,{color:a[0]}),Object(vt.f)(ft,null,"".concat(s," (").concat(u.toUpperCase(),")"),null===n?null:n<p?Object(vt.f)(jt,{color:it.b.purple300},Object(D.b)("pass")):Object(vt.f)(jt,{color:it.b.red300},Object(D.b)("fail"))),Object(vt.f)(dt,null,this.getFormattedStatNumber()),Object(vt.f)(pt,null,f),Object(vt.f)("div",null,Object(vt.f)(rt.a,{size:"small",to:b.getResultsViewUrlTarget(i.slug),onClick:this.trackOpenInDiscoverClicked},Object(D.b)("Open in Discover"))))}},{key:"renderHistogram",value:function(){var t=this,e=this.props,n=e.location,r=e.isLoading,o=e.error,i=e.colors,c=e.vital,l=e.precision,u=void 0===l?0:l,s=c.slug,f=this.getSeries(),p={type:"category",truncate:!0,axisLabel:{margin:20},axisTick:{alignWithLabel:!0}},d=f.data.map((function(t){return t.value})),b={type:"value",max:d.length?Math.max.apply(Math,a()(d)):void 0,axisLabel:{color:it.b.chartLabel,formatter:ot.f}},v=[f];if(!r&&!o){var h=this.getBaselineSeries();null!==h&&v.push(h);var g=this.getFailureSeries();null!==g&&v.push(g)}return Object(vt.f)(X.a,{minZoomWidth:Math.pow(10,-u)*N.c,location:n,paramStart:"".concat(s,"Start"),paramEnd:"".concat(s,"End"),xAxisIndex:[0],buckets:this.computeBuckets(),onDataZoomCancelled:this.handleDataZoomCancelled},(function(e){return Object(vt.f)(wt,null,Object(vt.f)(et.a,{visible:r}),Object(vt.f)(Y.a,Q()({series:v,xAxis:p,yAxis:b,colors:i,onRendered:t.handleRendered,grid:{left:Object(M.a)(3),right:Object(M.a)(3),top:Object(M.a)(3),bottom:Object(M.a)(1.5)},stacked:!0},e)))}))}},{key:"bucketWidth",value:function(){var t=this.props.chartData;return t.length>=2?t[1].histogram-t[0].histogram:0}},{key:"computeBuckets",value:function(){var t=this.props.chartData,e=this.bucketWidth();return t.map((function(t){var n=t.histogram;return{start:n,end:n+e}}))}},{key:"getSeries",value:function(){var t=this.props,e=t.chartData,n=t.vital,r=this.bucketWidth(),a=e.map((function(t){var e=t.histogram,a=r>1?Math.ceil(e+r/2):e,o="duration"===n.type?function(t){if(t<=1e3)return Object(ot.j)(t/1e3,2,!0);return Object(ot.j)(t/1e3,3,!0)}(a):(Math.round(100*(a+Number.EPSILON))/100).toLocaleString();return{value:t.count,name:o}}));return{seriesName:Object(D.b)("Count"),data:a}}},{key:"getBaselineSeries",value:function(){var t=this.props,e=t.chartData,n=t.summary;if(null===n||null===this.state.refPixelRect)return null;var r=Object(bt.b)(e,this.bucketWidth(),n);if(null===r||-1===r)return null;var o=Object(bt.d)({x:r-.5,y:0},this.state.refDataRect,this.state.refPixelRect);if(null===o)return null;var i=Object(bt.d)({x:r-.5,y:Math.max.apply(Math,a()(e.map((function(t){return t.count}))))||1},this.state.refDataRect,this.state.refPixelRect);if(null===i)return null;var c=Object($.a)({animationDuration:200,data:[[o,i]],label:{show:!1},lineStyle:{color:it.b.textColor,type:"solid"}});return c.tooltip={formatter:function(){return['<div class="tooltip-series tooltip-series-solo">','<span class="tooltip-label">',"<strong>".concat(Object(D.b)("Baseline"),"</strong>"),"</span>","</div>",'<div class="tooltip-arrow"></div>'].join("")}},{seriesName:Object(D.b)("Baseline"),data:[],markLine:c}}},{key:"getFailureSeries",value:function(){var t=this.props,e=t.chartData,n=t.vital,r=t.failureRate,o=n.failureThreshold,i=n.type;if(null===this.state.refDataRect||null===this.state.refPixelRect)return null;var c=Object(bt.b)(e,this.bucketWidth(),o);if(null===c)return null;c=-1===c?0:c;var l=Object(bt.d)({x:c-.5,y:0},this.state.refDataRect,this.state.refPixelRect);if(null===l)return null;var u=Object(bt.d)({x:e.length-.5,y:Math.max.apply(Math,a()(e.map((function(t){return t.count}))))||1},this.state.refDataRect,this.state.refPixelRect);if(null===u)return null;var s=Object($.a)({animation:!1,data:[[{x:l.x,y:l.y},{x:l.x,y:u.y}],[{x:l.x,y:u.y},{x:u.x,y:u.y}],[{x:u.x,y:u.y},{x:u.x,y:l.y}]],label:{show:!1},lineStyle:{color:it.b.red300,type:"dashed",width:1.5,emphasis:{color:it.b.red300,type:"dashed",width:1.5}}});s.tooltip={formatter:function(){return['<div class="tooltip-series tooltip-series-solo">','<span class="tooltip-label">',"<strong>",Object(D.b)("Fails threshold at %s.","duration"===i?Object(ot.j)(o/1e3,2,!0):Object(ot.g)(o,2)),"</strong>","</span>","</div>",'<div class="tooltip-arrow"></div>'].join("")}};var f=Object(tt.a)({animationDuration:200,data:[{x:u.x-16,y:u.y+16}],itemStyle:{color:it.b.red300},silent:!0,symbol:"path://".concat(at.a),symbolKeepAspect:!0,symbolSize:[14,16],label:{formatter:Object(ot.h)(r,0),position:"left"}});return{seriesName:Object(D.b)("Failure Region"),data:[],markLine:s,markPoint:f}}},{key:"render",value:function(){return Object(vt.f)(lt,null,this.renderSummary(),this.renderHistogram())}}],[{key:"getDerivedStateFromProps",value:function(t,e){var n=t.isLoading,r=t.error,a=t.chartData;if(n||null===r)return gt({},e);var o=Object(bt.c)(a);return null===e.refDataRect||null!==o&&!J()(o,e.refDataRect)?gt(gt({},e),{},{refDataRect:o}):gt({},e)}}]),n}(y.a.Component);yt.displayName="VitalCard";var Ot=Object(g.a)("div",{target:"e18etcac0",label:"Indicator"})("position:absolute;top:20px;left:0px;width:6px;height:18px;border-radius:0 3px 3px 0;background-color:",(function(t){return t.color}),";"),jt=Object(g.a)(nt.a,{target:"e18etcac1",label:"StyledTag"})("position:absolute;right:",Object(M.a)(3),";background-color:",(function(t){return t.color}),";color:",(function(t){return t.theme.white}),";"),wt=Object(g.a)("div",{target:"e18etcac2",label:"Container"})({name:"79elbk",styles:"position:relative;"});var xt=yt,St=n(16),Pt=n.n(St),Dt=n(131),kt=n.n(Dt),Rt=n(2122),Vt=n(51);function zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ct(t){var e=t.measurements,n=t.numBuckets,r=t.min,a=t.max,o=t.precision,i=t.dataFilter,c=t.eventView,l=t.location,u={measurement:e,numBuckets:n,min:r,max:a,precision:o,dataFilter:i},s=kt()(c.getEventsAPIPayload(l),["field","sort","per_page"]);return Object.assign(u,s)}function Et(t){t.clear()}function Tt(t,e){var n=t.data,r=e.measurements.reduce((function(t,e){return t["measurements.".concat(e)]=[],t}),{});return null==n||n.forEach((function(t){r["measurements.".concat(t.key)].push({histogram:t.bin,count:t.count})})),r}function Ft(t){var e=t.children;return 0===t.measurements.length?Object(vt.f)(y.a.Fragment,null,e({isLoading:!1,error:null,pageLinks:null,histograms:{}})):Object(vt.f)(Rt.a,Q()({route:"events-measurements-histogram",getRequestPayload:Ct,beforeFetch:Et,afterFetch:Tt},kt()(t,"children")),(function(e){var n=e.tableData,r=Pt()(e,["tableData"]);return t.children(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({histograms:n},r))}))}Ft.displayName="MeasurementsHistogramQuery";var Nt=Object(Vt.a)(Ft);function qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var At=function(t){p()(n,t);var e=qt(n);function n(){return l()(this,n),e.apply(this,arguments)}return s()(n,[{key:"renderVitalCard",value:function(t,e,n,r,a,o,i,c,l,u){var s=this.props,f=s.location,p=s.organization,d=s.eventView,b=s.dataFilter,v=N.g[t],h=void 0!==c||void 0!==l;return Object(vt.f)(Nt,{location:f,orgSlug:p.slug,eventView:d,numBuckets:N.c,measurements:h?[v.slug]:[],min:c,max:l,precision:u,dataFilter:b},(function(s){var b,g,m=h?s.isLoading:e,y=h?null!==s.error:n,O=h&&null!==(b=null===(g=s.histograms)||void 0===g?void 0:g[t])&&void 0!==b?b:o;return Object(vt.f)(xt,{location:f,isLoading:m,error:y,vital:v,summary:r,failureRate:a,chartData:O,colors:i,eventView:d,organization:p,min:c,max:l,precision:u})}))}},{key:"renderVitalGroup",value:function(t,e){var n=this,r=this.props,a=r.location,o=r.organization,i=r.eventView,c=r.dataFilter,l=t.vitals,u=t.colors,s=t.min,f=t.max,p=t.precision,d=l.reduce((function(t,e){var n=N.g[e].slug;return t[e]={start:Object(z.d)(a.query["".concat(n,"Start")]),end:Object(z.d)(a.query["".concat(n,"End")])},t}),{});return Object(vt.f)(Nt,{location:a,orgSlug:o.slug,eventView:i,numBuckets:N.c,measurements:l.map((function(t){return N.g[t].slug})),min:s,max:f,precision:p,dataFilter:c},(function(t){var r=e.isLoading||t.isLoading,a=null!==e.error||null!==t.error;return Object(vt.f)(y.a.Fragment,null,l.map((function(o,i){var c,l,s,f,b,v,h,g,m=N.g[o],O=null===(c=e.tableData)||void 0===c?void 0:null===(l=c.data)||void 0===l?void 0:l[0],j=Object(V.l)("percentile(".concat(o,", ").concat(N.d,")")),w=null!==(s=null==O?void 0:O[j])&&void 0!==s?s:null,x=Object(V.l)("count_at_least(".concat(o,", 0)")),S=Object(V.l)("count_at_least(".concat(o,", ").concat(m.failureThreshold,")")),P=null!==(f=null==O?void 0:O[S])&&void 0!==f?f:0,D=null!==(b=null==O?void 0:O[x])&&void 0!==b?b:0,k=D<=0?0:P/D,R=null!==(v=d[o])&&void 0!==v?v:{},z=R.start,C=R.end;return Object(vt.f)(y.a.Fragment,{key:o},n.renderVitalCard(o,r,a,w,k,null!==(h=null===(g=t.histograms)||void 0===g?void 0:g[o])&&void 0!==h?h:[],[u[i]],Lt(z,p),Lt(C,p),p))})))}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.location,r=e.organization,a=e.eventView;return Object(vt.f)(Z.a,null,Object(vt.f)(B.a,{location:n,orgSlug:r.slug,eventView:a,limit:1},(function(e){return Object(vt.f)(y.a.Fragment,null,N.e.map((function(n){return Object(vt.f)(y.a.Fragment,{key:n.vitals.join("")},t.renderVitalGroup(n,e))})))})))}}]),n}(y.a.Component);function Lt(t,e){if(void 0!==t)return void 0===e||0===e?parseInt(t,10):parseFloat(t)}At.displayName="VitalsPanel";var Mt=At,_t=n(2514);function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var Bt=function(t){p()(n,t);var e=Zt(n);function n(){var t;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={incompatibleAlertNotice:null},t.handleSearch=function(e){var n=t.props.location,r=Object(L.a)(Wt(Wt({},n.query||{}),{},{query:e}));delete r.cursor,O.browserHistory.push({pathname:n.pathname,query:r})},t.handleIncompatibleQuery=function(e,n){var r=e((function(){return t.setState({incompatibleAlertNotice:null})}));t.setState({incompatibleAlertNotice:r})},t.handleResetView=function(){var e=t.props,n=e.location,r=e.organization;Object(_.d)({eventKey:"performance_views.vitals.reset_view",eventName:"Performance Views: Reset vitals view",organization_id:r.id});var a=Wt({},n.query);N.h.forEach((function(t){return delete a[t]})),O.browserHistory.push({pathname:n.pathname,query:a})},t.handleFilterChange=function(e){var n=t.props,r=n.location,a=n.organization;Object(_.d)({eventKey:"performance_views.vitals.filter_changed",eventName:"Performance Views: Change vitals filter",organization_id:a.id,value:e});var o=Wt(Wt({},r.query),{},{cursor:void 0,dataFilter:e});N.h.forEach((function(t){return delete o[t]})),O.browserHistory.push({pathname:r.pathname,query:o})},t}return s()(n,[{key:"getActiveFilter",value:function(){var t=this.props.location,e=t.query.dataFilter?Object(z.d)(t.query.dataFilter):N.a[0].value;return N.a.find((function(t){return t.value===e}))||N.a[0]}},{key:"render",value:function(){var t=this,e=this.props,n=e.transactionName,r=e.location,a=e.eventView,o=e.projects,i=e.organization,c=this.state.incompatibleAlertNotice,l=Object(z.d)(r.query.query)||"",u=this.getActiveFilter(),s=N.h.map((function(t){return r.query[t]})).some((function(t){return void 0!==t}));return Object(vt.f)(y.a.Fragment,null,Object(vt.f)(_t.b,{eventView:a,location:r,organization:i,projects:o,transactionName:n,currentTab:_t.a.RealUserMonitoring,hasWebVitals:!0,handleIncompatibleQuery:this.handleIncompatibleQuery}),Object(vt.f)(A.a,null,c&&Object(vt.f)(A.f,{fullWidth:!0},c),Object(vt.f)(A.f,{fullWidth:!0},Object(vt.f)(Qt,null,Object(vt.f)(Ht,{organization:i,projectIds:a.project,query:l,fields:a.fields,onSearch:this.handleSearch}),Object(vt.f)(W.b,{buttonProps:{prefix:Object(D.b)("Filter")},label:u.label},N.a.map((function(e){var n=e.label,r=e.value;return Object(vt.f)(W.a,{key:r,onSelect:t.handleFilterChange,eventKey:r,isActive:r===u.value},n)}))),Object(vt.f)(q.a,{onClick:this.handleResetView,disabled:!s,"data-test-id":"reset-view"},Object(D.b)("Reset View"))),Object(vt.f)(Mt,{organization:i,location:r,eventView:a,dataFilter:u.value}))))}}]),n}(y.a.Component);Bt.displayName="VitalsContent";var Ht=Object(g.a)(I.a,{target:"e1atb5ss0",label:"StyledSearchBar"})({name:"i9gxme",styles:"flex-grow:1;"}),Qt=Object(g.a)("div",{target:"e1atb5ss1",label:"StyledActions"})("display:grid;grid-gap:",Object(M.a)(2),";grid-template-columns:auto max-content max-content;align-items:center;margin-bottom:",Object(M.a)(3),";"),Ut=Bt,Kt=n(2081);function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){i()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h()(t);if(e){var a=h()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b()(this,n)}}var Xt=function(t){p()(n,t);var e=Yt(n);function n(){var t;l()(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))).state={eventView:te(t.props.location,Object(Kt.e)(t.props.location))},t.renderNoAccess=function(){return Object(vt.f)(j.b,{type:"warning"},Object(D.b)("You don't have access to this feature"))},t}return s()(n,[{key:"getDocumentTitle",value:function(){var t=Object(Kt.e)(this.props.location);return"string"==typeof t&&String(t).trim().length>0?[String(t).trim(),Object(D.b)("Vitals")].join(" — "):[Object(D.b)("Summary"),Object(D.b)("Vitals")].join(" — ")}},{key:"render",value:function(){var t=this.props,e=t.organization,n=t.projects,r=t.location,a=this.state.eventView,o=Object(Kt.e)(r);return a&&void 0!==o?Object(vt.f)(P.a,{title:this.getDocumentTitle(),objSlug:e.slug},Object(vt.f)(w.a,{features:["performance-view"],organization:e,renderDisabled:this.renderNoAccess},Object(vt.f)(S.a,null,Object(vt.f)($t,null,Object(vt.f)(x.a,{organization:e},Object(vt.f)(Ut,{location:r,eventView:a,transactionName:o,organization:e,projects:n})))))):(O.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/performance/"),query:Jt({},r.query)}),null)}}],[{key:"getDerivedStateFromProps",value:function(t,e){return Jt(Jt({},e),{},{eventView:te(t.location,Object(Kt.e)(t.location))})}}]),n}(y.a.Component);Xt.displayName="TransactionVitals";var $t=Object(g.a)(k.b,{target:"e1o8lmc40",label:"StyledPageContent"})({name:"y8aj3r",styles:"padding:0;"});function te(t,e){if(void 0!==e){var n=Object(z.d)(t.query.query)||"",r=Object(C.c)(n);r.setTagValues("event.type",["transaction"]).setTagValues("transaction.op",["pageload"]).setTagValues("transaction",[e]),Object.keys(r.tagValues).forEach((function(t){Object(V.o)(t)&&r.removeTag(t)}));var o=N.e.reduce((function(t,e){return t.concat(e.vitals)}),[]);return R.a.fromNewQueryWithLocation({id:void 0,version:2,name:e,fields:[].concat(a()(o.map((function(t){return"percentile(".concat(t,", ").concat(N.d,")")}))),a()(o.map((function(t){return"count_at_least(".concat(t,", 0)")}))),a()(o.map((function(t){return"count_at_least(".concat(t,", ").concat(N.g[t].failureThreshold,")")})))),query:Object(C.b)(r),projects:[]},t)}}e.default=Object(E.a)(Object(F.a)(Object(T.a)(Xt)))}}]);
//# sourceMappingURL=PerformanceTransactionVitals.js.map