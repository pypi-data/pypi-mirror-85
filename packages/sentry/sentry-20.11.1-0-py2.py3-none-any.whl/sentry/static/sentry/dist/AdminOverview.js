(window.sntryWpJsonp=window.sntryWpJsonp||[]).push([[47],{3002:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(249),i=n.n(s),o=n(165),c=n(4),l=n(9),u=n.n(l),p=n(10),f=n.n(p),v=n(12),h=n.n(v),d=n(13),y=n.n(d),b=n(5),x=n.n(b),m=n(122),O=n(44),g=n(715),j=n(51),D=n(25),w=n(0);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var a=x()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var k=function(e){h()(n,e);var t=S(n);function n(){var e;u()(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state=e.getInitialState(),e.fetchData=function(){["client-api.all-versions.responses.2xx","client-api.all-versions.responses.4xx","client-api.all-versions.responses.5xx"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(n){e.setState((function(e){var r=e.rawData;return r[t]=n,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e.requestFinished=function(){var t=e.state.rawData;t["events.total"]&&t["events.dropped"]&&e.processOrgData(),t["client-api.all-versions.responses.2xx"]&&t["client-api.all-versions.responses.4xx"]&&t["client-api.all-versions.responses.5xx"]&&e.setState({loading:!1})},e}return f()(n,[{key:"getInitialState",value:function(){return{error:!1,loading:!0,rawData:{"client-api.all-versions.responses.2xx":null,"client-api.all-versions.responses.4xx":null,"client-api.all-versions.responses.5xx":null}}}},{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)}},{key:"processRawSeries",value:function(e){return e.map((function(e){return{name:1e3*e[0],value:e[1]}}))}},{key:"getChartSeries",value:function(){var e=this.state.rawData;return[{seriesName:"2xx",data:this.processRawSeries(e["client-api.all-versions.responses.2xx"]),color:D.b.green200},{seriesName:"4xx",data:this.processRawSeries(e["client-api.all-versions.responses.4xx"]),color:D.b.blue300},{seriesName:"5xx",data:this.processRawSeries(e["client-api.all-versions.responses.5xx"]),color:D.b.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error;if(t)return Object(w.f)(O.default,null);if(n)return Object(w.f)(m.a,{onRetry:this.fetchData});var r=this.getChartSeries(),a=r.map((function(e){return e.color}));return Object(w.f)(g.a,{series:r,colors:a,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),n}(a.a.Component);k.displayName="ApiChart";var R=Object(j.a)(k);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x()(e);if(t){var a=x()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y()(this,n)}}var E=function(e){h()(n,e);var t=A(n);function n(){var e;u()(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state=e.getInitialState(),e.fetchData=function(){["events.total","events.dropped"].forEach((function(t){e.props.api.request("/internal/stats/",{method:"GET",data:{since:e.props.since,resolution:e.props.resolution,key:t},success:function(n){e.setState((function(e){var r=e.rawData;return r[t]=n,{rawData:r}}),e.requestFinished)},error:function(){e.setState({error:!0})}})}))},e}return f()(n,[{key:"getInitialState",value:function(){return{error:!1,loading:!0,rawData:{"events.total":null,"events.dropped":null},stats:{received:[],rejected:[]}}}},{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e){this.props.since!==e.since&&this.setState(this.getInitialState(),this.fetchData)}},{key:"requestFinished",value:function(){var e=this.state.rawData;e["events.total"]&&e["events.dropped"]&&this.processOrgData()}},{key:"processOrgData",value:function(){var e=this.state.rawData,t={},n={},r=[0,0];e["events.total"].forEach((function(a,s){var i=a[1],o=e["events.dropped"][s][1],c=a[0];void 0===t[c]?(t[c]=i,n[c]=o):(t[c]+=i,n[c]+=o),i>0&&(r[0]+=i,r[1]+=1)})),this.setState({stats:{rejected:Object.keys(n).map((function(e){return{name:1e3*e,value:n[e]||0}})),accepted:Object.keys(t).map((function(e){return{name:1e3*e,value:t[e]-n[e]}}))},loading:!1})}},{key:"getChartSeries",value:function(){var e=this.state.stats;return[{seriesName:Object(c.b)("Accepted"),data:e.accepted,color:D.b.blue300},{seriesName:Object(c.b)("Dropped"),data:e.rejected,color:D.b.red200}]}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.error;if(t)return Object(w.f)(O.default,null);if(n)return Object(w.f)(m.a,{onRetry:this.fetchData});var r=this.getChartSeries(),a=r.map((function(e){return e.color}));return Object(w.f)(g.a,{series:r,colors:a,height:110,stacked:!0,isGroupedByDate:!0,showTimeInTooltip:!0,labelYAxisExtents:!0})}}]),n}(a.a.Component);E.displayName="EventChart";var I=Object(j.a)(E),C=function(){var e=(new Date).getTime()/1e3-604800;return Object(w.f)(i.a,{title:"Admin Overview - Sentry"},Object(w.f)(a.a.Fragment,null,Object(w.f)("h3",null,Object(c.b)("System Overview")),Object(w.f)(o.a,{key:"events"},Object(w.f)(o.e,null,Object(c.b)("Event Throughput")),Object(w.f)(o.c,{withPadding:!0},Object(w.f)(I,{since:e,resolution:"1h"}))),Object(w.f)(o.a,{key:"api"},Object(w.f)(o.e,null,Object(c.b)("API Responses")),Object(w.f)(o.c,{withPadding:!0},Object(w.f)(R,{since:e,resolution:"1h"})))))};C.displayName="AdminOverview";t.default=C}}]);
//# sourceMappingURL=AdminOverview.js.map